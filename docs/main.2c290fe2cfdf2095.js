"use strict";(self.webpackChunkBasic_crud_angular_firebase=self.webpackChunkBasic_crud_angular_firebase||[]).push([[179],{2011:(at,De,N)=>{N.d(De,{Dh:()=>ce,GT:()=>fe,cc:()=>Te,hO:()=>qe,on:()=>B,pX:()=>J,xv:()=>oe});var g=N(5e3),W=N(127),P=N(5813);at=N.hmd(at);const se=["ngOnDestroy"],J=(ve,et,Ze,be={})=>new Proxy(ve,{get:(me,_e)=>Ze.runOutsideAngular(()=>{var $e;if(ve[_e])return(null===($e=null==be?void 0:be.spy)||void 0===$e?void 0:$e.get)&&be.spy.get(_e,ve[_e]),ve[_e];if(se.indexOf(_e)>-1)return()=>{};const je=et.toPromise().then(te=>{const ze=te&&te[_e];return"function"==typeof ze?ze.bind(te):ze&&ze.then?ze.then(Q=>Ze.run(()=>Q)):Ze.run(()=>ze)});return new Proxy(()=>{},{get:(te,ze)=>je[ze],apply:(te,ze,Q)=>je.then(ie=>{var ee;const we=ie&&ie(...Q);return(null===(ee=null==be?void 0:be.spy)||void 0===ee?void 0:ee.apply)&&be.spy.apply(_e,Q,we),we})})})}),fe=(ve,et)=>{et.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(be=>{Object.defineProperty(ve.prototype,be,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,be))})})};class re{constructor(et){return et}}const ce=new g.OlP("angularfire2.app.options"),oe=new g.OlP("angularfire2.app.name");function B(ve,et,Ze){const me="object"==typeof Ze&&Ze||{};me.name=me.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const $e=W.Z.apps.filter(je=>je&&je.name===me.name)[0]||et.runOutsideAngular(()=>W.Z.initializeApp(ve,me));try{JSON.stringify(ve)!==JSON.stringify($e.options)&&j("error",`${$e.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new re($e)}const j=(ve,...et)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[ve](...et)},K={provide:re,useFactory:B,deps:[ce,g.R0b,[new g.FiY,oe]]};let qe=(()=>{class ve{constructor(Ze){W.Z.registerVersion("angularfire",P.q4.full,"core"),W.Z.registerVersion("angularfire",P.q4.full,"app-compat"),W.Z.registerVersion("angular",g.q4F.full,Ze.toString())}static initializeApp(Ze,be){return{ngModule:ve,providers:[{provide:ce,useValue:Ze},{provide:oe,useValue:be}]}}}return ve.\u0275fac=function(Ze){return new(Ze||ve)(g.LFG(g.Lbi))},ve.\u0275mod=g.oAB({type:ve}),ve.\u0275inj=g.cJS({providers:[K]}),ve})();function Te(ve,et,Ze,be,me){const[,_e,$e]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===ve)||[];if(_e)return function Me(ve,et){try{return ve.toString()===et.toString()}catch(Ze){return ve===et}}(me,$e)||(he("error",`${et} was already initialized on the ${Ze} Firebase App with different settings.${ke?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:me,was:$e})),_e;{const je=be();return globalThis.\u0275AngularfireInstanceCache.push([ve,je,me]),je}}const ke=!!at.hot,he=(ve,...et)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[ve](...et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(at,De,N)=>{N.d(De,{q4:()=>ll,iC:()=>pl,HU:()=>au,vb:()=>qc,JM:()=>Fs});var g=N(5e3),W=N(5867),P=N(5861),se=N(9681),J=N(2090),fe=N(4859),re=N(1877);const ce="@firebase/installations",j="w:0.5.8",K="FIS_v2",ve=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function et(b){return b instanceof J.ZR&&b.code.includes("request-failed")}function Ze({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function be(b){return{token:b.token,requestStatus:2,expiresIn:Q(b.expiresIn),creationTime:Date.now()}}function me(b,C){return _e.apply(this,arguments)}function _e(){return(_e=(0,P.Z)(function*(b,C){const F=(yield C.json()).error;return ve.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function $e({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function je(b,{refreshToken:C}){const x=$e(b);return x.append("Authorization",function ie(b){return`${K} ${b}`}(C)),x}function te(b){return ze.apply(this,arguments)}function ze(){return(ze=(0,P.Z)(function*(b){const C=yield b();return C.status>=500&&C.status<600?b():C})).apply(this,arguments)}function Q(b){return Number(b.replace("s","000"))}function ee(b,C){return we.apply(this,arguments)}function we(){return(we=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:C},{fid:x}){const F=Ze(b),q=$e(b),X=C.getImmediate({optional:!0});if(X){const mt=yield X.getHeartbeatsHeader();mt&&q.append("x-firebase-client",mt)}const Se={method:"POST",headers:q,body:JSON.stringify({fid:x,authVersion:K,appId:b.appId,sdkVersion:j})},Qe=yield te(()=>fetch(F,Se));if(Qe.ok){const mt=yield Qe.json();return{fid:mt.fid||x,registrationStatus:2,refreshToken:mt.refreshToken,authToken:be(mt.authToken)}}throw yield me("Create Installation",Qe)})).apply(this,arguments)}function pe(b){return new Promise(C=>{setTimeout(C,b)})}const _t=/^[cdef][\w-]{21}$/;function Xt(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function Ge(b){return function Ne(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return _t.test(x)?x:""}catch(b){return""}}function Ft(b){return`${b.appName}!${b.appId}`}const zn=new Map;function yn(b,C){const x=Ft(b);$t(x,C),function Lt(b,C){const x=function Zr(){return!Jn&&"BroadcastChannel"in self&&(Jn=new BroadcastChannel("[Firebase] FID Change"),Jn.onmessage=b=>{$t(b.data.key,b.data.fid)}),Jn}();x&&x.postMessage({key:b,fid:C}),function ps(){0===zn.size&&Jn&&(Jn.close(),Jn=null)}()}(x,C)}function $t(b,C){const x=zn.get(b);if(x)for(const F of x)F(C)}let Jn=null;const Cr="firebase-installations-store";let Gi=null;function qi(){return Gi||(Gi=(0,J.X3)("firebase-installations-database",1,(b,C)=>{0===C&&b.createObjectStore(Cr)})),Gi}function ut(b,C){return kr.apply(this,arguments)}function kr(){return(kr=(0,P.Z)(function*(b,C){const x=Ft(b),q=(yield qi()).transaction(Cr,"readwrite"),X=q.objectStore(Cr),Ae=yield X.get(x);return yield X.put(C,x),yield q.complete,(!Ae||Ae.fid!==C.fid)&&yn(b,C.fid),C})).apply(this,arguments)}function Wn(b){return Un.apply(this,arguments)}function Un(){return(Un=(0,P.Z)(function*(b){const C=Ft(b),F=(yield qi()).transaction(Cr,"readwrite");yield F.objectStore(Cr).delete(C),yield F.complete})).apply(this,arguments)}function Kr(b,C){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,P.Z)(function*(b,C){const x=Ft(b),q=(yield qi()).transaction(Cr,"readwrite"),X=q.objectStore(Cr),Ae=yield X.get(x),Se=C(Ae);return void 0===Se?yield X.delete(x):yield X.put(Se,x),yield q.complete,Se&&(!Ae||Ae.fid!==Se.fid)&&yn(b,Se.fid),Se})).apply(this,arguments)}function hn(b){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,P.Z)(function*(b){let C;const x=yield Kr(b.appConfig,F=>{const q=gs(F),X=ta(b,q);return C=X.registrationPromise,X.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function gs(b){return kt(b||{fid:Xt(),registrationStatus:0})}function ta(b,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(ve.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function Vt(b,C){return it.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:gt(b)}:{installationEntry:C}}function it(){return(it=(0,P.Z)(function*(b,C){try{const x=yield ee(b,C);return ut(b.appConfig,x)}catch(x){throw et(x)&&409===x.customData.serverCode?yield Wn(b.appConfig):yield ut(b.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function gt(b){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,P.Z)(function*(b){let C=yield Ai(b.appConfig);for(;1===C.registrationStatus;)yield pe(100),C=yield Ai(b.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield hn(b);return F||x}return C})).apply(this,arguments)}function Ai(b){return Kr(b,C=>{if(!C)throw ve.create("installation-not-found");return kt(C)})}function kt(b){return function Gs(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function lr(b,C){return er.apply(this,arguments)}function er(){return(er=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:C},x){const F=lt(b,x),q=je(b,x),X=C.getImmediate({optional:!0});if(X){const mt=yield X.getHeartbeatsHeader();mt&&q.append("x-firebase-client",mt)}const Se={method:"POST",headers:q,body:JSON.stringify({installation:{sdkVersion:j,appId:b.appId}})},Qe=yield te(()=>fetch(F,Se));if(Qe.ok)return be(yield Qe.json());throw yield me("Generate Auth Token",Qe)})).apply(this,arguments)}function lt(b,{fid:C}){return`${Ze(b)}/${C}/authTokens:generate`}function cr(b){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,P.Z)(function*(b,C=!1){let x;const F=yield Kr(b.appConfig,X=>{if(!St(X))throw ve.create("not-registered");const Ae=X.authToken;if(!C&&U(Ae))return X;if(1===Ae.requestStatus)return x=Ke(b,C),X;{if(!navigator.onLine)throw ve.create("app-offline");const Se=$(X);return x=ct(b,Se),Se}});return x?yield x:F.authToken})).apply(this,arguments)}function Ke(b,C){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,P.Z)(function*(b,C){let x=yield Ye(b.appConfig);for(;1===x.authToken.requestStatus;)yield pe(100),x=yield Ye(b.appConfig);const F=x.authToken;return 0===F.requestStatus?cr(b,C):F})).apply(this,arguments)}function Ye(b){return Kr(b,C=>{if(!St(C))throw ve.create("not-registered");return function ue(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function ct(b,C){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,P.Z)(function*(b,C){try{const x=yield lr(b,C),F=Object.assign(Object.assign({},C),{authToken:x});return yield ut(b.appConfig,F),x}catch(x){if(!et(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield ut(b.appConfig,F)}else yield Wn(b.appConfig);throw x}})).apply(this,arguments)}function St(b){return void 0!==b&&2===b.registrationStatus}function U(b){return 2===b.requestStatus&&!function L(b){const C=Date.now();return C<b.creationTime||b.creationTime+b.expiresIn<C+36e5}(b)}function $(b){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:C})}function Le(){return(Le=(0,P.Z)(function*(b){const C=b,{installationEntry:x,registrationPromise:F}=yield hn(C);return F?F.catch(console.error):cr(C).catch(console.error),x.fid})).apply(this,arguments)}function Ht(){return(Ht=(0,P.Z)(function*(b,C=!1){const x=b;return yield dr(x),(yield cr(x,C)).token})).apply(this,arguments)}function dr(b){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,P.Z)(function*(b){const{registrationPromise:C}=yield hn(b);C&&(yield C)})).apply(this,arguments)}function Bn(b){return ve.create("missing-app-config-values",{valueName:b})}const ra="installations",Oe=b=>{const C=b.getProvider("app").getImmediate(),x=function zi(b){if(!b||!b.options)throw Bn("App Configuration");if(!b.name)throw Bn("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!b.options[x])throw Bn(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,se._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Tt=b=>{const C=b.getProvider("app").getImmediate(),x=(0,se._getProvider)(C,ra).getImmediate();return{getId:()=>function Z(b){return Le.apply(this,arguments)}(x),getToken:q=>function ht(b){return Ht.apply(this,arguments)}(x,q)}};(function on(){(0,se._registerComponent)(new fe.wA(ra,Oe,"PUBLIC")),(0,se._registerComponent)(new fe.wA("installations-internal",Tt,"PRIVATE"))})(),(0,se.registerVersion)(ce,"0.5.8"),(0,se.registerVersion)(ce,"0.5.8","esm2017");const tr="@firebase/remote-config",xn=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class vh{constructor(C,x,F,q){this.client=C,this.storage=x,this.storageCache=F,this.logger=q}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,q=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${q}.`),q}fetch(C){var x=this;return(0,P.Z)(function*(){const[F,q]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(q&&x.isCachedDataFresh(C.cacheMaxAgeMillis,F))return q;C.eTag=q&&q.eTag;const X=yield x.client.fetch(C),Ae=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&Ae.push(x.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(Ae),X})()}}function bc(b=navigator){return b.languages&&b.languages[0]||b.language}class ja{constructor(C,x,F,q,X,Ae){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=F,this.projectId=q,this.apiKey=X,this.appId=Ae}fetch(C){var x=this;return(0,P.Z)(function*(){const[F,q]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Se={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Qe={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:q,app_id:x.appId,language_code:bc()},mt={method:"POST",headers:Se,body:JSON.stringify(Qe)},Ct=fetch(Ae,mt),vt=new Promise((ii,yi)=>{C.signal.addEventListener(()=>{const so=new Error("The operation was aborted.");so.name="AbortError",yi(so)})});let Vn;try{yield Promise.race([Ct,vt]),Vn=yield Ct}catch(ii){let yi="fetch-client-network";throw"AbortError"===ii.name&&(yi="fetch-timeout"),xn.create(yi,{originalErrorMessage:ii.message})}let En=Vn.status;const Uo=Vn.headers.get("ETag")||void 0;let io,Tr;if(200===Vn.status){let ii;try{ii=yield Vn.json()}catch(yi){throw xn.create("fetch-client-parse",{originalErrorMessage:yi.message})}io=ii.entries,Tr=ii.state}if("INSTANCE_STATE_UNSPECIFIED"===Tr?En=500:"NO_CHANGE"===Tr?En=304:("NO_TEMPLATE"===Tr||"EMPTY_CONFIG"===Tr)&&(io={}),304!==En&&200!==En)throw xn.create("fetch-status",{httpStatus:En});return{status:En,eTag:Uo,config:io}})()}}class Mp{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,P.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:F}){var q=this;return(0,P.Z)(function*(){yield function kn(b,C){return new Promise((x,F)=>{const q=Math.max(C-Date.now(),0),X=setTimeout(x,q);b.addEventListener(()=>{clearTimeout(X),F(xn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const X=yield q.client.fetch(C);return yield q.storage.deleteThrottleMetadata(),X}catch(X){if(!function Cc(b){if(!(b instanceof J.ZR&&b.customData))return!1;const C=Number(b.customData.httpStatus);return 429===C||500===C||503===C||504===C}(X))throw X;const Ae={throttleEndTimeMillis:Date.now()+(0,J.$s)(F),backoffCount:F+1};return yield q.storage.setThrottleMetadata(Ae),q.attemptFetch(C,Ae)}})()}}class Dc{constructor(C,x,F,q,X){this.app=C,this._client=x,this._storageCache=F,this._storage=q,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Bu(b,C){const x=b.target.error||void 0;return xn.create(C,{originalErrorMessage:x&&x.message})}const ws="app_namespace_store";class Np{constructor(C,x,F,q=function Pp(){return new Promise((b,C)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{C(Bu(F,"storage-open"))},x.onsuccess=F=>{b(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(ws,{keyPath:"compositeKey"})}}catch(x){C(xn.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=C,this.appName=x,this.namespace=F,this.openDbPromise=q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,P.Z)(function*(){const F=yield x.openDbPromise;return new Promise((q,X)=>{const Se=F.transaction([ws],"readonly").objectStore(ws),Qe=x.createCompositeKey(C);try{const mt=Se.get(Qe);mt.onerror=Ct=>{X(Bu(Ct,"storage-get"))},mt.onsuccess=Ct=>{const vt=Ct.target.result;q(vt?vt.value:void 0)}}catch(mt){X(xn.create("storage-get",{originalErrorMessage:mt&&mt.message}))}})})()}set(C,x){var F=this;return(0,P.Z)(function*(){const q=yield F.openDbPromise;return new Promise((X,Ae)=>{const Qe=q.transaction([ws],"readwrite").objectStore(ws),mt=F.createCompositeKey(C);try{const Ct=Qe.put({compositeKey:mt,value:x});Ct.onerror=vt=>{Ae(Bu(vt,"storage-set"))},Ct.onsuccess=()=>{X()}}catch(Ct){Ae(xn.create("storage-set",{originalErrorMessage:Ct&&Ct.message}))}})})()}delete(C){var x=this;return(0,P.Z)(function*(){const F=yield x.openDbPromise;return new Promise((q,X)=>{const Se=F.transaction([ws],"readwrite").objectStore(ws),Qe=x.createCompositeKey(C);try{const mt=Se.delete(Qe);mt.onerror=Ct=>{X(Bu(Ct,"storage-delete"))},mt.onsuccess=()=>{q()}}catch(mt){X(xn.create("storage-delete",{originalErrorMessage:mt&&mt.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Ac{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,P.Z)(function*(){const x=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),q=C.storage.getActiveConfig(),X=yield x;X&&(C.lastFetchStatus=X);const Ae=yield F;Ae&&(C.lastSuccessfulFetchTimestampMillis=Ae);const Se=yield q;Se&&(C.activeConfig=Se)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Ws(){return wh.apply(this,arguments)}function wh(){return(wh=(0,P.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(b){return!1}})).apply(this,arguments)}!function Co(){(0,se._registerComponent)(new fe.wA("remote-config",function b(C,{instanceIdentifier:x}){const F=C.getProvider("app").getImmediate(),q=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw xn.create("registration-window");if(!(0,J.hl)())throw xn.create("indexed-db-unavailable");const{projectId:X,apiKey:Ae,appId:Se}=F.options;if(!X)throw xn.create("registration-project-id");if(!Ae)throw xn.create("registration-api-key");if(!Se)throw xn.create("registration-app-id");const Qe=new Np(Se,F.name,x=x||"firebase"),mt=new Ac(Qe),Ct=new re.Yd(tr);Ct.logLevel=re.in.ERROR;const vt=new ja(q,se.SDK_VERSION,x,X,Ae,Se),Vn=new Mp(vt,Qe),En=new vh(Vn,Qe,mt,Ct),Uo=new Dc(F,En,mt,Qe,Ct);return function Fr(b){const C=(0,J.m9)(b);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Uo),Uo},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(tr,"0.3.7"),(0,se.registerVersion)(tr,"0.3.7","esm2017")}();const ju="/firebase-messaging-sw.js",Es="/firebase-cloud-messaging-push-scope",Vr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Zs="google.c.a.c_id",sa="google.c.a.c_l",Sc="google.c.a.ts",kp="google.c.a.e";var Is=(()=>{return(b=Is||(Is={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Is;var b})();function Jr(b){const C=new Uint8Array(b);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ha(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),q=new Uint8Array(F.length);for(let X=0;X<F.length;++X)q[X]=F.charCodeAt(X);return q}const Ga="fcm_token_details_db",rr="fcm_token_object_Store";function Eh(b){return qa.apply(this,arguments)}function qa(){return qa=(0,P.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(Ga))return null;let C=null;return(yield(0,J.X3)(Ga,5,function(){var F=(0,P.Z)(function*(q,X,Ae,Se){var Qe;if(X<2||!q.objectStoreNames.contains(rr))return;const mt=Se.objectStore(rr),Ct=yield mt.index("fcmSenderId").get(b);if(yield mt.clear(),Ct)if(2===X){const vt=Ct;if(!vt.auth||!vt.p256dh||!vt.endpoint)return;C={token:vt.fcmToken,createTime:null!==(Qe=vt.createTime)&&void 0!==Qe?Qe:Date.now(),subscriptionOptions:{auth:vt.auth,p256dh:vt.p256dh,endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:"string"==typeof vt.vapidKey?vt.vapidKey:Jr(vt.vapidKey)}}}else if(3===X){const vt=Ct;C={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:Jr(vt.auth),p256dh:Jr(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:Jr(vt.vapidKey)}}}else if(4===X){const vt=Ct;C={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:Jr(vt.auth),p256dh:Jr(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:Jr(vt.vapidKey)}}}});return function(q,X,Ae,Se){return F.apply(this,arguments)}}())).close(),yield(0,J.Lj)(Ga),yield(0,J.Lj)("fcm_vapid_details_db"),yield(0,J.Lj)("undefined"),xc(C)?C:null}),qa.apply(this,arguments)}function xc(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:C}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const Yi="firebase-messaging-store";let oa=null;function $u(){return oa||(oa=(0,J.X3)("firebase-messaging-database",1,(b,C)=>{0===C&&b.createObjectStore(Yi)})),oa}function ln(b){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,P.Z)(function*(b){const C=Ys(b),F=yield(yield $u()).transaction(Yi).objectStore(Yi).get(C);if(F)return F;{const q=yield Eh(b.appConfig.senderId);if(q)return yield bs(b,q),q}})).apply(this,arguments)}function bs(b,C){return nn.apply(this,arguments)}function nn(){return(nn=(0,P.Z)(function*(b,C){const x=Ys(b),q=(yield $u()).transaction(Yi,"readwrite");return yield q.objectStore(Yi).put(C,x),yield q.complete,C})).apply(this,arguments)}function Mc(b){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,P.Z)(function*(b){const C=Ys(b),F=(yield $u()).transaction(Yi,"readwrite");yield F.objectStore(Yi).delete(C),yield F.complete})).apply(this,arguments)}function Ys({appConfig:b}){return b.appId}const Mn=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function aa(b,C){return ci.apply(this,arguments)}function ci(){return(ci=(0,P.Z)(function*(b,C){const x=yield Ds(b),F=dt(C),q={method:"POST",headers:x,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(Br(b.appConfig),q)).json()}catch(Ae){throw Mn.create("token-subscribe-failed",{errorInfo:Ae})}if(X.error)throw Mn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw Mn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function fr(b,C){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,P.Z)(function*(b,C){const x=yield Ds(b),F=dt(C.subscriptionOptions),q={method:"PATCH",headers:x,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${Br(b.appConfig)}/${C.token}`,q)).json()}catch(Ae){throw Mn.create("token-update-failed",{errorInfo:Ae})}if(X.error)throw Mn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw Mn.create("token-update-no-token");return X.token})).apply(this,arguments)}function Qi(b,C){return Za.apply(this,arguments)}function Za(){return(Za=(0,P.Z)(function*(b,C){const F={method:"DELETE",headers:yield Ds(b)};try{const X=yield(yield fetch(`${Br(b.appConfig)}/${C}`,F)).json();if(X.error)throw Mn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(q){throw Mn.create("token-unsubscribe-failed",{errorInfo:q})}})).apply(this,arguments)}function Br({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Ds(b){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,P.Z)(function*({appConfig:b,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function dt({p256dh:b,auth:C,endpoint:x,vapidKey:F}){const q={web:{endpoint:x,auth:C,p256dh:b}};return F!==Vr&&(q.web.applicationPubKey=F),q}const Ka=6048e5;function ua(b){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,P.Z)(function*(b){const C=yield qu(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:C.endpoint,auth:Jr(C.getKey("auth")),p256dh:Jr(C.getKey("p256dh"))},F=yield ln(b.firebaseDependencies);if(F){if(So(F.subscriptionOptions,x))return Date.now()>=F.createTime+Ka?Hu(b,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield Qi(b.firebaseDependencies,F.token)}catch(q){console.warn(q)}return Ee(b.firebaseDependencies,x)}return Ee(b.firebaseDependencies,x)})).apply(this,arguments)}function Qa(b){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,P.Z)(function*(b){const C=yield ln(b.firebaseDependencies);C&&(yield Qi(b.firebaseDependencies,C.token),yield Mc(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Hu(b,C){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,P.Z)(function*(b,C){try{const x=yield fr(b.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield bs(b.firebaseDependencies,F),x}catch(x){throw yield Qa(b),x}})).apply(this,arguments)}function Ee(b,C){return xt.apply(this,arguments)}function xt(){return(xt=(0,P.Z)(function*(b,C){const F={token:yield aa(b,C),createTime:Date.now(),subscriptionOptions:C};return yield bs(b,F),F.token})).apply(this,arguments)}function qu(b,C){return fn.apply(this,arguments)}function fn(){return(fn=(0,P.Z)(function*(b,C){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ha(C)})})).apply(this,arguments)}function So(b,C){return C.vapidKey===b.vapidKey&&C.endpoint===b.endpoint&&C.auth===b.auth&&C.p256dh===b.p256dh}function xo(b){const C={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function jr(b,C){if(!C.notification)return;b.notification={};const x=C.notification.title;x&&(b.notification.title=x);const F=C.notification.body;F&&(b.notification.body=F);const q=C.notification.image;q&&(b.notification.image=q)}(C,b),function zu(b,C){!C.data||(b.data=C.data)}(C,b),function Wu(b,C){if(!C.fcmOptions)return;b.fcmOptions={};const x=C.fcmOptions.link;x&&(b.fcmOptions.link=x);const F=C.fcmOptions.analytics_label;F&&(b.fcmOptions.analyticsLabel=F)}(C,b),C}function Oc(b){return"object"==typeof b&&!!b&&Zs in b}function Zu(b,C){const x=[];for(let F=0;F<b.length;F++)x.push(b.charAt(F)),F<C.length&&x.push(C.charAt(F));return x.join("")}function As(b){return Mn.create("missing-app-config-values",{valueName:b})}Zu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Zu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ir{constructor(C,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const q=function Xa(b){if(!b||!b.options)throw As("App Configuration Object");if(!b.name)throw As("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const F of C)if(!x[F])throw As(F);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:q,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Xr(b){return eu.apply(this,arguments)}function eu(){return(eu=(0,P.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(ju,{scope:Es}),b.swRegistration.update().catch(()=>{})}catch(C){throw Mn.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function Ss(b,C){return di.apply(this,arguments)}function di(){return(di=(0,P.Z)(function*(b,C){if(!C&&!b.swRegistration&&(yield Xr(b)),C||!b.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Mn.create("invalid-sw-registration");b.swRegistration=C}})).apply(this,arguments)}function Ku(b,C){return tu.apply(this,arguments)}function tu(){return(tu=(0,P.Z)(function*(b,C){C?b.vapidKey=C:b.vapidKey||(b.vapidKey=Vr)})).apply(this,arguments)}function Yu(){return(Yu=(0,P.Z)(function*(b,C){if(!navigator)throw Mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Mn.create("permission-blocked");return yield Ku(b,null==C?void 0:C.vapidKey),yield Ss(b,null==C?void 0:C.serviceWorkerRegistration),ua(b)})).apply(this,arguments)}function la(b,C,x){return ca.apply(this,arguments)}function ca(){return(ca=(0,P.Z)(function*(b,C,x){const F=Qu(C);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Zs],message_name:x[sa],message_time:x[Sc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Qu(b){switch(b){case Is.NOTIFICATION_CLICKED:return"notification_open";case Is.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Rc(){return(Rc=(0,P.Z)(function*(b,C){const x=C.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===Is.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(xo(x)):b.onMessageHandler.next(xo(x)));const F=x.data;Oc(F)&&"1"===F[kp]&&(yield la(b,x.messageType,F))})).apply(this,arguments)}const Xu="@firebase/messaging",Pc=b=>{const C=new ir(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Ju(b,C){return Rc.apply(this,arguments)}(C,x)),C},Js=b=>{const C=b.getProvider("messaging").getImmediate();return{getToken:F=>function nu(b,C){return Yu.apply(this,arguments)}(C,F)}};function kc(){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,P.Z)(function*(){try{yield(0,J.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Nc(){(0,se._registerComponent)(new fe.wA("messaging",Pc,"PUBLIC")),(0,se._registerComponent)(new fe.wA("messaging-internal",Js,"PRIVATE")),(0,se.registerVersion)(Xu,"0.9.12"),(0,se.registerVersion)(Xu,"0.9.12","esm2017")}();const tl="analytics",Qm="firebase_id",da="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ru="https://www.googletagmanager.com/gtag/js",Fn=new re.Yd("@firebase/analytics");function Fc(b){return Promise.all(b.map(C=>C.catch(x=>x)))}function Fp(b,C){const x=document.createElement("script");x.src=`${ru}?l=${b}&id=${C}`,x.async=!0,document.head.appendChild(x)}function Mo(b,C,x,F,q,X){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,P.Z)(function*(b,C,x,F,q,X){const Ae=F[q];try{if(Ae)yield C[Ae];else{const Qe=(yield Fc(x)).find(mt=>mt.measurementId===q);Qe&&(yield C[Qe.appId])}}catch(Se){Fn.error(Se)}b("config",q,X)})).apply(this,arguments)}function rl(b,C,x,F,q){return eo.apply(this,arguments)}function eo(){return(eo=(0,P.Z)(function*(b,C,x,F,q){try{let X=[];if(q&&q.send_to){let Ae=q.send_to;Array.isArray(Ae)||(Ae=[Ae]);const Se=yield Fc(x);for(const Qe of Ae){const mt=Se.find(vt=>vt.measurementId===Qe),Ct=mt&&C[mt.appId];if(!Ct){X=[];break}X.push(Ct)}}0===X.length&&(X=Object.values(C)),yield Promise.all(X),b("event",F,q||{})}catch(X){Fn.error(X)}})).apply(this,arguments)}function Lp(){const b=window.document.getElementsByTagName("script");for(const C of Object.values(b))if(C.src&&C.src.includes(ru))return C;return null}const Rn=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Hr=new class $r{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Oo(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Uc(b){return an.apply(this,arguments)}function an(){return(an=(0,P.Z)(function*(b){var C;const{appId:x,apiKey:F}=b,q={method:"GET",headers:Oo(F)},X=da.replace("{app-id}",x),Ae=yield fetch(X,q);if(200!==Ae.status&&304!==Ae.status){let Se="";try{const Qe=yield Ae.json();(null===(C=Qe.error)||void 0===C?void 0:C.message)&&(Se=Qe.error.message)}catch(Qe){}throw Rn.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:Se})}return Ae.json()})).apply(this,arguments)}function Ch(b){return hi.apply(this,arguments)}function hi(){return(hi=(0,P.Z)(function*(b,C=Hr,x){const{appId:F,apiKey:q,measurementId:X}=b.options;if(!F)throw Rn.create("no-app-id");if(!q){if(X)return{measurementId:X,appId:F};throw Rn.create("no-api-key")}const Ae=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Se=new il;return setTimeout((0,P.Z)(function*(){Se.abort()}),void 0!==x?x:6e4),iu({appId:F,apiKey:q,measurementId:X},Ae,Se,C)})).apply(this,arguments)}function iu(b,C,x){return ei.apply(this,arguments)}function ei(){return(ei=(0,P.Z)(function*(b,{throttleEndTimeMillis:C,backoffCount:x},F,q=Hr){const{appId:X,measurementId:Ae}=b;try{yield Rt(F,C)}catch(Se){if(Ae)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${Se.message}]`),{appId:X,measurementId:Ae};throw Se}try{const Se=yield Uc(b);return q.deleteThrottleMetadata(X),Se}catch(Se){if(!Bc(Se)){if(q.deleteThrottleMetadata(X),Ae)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ae} provided in the "measurementId" field in the local Firebase config. [${Se.message}]`),{appId:X,measurementId:Ae};throw Se}const Qe=503===Number(Se.customData.httpStatus)?(0,J.$s)(x,q.intervalMillis,30):(0,J.$s)(x,q.intervalMillis),mt={throttleEndTimeMillis:Date.now()+Qe,backoffCount:x+1};return q.setThrottleMetadata(X,mt),Fn.debug(`Calling attemptFetch again in ${Qe} millis`),iu(b,mt,F,q)}})).apply(this,arguments)}function Rt(b,C){return new Promise((x,F)=>{const q=Math.max(C-Date.now(),0),X=setTimeout(x,q);b.addEventListener(()=>{clearTimeout(X),F(Rn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function Bc(b){if(!(b instanceof J.ZR&&b.customData))return!1;const C=Number(b.customData.httpStatus);return 429===C||500===C||503===C||504===C}class il{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function jc(){return to.apply(this,arguments)}function to(){return(to=(0,P.Z)(function*(){if(!(0,J.hl)())return Fn.warn(Rn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(b){return Fn.warn(Rn.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function es(){return(es=(0,P.Z)(function*(b,C,x,F,q,X,Ae){var Se;const Qe=Ch(b);Qe.then(En=>{x[En.measurementId]=En.appId,b.options.measurementId&&En.measurementId!==b.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${En.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(En=>Fn.error(En)),C.push(Qe);const mt=jc().then(En=>{if(En)return F.getId()}),[Ct,vt]=yield Promise.all([Qe,mt]);Lp()||Fp(X,Ct.measurementId),q("js",new Date);const Vn=null!==(Se=null==Ae?void 0:Ae.config)&&void 0!==Se?Se:{};return Vn.origin="firebase",Vn.update=!0,null!=vt&&(Vn[Qm]=vt),q("config",Ct.measurementId,Vn),Ct.measurementId})).apply(this,arguments)}class Ro{constructor(C){this.app=C}_delete(){return delete ti[this.app.options.appId],Promise.resolve()}}let ti={},Os=[];const ha={};let Rs,Mi,xi="dataLayer",ol=!1;function fi(b,C,x){!function Po(){const b=[];if((0,J.ru)()&&b.push("This is a browser extension environment."),(0,J.zI)()||b.push("Cookies are not available."),b.length>0){const C=b.map((F,q)=>`(${q+1}) ${F}`).join(" "),x=Rn.create("invalid-analytics-context",{errorInfo:C});Fn.warn(x.message)}}();const F=b.options.appId;if(!F)throw Rn.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Rn.create("no-api-key");Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ti[F])throw Rn.create("already-exists",{id:F});if(!ol){!function Xi(b){let C=[];Array.isArray(window[b])?C=window[b]:window[b]=C}(xi);const{wrappedGtag:X,gtagCore:Ae}=function bh(b,C,x,F,q){let X=function(...Ae){window[F].push(arguments)};return window[q]&&"function"==typeof window[q]&&(X=window[q]),window[q]=function Vc(b,C,x,F){function X(){return(X=(0,P.Z)(function*(Ae,Se,Qe){try{"event"===Ae?yield rl(b,C,x,Se,Qe):"config"===Ae?yield Mo(b,C,x,F,Se,Qe):b("set",Se)}catch(mt){Fn.error(mt)}})).apply(this,arguments)}return function q(Ae,Se,Qe){return X.apply(this,arguments)}}(X,b,C,x),{gtagCore:X,wrappedGtag:window[q]}}(ti,Os,ha,xi,"gtag");Mi=X,Rs=Ae,ol=!0}return ti[F]=function Ln(b,C,x,F,q,X,Ae){return es.apply(this,arguments)}(b,Os,ha,C,Rs,xi,x),new Ro(b)}function fa(){return(fa=(0,P.Z)(function*(b,C,x,F,q){if(q&&q.global)b("event",x,F);else{const X=yield C;b("event",x,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function wn(){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,P.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(b){return!1}})).apply(this,arguments)}const Ns="@firebase/analytics";!function jp(){(0,se._registerComponent)(new fe.wA(tl,(C,{options:x})=>fi(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,se._registerComponent)(new fe.wA("analytics-internal",function b(C){try{const x=C.getProvider(tl).getImmediate();return{logEvent:(F,q,X)=>function Bp(b,C,x,F){b=(0,J.m9)(b),function No(b,C,x,F,q){return fa.apply(this,arguments)}(Mi,ti[b.app.options.appId],C,x,F).catch(q=>Fn.error(q))}(x,F,q,X)}}catch(x){throw Rn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,se.registerVersion)(Ns,"0.7.8"),(0,se.registerVersion)(Ns,"0.7.8","esm2017")}();var ks=N(4408),su=N(7565);const al=new class gn extends su.v{}(class ns extends ks.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,x,F):C.flush(this)}});var $p=N(4986),ul=N(8505),mr=N(9468),ni=N(5363);const ll=new g.GfV("7.3.0"),rs="__angularfire_symbol__analyticsIsSupportedValue",mi="__angularfire_symbol__analyticsIsSupported",Ri="__angularfire_symbol__remoteConfigIsSupportedValue",pa="__angularfire_symbol__remoteConfigIsSupported",cl="__angularfire_symbol__messagingIsSupportedValue",dl="__angularfire_symbol__messagingIsSupported";function Fs(b,C,x){if(C){if(1===C.length)return C[0];const X=C.filter(Ae=>Ae.app===x);if(1===X.length)return X[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[mi]||(globalThis[mi]=wn().then(b=>globalThis[rs]=b).catch(()=>globalThis[rs]=!1)),globalThis[dl]||(globalThis[dl]=kc().then(b=>globalThis[cl]=b).catch(()=>globalThis[cl]=!1)),globalThis[pa]||(globalThis[pa]=Ws().then(b=>globalThis[Ri]=b).catch(()=>globalThis[Ri]=!1));const qc=(b,C)=>{const x=C?[C]:(0,W.C6)(),F=[];return x.forEach(q=>{q.container.getProvider(b).instances.forEach(Ae=>{F.includes(Ae)||F.push(Ae)})}),F};function no(){}class ou{constructor(C,x=al){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,F){const q=this.zone;return this.delegate.schedule(function(Ae){q.runGuarded(()=>{C.apply(this,[Ae])})},x,F)}}class Pi{constructor(C){this.zone=C,this.task=null}call(C,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",no,{},no,no)),x.pipe((0,ul.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let au=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new ou(Zone.current)),this.insideAngular=x.run(()=>new ou(Zone.current,$p.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(g.LFG(g.R0b))},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Ni(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function pl(b){return Ni(),function ro(b){return function(x){return(x=x.lift(new Pi(b.ngZone))).pipe((0,mr.R)(b.outsideAngular),(0,ni.Q)(b.insideAngular))}}(Ni())(b)}},2090:(at,De,N)=>{N.d(De,{$s:()=>Gs,BH:()=>Te,G6:()=>te,L:()=>oe,LL:()=>Ne,Lj:()=>Nt,Mn:()=>$e,Sg:()=>Me,UG:()=>ve,US:()=>re,X3:()=>ct,ZB:()=>K,ZR:()=>pe,b$:()=>be,d:()=>me,eu:()=>Q,hl:()=>ze,jU:()=>et,m9:()=>lt,ne:()=>ut,pd:()=>Gi,r3:()=>$t,ru:()=>Ze,tV:()=>B,uI:()=>he,vZ:()=>ps,w1:()=>_e,xO:()=>Ti,xb:()=>Jn,z$:()=>ke,zI:()=>ie,zd:()=>Cr});var g=N(5861);const J=function(U){const L=[];let $=0;for(let ue=0;ue<U.length;ue++){let Z=U.charCodeAt(ue);Z<128?L[$++]=Z:Z<2048?(L[$++]=Z>>6|192,L[$++]=63&Z|128):55296==(64512&Z)&&ue+1<U.length&&56320==(64512&U.charCodeAt(ue+1))?(Z=65536+((1023&Z)<<10)+(1023&U.charCodeAt(++ue)),L[$++]=Z>>18|240,L[$++]=Z>>12&63|128,L[$++]=Z>>6&63|128,L[$++]=63&Z|128):(L[$++]=Z>>12|224,L[$++]=Z>>6&63|128,L[$++]=63&Z|128)}return L},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ue=[];for(let Z=0;Z<U.length;Z+=3){const Le=U[Z],ht=Z+1<U.length,Ht=ht?U[Z+1]:0,dr=Z+2<U.length,Ut=dr?U[Z+2]:0;let sn=(15&Ht)<<2|Ut>>6,Kn=63&Ut;dr||(Kn=64,ht||(sn=64)),ue.push($[Le>>2],$[(3&Le)<<4|Ht>>4],$[sn],$[Kn])}return ue.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(J(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let $=0,ue=0;for(;$<U.length;){const Z=U[$++];if(Z<128)L[ue++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const Le=U[$++];L[ue++]=String.fromCharCode((31&Z)<<6|63&Le)}else if(Z>239&&Z<365){const dr=((7&Z)<<18|(63&U[$++])<<12|(63&U[$++])<<6|63&U[$++])-65536;L[ue++]=String.fromCharCode(55296+(dr>>10)),L[ue++]=String.fromCharCode(56320+(1023&dr))}else{const Le=U[$++],ht=U[$++];L[ue++]=String.fromCharCode((15&Z)<<12|(63&Le)<<6|63&ht)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const $=L?this.charToByteMapWebSafe_:this.charToByteMap_,ue=[];for(let Z=0;Z<U.length;){const Le=$[U.charAt(Z++)],Ht=Z<U.length?$[U.charAt(Z)]:0;++Z;const Ut=Z<U.length?$[U.charAt(Z)]:64;++Z;const bt=Z<U.length?$[U.charAt(Z)]:64;if(++Z,null==Le||null==Ht||null==Ut||null==bt)throw Error();ue.push(Le<<2|Ht>>4),64!==Ut&&(ue.push(Ht<<4&240|Ut>>2),64!==bt&&ue.push(Ut<<6&192|bt))}return ue},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},oe=function(U){return function(U){const L=J(U);return re.encodeByteArray(L,!0)}(U).replace(/\./g,"")},B=function(U){try{return re.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function K(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const $ in L)!L.hasOwnProperty($)||!qe($)||(U[$]=K(U[$],L[$]));return U}function qe(U){return"__proto__"!==U}class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,$)=>{this.resolve=L,this.reject=$})}wrapCallback(L){return($,ue)=>{$?this.reject($):this.resolve(ue),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L($):L($,ue))}}}function Me(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ue=L||"demo-project",Z=U.iat||0,Le=U.sub||U.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${ue}`,aud:ue,iat:Z,exp:Z+3600,auth_time:Z,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},U);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(ht)),""].join(".")}function ke(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function et(){return"object"==typeof self&&self.self===self}function Ze(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function be(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function me(){return ke().indexOf("Electron/")>=0}function _e(){const U=ke();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function $e(){return ke().indexOf("MSAppHost/")>=0}function te(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ze(){return"object"==typeof indexedDB}function Q(){return new Promise((U,L)=>{try{let $=!0;const ue="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(ue);Z.onsuccess=()=>{Z.result.close(),$||self.indexedDB.deleteDatabase(ue),U(!0)},Z.onupgradeneeded=()=>{$=!1},Z.onerror=()=>{var Le;L((null===(Le=Z.error)||void 0===Le?void 0:Le.message)||"")}}catch($){L($)}})}function ie(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class pe extends Error{constructor(L,$,ue){super($),this.code=L,this.customData=ue,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ne.prototype.create)}}class Ne{constructor(L,$,ue){this.service=L,this.serviceName=$,this.errors=ue}create(L,...$){const ue=$[0]||{},Z=`${this.service}/${L}`,Le=this.errors[L],ht=Le?function _t(U,L){return U.replace(jt,($,ue)=>{const Z=L[ue];return null!=Z?String(Z):`<${ue}?>`})}(Le,ue):"Error";return new pe(Z,`${this.serviceName}: ${ht} (${Z}).`,ue)}}const jt=/\{\$([^}]+)}/g;function $t(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function Jn(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function ps(U,L){if(U===L)return!0;const $=Object.keys(U),ue=Object.keys(L);for(const Z of $){if(!ue.includes(Z))return!1;const Le=U[Z],ht=L[Z];if(br(Le)&&br(ht)){if(!ps(Le,ht))return!1}else if(Le!==ht)return!1}for(const Z of ue)if(!$.includes(Z))return!1;return!0}function br(U){return null!==U&&"object"==typeof U}function Ti(U){const L=[];for(const[$,ue]of Object.entries(U))Array.isArray(ue)?ue.forEach(Z=>{L.push(encodeURIComponent($)+"="+encodeURIComponent(Z))}):L.push(encodeURIComponent($)+"="+encodeURIComponent(ue));return L.length?"&"+L.join("&"):""}function Cr(U){const L={};return U.replace(/^\?/,"").split("&").forEach(ue=>{if(ue){const[Z,Le]=ue.split("=");L[decodeURIComponent(Z)]=decodeURIComponent(Le)}}),L}function Gi(U){const L=U.indexOf("?");if(!L)return"";const $=U.indexOf("#",L);return U.substring(L,$>0?$:void 0)}function ut(U,L){const $=new kr(U,L);return $.subscribe.bind($)}class kr{constructor(L,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{L(this)}).catch(ue=>{this.error(ue)})}next(L){this.forEachObserver($=>{$.next(L)})}error(L){this.forEachObserver($=>{$.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,$,ue){let Z;if(void 0===L&&void 0===$&&void 0===ue)throw new Error("Missing Observer.");Z=function Un(U,L){if("object"!=typeof U||null===U)return!1;for(const $ of L)if($ in U&&"function"==typeof U[$])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:$,complete:ue},void 0===Z.next&&(Z.next=Kr),void 0===Z.error&&(Z.error=Kr),void 0===Z.complete&&(Z.complete=Kr);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch(ht){}}),this.observers.push(Z),Le}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,L)}sendOne(L,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{$(this.observers[L])}catch(ue){"undefined"!=typeof console&&console.error&&console.error(ue)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kr(){}function Gs(U,L=1e3,$=2){const ue=L*Math.pow($,U),Z=Math.round(.5*ue*(Math.random()-.5)*2);return Math.min(144e5,ue+Z)}function lt(U){return U&&U._delegate?U._delegate:U}function cr(U,L){return new Promise(($,ue)=>{U.onsuccess=Z=>{$(Z.target.result)},U.onerror=Z=>{var Le;ue(`${L}: ${null===(Le=Z.target.error)||void 0===Le?void 0:Le.message}`)}})}class Ot{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,$="readonly"){return new Ke(this._db.transaction.call(this._db,L,$))}createObjectStore(L,$){return new Ce(this._db.createObjectStore(L,$))}close(){this._db.close()}}class Ke{constructor(L){this._transaction=L,this.complete=new Promise(($,ue)=>{this._transaction.oncomplete=function(){$()},this._transaction.onerror=()=>{ue(this._transaction.error)},this._transaction.onabort=()=>{ue(this._transaction.error)}})}objectStore(L){return new Ce(this._transaction.objectStore(L))}}class Ce{constructor(L){this._store=L}index(L){return new Ye(this._store.index(L))}createIndex(L,$,ue){return new Ye(this._store.createIndex(L,$,ue))}get(L){return cr(this._store.get(L),"Error reading from IndexedDB")}put(L,$){return cr(this._store.put(L,$),"Error writing to IndexedDB")}delete(L){return cr(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return cr(this._store.clear(),"Error clearing IndexedDB object store")}}class Ye{constructor(L){this._index=L}get(L){return cr(this._index.get(L),"Error reading from IndexedDB")}}function ct(U,L,$){return new Promise((ue,Z)=>{try{const Le=indexedDB.open(U,L);Le.onsuccess=ht=>{ue(new Ot(ht.target.result))},Le.onerror=ht=>{var Ht;Z(`Error opening indexedDB: ${null===(Ht=ht.target.error)||void 0===Ht?void 0:Ht.message}`)},Le.onupgradeneeded=ht=>{$(new Ot(Le.result),ht.oldVersion,ht.newVersion,new Ke(Le.transaction))}}catch(Le){Z(`Error opening indexedDB: ${Le.message}`)}})}function Nt(U){return St.apply(this,arguments)}function St(){return(St=(0,g.Z)(function*(U){return new Promise((L,$)=>{try{const ue=indexedDB.deleteDatabase(U);ue.onsuccess=()=>{L()},ue.onerror=Z=>{var Le;$(`Error deleting indexedDB database "${U}": ${null===(Le=Z.target.error)||void 0===Le?void 0:Le.message}`)}}catch(ue){$(`Error deleting indexedDB database "${U}": ${ue.message}`)}})})).apply(this,arguments)}},3094:(at,De,N)=>{var g=N(5e3);let W=null;function P(){return W}const re=new g.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function oe(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const B=new g.OlP("Location Initialized");let j=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){K()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){K()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function qe(){return new j((0,g.LFG)(re))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Me(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ke(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ve(n){const e=(0,g.LFG)(re).location;return new Ze((0,g.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const et=new g.OlP("appBaseHref");let Ze=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ke(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+ke(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+ke(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce),g.LFG(et,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),be=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+ke(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+ke(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce),g.LFG(et,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),me=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Me(je(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ke(r))}normalize(t){return n.stripTrailingSlash(function $e(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ke(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ke(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=ke,n.joinWithSlash=Te,n.stripTrailingSlash=Me,n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function _e(){return new me((0,g.LFG)(he),(0,g.LFG)(ce))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}class _s{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let nr=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new _s(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),Wi(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Wi(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Wi(n,e){n.context.$implicit=e.item}let Fr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new tn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Va("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Va("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class tn{constructor(){this.$implicit=null,this.ngIf=null}}function Va(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let To=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function rr(n){return"server"===n}let za=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Wa((0,g.LFG)(re),window)}),n})();class Wa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function oa(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Yi(this.window.history)||Yi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Yi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class bs extends class Ao extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function J(n){W||(W=n)}(new bs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Mc(){return nn=nn||document.querySelector("base"),nn?nn.getAttribute("href"):null}();return null==t?null:function Ys(n){Ks=Ks||document.createElement("a"),Ks.setAttribute("href",n);const e=Ks.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){nn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function bo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Ks,nn=null;const hr=new g.OlP("TRANSITION_ID"),aa=[{provide:g.ip1,useFactory:function Mn(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=P(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[hr,re,g.zs3],multi:!0}];class ci{static init(){(0,g.VLi)(new ci)}addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(E){d=d||E,u--,0==u&&r(d)};o.forEach(function(E){E.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let fr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Cs=new g.OlP("EventManagerPlugins");let Qi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Cs),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Za{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=P().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Br=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ds=(()=>{class n extends Br{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ts),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ts))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Ts(n){P().remove(n)}const dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ka=/%COMP%/g;function Ee(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Ee(n,o,t):(o=o.replace(Ka,n),t.push(o))}return t}function xt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let fn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new So(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new zu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new Wu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ee(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Qi),g.LFG(Ds),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class So{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(dt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=dt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=dt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xt(r)):this.eventManager.addEventListener(e,t,xt(r))}}class zu extends So{constructor(e,t,r,o){super(e),this.component=r;const u=Ee(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Hu(n){return"_ngcontent-%COMP%".replace(Ka,n)}(o+"-"+r.id),this.hostAttr=function Gu(n){return"_nghost-%COMP%".replace(Ka,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Wu extends So{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ee(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Oc=(()=>{class n extends Za{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Zu=["alt","control","meta","shift"],As={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ir={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Xr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let eu=(()=>{class n extends Za{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(Zu.forEach(E=>{const D=r.indexOf(E);D>-1&&(r.splice(D,1),d+=E+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function Ss(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ir.hasOwnProperty(e)&&(e=ir[e]))}return As[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Zu.forEach(u=>{u!=o&&Xr[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Yu=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function di(){bs.makeCurrent(),ci.init()},multi:!0},{provide:re,useFactory:function tu(){return(0,g.RDi)(document),document},deps:[]}]),la=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Ku(){return new g.qLn},deps:[]},{provide:Cs,useClass:Oc,multi:!0,deps:[re,g.R0b,g.Lbi]},{provide:Cs,useClass:eu,multi:!0,deps:[re]},{provide:fn,useClass:fn,deps:[Qi,Ds,g.AFp]},{provide:g.FYo,useExisting:fn},{provide:Br,useExisting:Ds},{provide:Ds,useClass:Ds,deps:[re]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:Qi,useClass:Qi,deps:[Cs,g.R0b]},{provide:class ln{},useClass:fr,deps:[]}];let ca=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:hr,useExisting:g.AFp},aa]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:la,imports:[To,g.hGG]}),n})();"undefined"!=typeof window&&window;var On=N(8996),Rn=N(7669);function ft(...n){const e=(0,Rn.yG)(n);return(0,On.D)(n,e)}var sr=N(7579);class $r extends sr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Hr=N(8306);const{isArray:Oo}=Array,{getPrototypeOf:Uc,prototype:an,keys:Ch}=Object;function hi(n){if(1===n.length){const e=n[0];if(Oo(e))return{args:e,keys:null};if(function iu(n){return n&&"object"==typeof n&&Uc(n)===an}(e)){const t=Ch(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ei=N(4671),Rt=N(4004);const{isArray:Bc}=Array;function jc(n){return(0,Rt.U)(e=>function il(n,e){return Bc(e)?n(...e):n(e)}(n,e))}function to(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Ln=N(5403),es=N(9672);function Os(n,e,t){n?(0,es.f)(t,n,e):e()}var ha=N(576);function xi(n,e){const t=(0,ha.m)(n)?n:()=>n,r=o=>o.error(t());return new Hr.y(e?o=>e.schedule(r,0,o):r)}const Rs=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Mi=N(8189);function $c(...n){return function ol(){return(0,Mi.J)(1)}()((0,On.D)(n,(0,Rn.yG)(n)))}var Po=N(8421);function fi(n){return new Hr.y(e=>{(0,Po.Xf)(n()).subscribe(e)})}var No=N(515),fa=N(727),Dr=N(4482);function pi(){return(0,Dr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Ln.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Hc extends Hr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Dr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new fa.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Ln.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=fa.w0.EMPTY)}return e}refCount(){return pi()(this)}}function Pn(n,e){return(0,Dr.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,Ln.x)(r,E=>{null==o||o.unsubscribe();let D=0;const M=u++;(0,Po.Xf)(n(E,M)).subscribe(o=(0,Ln.x)(r,R=>r.next(e?e(E,R,M,D++):R),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var ko=N(5698);function gi(...n){const e=(0,Rn.yG)(n);return(0,Dr.e)((t,r)=>{(e?$c(n,t,e):$c(n,t)).subscribe(r)})}function Fo(n,e,t,r,o){return(u,d)=>{let m=t,E=e,D=0;u.subscribe((0,Ln.x)(d,M=>{const R=D++;E=m?n(E,M,R):(m=!0,M),r&&d.next(E)},o&&(()=>{m&&d.next(E),d.complete()})))}}function gr(n,e){return(0,Dr.e)(Fo(n,e,arguments.length>=2,!0))}function ts(n,e){return(0,Dr.e)((t,r)=>{let o=0;t.subscribe((0,Ln.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function Oi(n){return(0,Dr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Ln.x)(t,void 0,void 0,d=>{u=(0,Po.Xf)(n(d,Oi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var wn=N(5577);function Ps(n,e){return(0,ha.m)(e)?(0,wn.z)(n,e,1):(0,wn.z)(n,1)}function Gc(n){return n<=0?()=>No.E:(0,Dr.e)((e,t)=>{let r=[];e.subscribe((0,Ln.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function pn(n=Vp){return(0,Dr.e)((e,t)=>{let r=!1;e.subscribe((0,Ln.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Vp(){return new Rs}function Up(n){return(0,Dr.e)((e,t)=>{let r=!1;e.subscribe((0,Ln.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Ns(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ts((o,u)=>n(o,u,r)):ei.y,(0,ko.q)(1),t?Up(e):pn(()=>new Rs))}var Gr=N(8505);class ks{constructor(e,t){this.id=e,this.url=t}}class ns extends ks{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class su extends ks{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gn extends ks{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class al extends ks{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Lo extends ks{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $p extends ks{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ul extends ks{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mr extends ks{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ni extends ks{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ll{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class rs{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class mi{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ri{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pa{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const At="primary";class hl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function jn(n){return new hl(n)}const fl="ngNavigationCancelingError";function Fs(n){const e=Error("NavigationCancelingError: "+n);return e[fl]=!0,e}function no(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Pi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!au(n[o],e[o]))return!1;return!0}function au(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Ni(n){return Array.prototype.concat.apply([],n)}function zc(n){return n.length>0?n[n.length-1]:null}function $n(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ri(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,On.D)(Promise.resolve(n)):ft(n)}const ro={exact:function C(n,e,t){if(!Ct(n.segments,e.segments)||!X(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!C(n.children[r],e.children[r],t))return!1;return!0},subset:F},Vo={exact:function b(n,e){return Pi(n,e)},subset:function x(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>au(n[t],e[t]))},ignored:()=>!0};function uu(n,e,t){return ro[t.paths](n.root,e.root,t.matrixParams)&&Vo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function F(n,e,t){return q(n,e,e.segments,t)}function q(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Ct(o,t)||e.hasChildren()||!X(o,t,r))}if(n.segments.length===t.length){if(!Ct(n.segments,t)||!X(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!F(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Ct(n.segments,o)&&X(n.segments,o,r)&&n.children[At])&&q(n.children[At],e,u,r)}}function X(n,e,t){return e.every((r,o)=>Vo[t](n[o].parameters,r.parameters))}class Ae{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jn(this.queryParams)),this._queryParamMap}toString(){return Uo.serialize(this)}}class Se{constructor(e,t){this.segments=e,this.children=t,this.parent=null,$n(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return io(this)}}class Qe{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=jn(this.parameters)),this._parameterMap}toString(){return ga(this)}}function Ct(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Vn{}class En{parse(e){const t=new Zc(e);return new Ae(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Tr(e.root,!0)}`,r=function Jm(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${yi(t)}=${yi(o)}`).join("&"):`${yi(t)}=${yi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function so(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Uo=new En;function io(n){return n.segments.map(e=>ga(e)).join("/")}function Tr(n,e){if(!n.hasChildren())return io(n);if(e){const t=n.children[At]?Tr(n.children[At],!1):"",r=[];return $n(n.children,(o,u)=>{u!==At&&r.push(`${u}:${Tr(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function vt(n,e){let t=[];return $n(n.children,(r,o)=>{o===At&&(t=t.concat(e(r,o)))}),$n(n.children,(r,o)=>{o!==At&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===At?[Tr(n.children[At],!1)]:[`${o}:${Tr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[At]?`${io(n)}/${t[0]}`:`${io(n)}/(${t.join("//")})`}}function ii(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yi(n){return ii(n).replace(/%3B/gi,";")}function Wc(n){return ii(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gl(n){return decodeURIComponent(n)}function ml(n){return gl(n.replace(/\+/g,"%20"))}function ga(n){return`${Wc(n.path)}${function Hp(n){return Object.keys(n).map(e=>`;${Wc(e)}=${Wc(n[e])}`).join("")}(n.parameters)}`}const Xm=/^[^\/()?;=#]+/;function is(n){const e=n.match(Xm);return e?e[0]:""}const yl=/^[^=?&#]+/,ty=/^[^&#]+/;class Zc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[At]=new Se(e,t)),r}parseSegment(){const e=is(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Qe(gl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=is(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=is(this.remaining);o&&(r=o,this.capture(r))}e[gl(t)]=gl(r)}parseQueryParam(e){const t=function ey(n){const e=n.match(yl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Gp(n){const e=n.match(ty);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=ml(t),u=ml(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=is(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=At);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[At]:new Se([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ny{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Dh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Dh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Th(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Th(e,this._root).map(t=>t.value)}}function Dh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Dh(n,t);if(r)return r}return null}function Th(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Th(n,t);if(r.length)return r.unshift(e),r}return[]}class oo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ao(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Kc extends ny{constructor(e,t){super(e),this.snapshot=t,Qc(this,e)}toString(){return this.snapshot.toString()}}function ma(n,e){const t=function ry(n,e){const d=new lu([],{},{},"",{},At,e,null,n.root,-1,{});return new Ah("",new oo(d,[]))}(n,e),r=new $r([new Qe("",{})]),o=new $r({}),u=new $r({}),d=new $r({}),m=new $r(""),E=new uo(r,o,d,m,u,At,e,t.root);return E.snapshot=t.root,new Kc(new oo(E,[]),t)}class uo{constructor(e,t,r,o,u,d,m,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Rt.U)(e=>jn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Rt.U)(e=>jn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function iy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Yc(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class lu{constructor(e,t,r,o,u,d,m,E,D,M,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=E,this._urlSegment=D,this._lastPathIndex=M,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ah extends ny{constructor(e,t){super(t),this.url=e,Qc(this,t)}toString(){return Jc(this._root)}}function Qc(n,e){e.value._routerState=n,e.children.forEach(t=>Qc(n,t))}function Jc(n){const e=n.children.length>0?` { ${n.children.map(Jc).join(", ")} } `:"";return`${n.value}${e}`}function Xc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Pi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Pi(e.params,t.params)||n.params.next(t.params),function ou(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Pi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Pi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Sh(n,e){const t=Pi(n.params,e.params)&&function mt(n,e){return Ct(n,e)&&n.every((t,r)=>Pi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Sh(n.parent,e.parent))}function _l(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function xh(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return _l(n,r,o);return _l(n,r)})}(n,e,t);return new oo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>_l(n,m)),d}}const r=function oy(n){return new uo(new $r(n.url),new $r(n.params),new $r(n.queryParams),new $r(n.fragment),new $r(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>_l(n,u));return new oo(r,o)}}function Bo(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function cu(n){return"object"==typeof n&&null!=n&&n.outlets}function qp(n,e,t,r,o){let u={};if(r&&$n(r,(m,E)=>{u[E]=Array.isArray(m)?m.map(D=>`${D}`):`${m}`}),n===e)return new Ae(t,u,o);const d=Mh(n,e,t);return new Ae(d,u,o)}function Mh(n,e,t){const r={};return $n(n.children,(o,u)=>{r[u]=o===e?t:Mh(o,e,t)}),new Se(n.segments,r)}class ay{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Bo(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(cu);if(o&&o!==zc(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Oh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function dy(n,e,t){if(n||(n=new Se([],{})),0===n.segments.length&&n.hasChildren())return Vs(n,e,t);const r=function A0(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(cu(m))break;const E=`${m}`,D=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&D&&"object"==typeof D&&void 0===D.outlets){if(!_i(E,D,d))return u;r+=2}else{if(!_i(E,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Se(n.segments.slice(0,r.pathIndex),{});return u.children[At]=new Se(n.segments.slice(r.pathIndex),n.children),Vs(u,0,o)}return r.match&&0===o.length?new Se(n.segments,{}):r.match&&!n.hasChildren()?Rh(n,e,t):r.match?Vs(n,0,o):Rh(n,e,t)}function Vs(n,e,t){if(0===t.length)return new Se(n.segments,{});{const r=function cy(n){return cu(n[0])?n[0].outlets:{[At]:n}}(t),o={};return $n(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=dy(n.children[d],e,u))}),$n(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Se(n.segments,o)}}function Rh(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(cu(u)){const E=du(u.outlets);return new Se(r,E)}if(0===o&&Bo(t[0])){r.push(new Qe(n.segments[e].path,Ph(t[0]))),o++;continue}const d=cu(u)?u.outlets[At]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&Bo(m)?(r.push(new Qe(d,Ph(m))),o+=2):(r.push(new Qe(d,{})),o++)}return new Se(r,{})}function du(n){const e={};return $n(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Rh(new Se([],{}),0,t))}),e}function Ph(n){const e={};return $n(n,(t,r)=>e[r]=`${t}`),e}function _i(n,e,t){return n==t.path&&Pi(e,t.parameters)}class Wp{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Xc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=ao(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),$n(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ao(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ao(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=ao(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new cl(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Ri(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Xc(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),Xc(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function ed(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),E=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=E,d.outlet&&d.outlet.activateWith(o,E),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class td{constructor(e,t){this.routes=e,this.module=t}}function ya(n){return"function"==typeof n}function hu(n){return n instanceof Ae}const wl=Symbol("INITIAL_VALUE");function jo(){return Pn(n=>function Ro(...n){const e=(0,Rn.yG)(n),t=(0,Rn.jO)(n),{args:r,keys:o}=hi(n);if(0===r.length)return(0,On.D)([],e);const u=new Hr.y(function ti(n,e,t=ei.y){return r=>{Os(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let E=0;E<o;E++)Os(e,()=>{const D=(0,On.D)(n[E],e);let M=!1;D.subscribe((0,Ln.x)(r,R=>{u[E]=R,M||(M=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>to(o,d):ei.y));return t?u.pipe(jc(t)):u}(n.map(e=>e.pipe((0,ko.q)(1),gi(wl)))).pipe(gr((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==wl?o:(u===wl&&(r=!0),r||!1!==u&&d!==t.length-1&&!hu(u)?o:u),e)},wl),ts(e=>e!==wl),(0,Rt.U)(e=>hu(e)?e:!0===e),(0,ko.q)(1)))}class hy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new El,this.attachRef=null}}class El{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new hy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Il=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=u||At,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,E=new Lh(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(El),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Lh{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===uo?this.route:e===El?this.childContexts:this.parent.get(e,t)}}let Vh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[Il],encapsulation:2}),n})();function bl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];nd(r,Uh(e,r))}}function nd(n,e){n.children&&bl(n.children,e)}function Uh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Bh(n){const e=n.children&&n.children.map(Bh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==At&&(t.component=Vh),t}function Qt(n){return n.outlet||At}function jh(n,e){const t=n.filter(r=>Qt(r)===e);return t.push(...n.filter(r=>Qt(r)!==e)),t}const Kp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Kp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||no)(t,n,e);if(!u)return Object.assign({},Kp);const d={};$n(u.posParams,(E,D)=>{d[D]=E.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Cl(n,e,t,r,o="corrected"){if(t.length>0&&function py(n,e,t){return t.some(r=>id(n,e,r)&&Qt(r)!==At)}(n,t,r)){const d=new Se(e,function rd(n,e,t,r){const o={};o[At]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Qt(u)!==At){const d=new Se([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Qt(u)]=d}return o}(n,e,r,new Se(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Yp(n,e,t){return t.some(r=>id(n,e,r))}(n,t,r)){const d=new Se(n.segments,function fy(n,e,t,r,o,u){const d={};for(const m of r)if(id(n,t,m)&&!o[Qt(m)]){const E=new Se([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Qt(m)]=E}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Se(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function id(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function gy(n,e,t,r){return!!(Qt(n)===r||r!==At&&id(e,t,n))&&("**"===n.path||fu(e,n,t).matched)}function my(n,e,t){return 0===e.length&&!n.children[t]}class $o{constructor(e){this.segmentGroup=e||null}}class yr{constructor(e){this.urlTree=e}}function lo(n){return xi(new $o(n))}function Dl(n){return xi(new yr(n))}class Hh{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=Cl(this.urlTree.root,[],[],this.config).segmentGroup,t=new Se(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,At).pipe((0,Rt.U)(u=>this.createUrlTree(va(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Oi(u=>{if(u instanceof yr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof $o?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,At).pipe((0,Rt.U)(o=>this.createUrlTree(va(o),e.queryParams,e.fragment))).pipe(Oi(o=>{throw o instanceof $o?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Se([],{[At]:e}):e;return new Ae(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Rt.U)(u=>new Se([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,On.D)(o).pipe(Ps(u=>{const d=r.children[u],m=jh(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,Rt.U)(E=>({segment:E,outlet:u})))}),gr((u,d)=>(u[d.outlet]=d.segment,u),{}),function Bp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ts((o,u)=>n(o,u,r)):ei.y,Gc(1),t?Up(e):pn(()=>new Rs))}())}expandSegment(e,t,r,o,u,d){return(0,On.D)(r).pipe(Ps(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(Oi(D=>{if(D instanceof $o)return ft(null);throw D}))),Ns(m=>!!m),Oi((m,E)=>{if(m instanceof Rs||"EmptyError"===m.name)return my(t,o,u)?ft(new Se([],{})):lo(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return gy(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):lo(t):lo(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Dl(u):this.lineralizeSegments(r,u).pipe((0,wn.z)(d=>{const m=new Se(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:E,remainingSegments:D,positionalParamSegments:M}=fu(t,o,u);if(!m)return lo(t);const R=this.applyRedirectCommands(E,o.redirectTo,M);return o.redirectTo.startsWith("/")?Dl(R):this.lineralizeSegments(o,R).pipe((0,wn.z)(H=>this.expandSegment(e,t,r,H.concat(D),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ft(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Rt.U)(R=>(r._loadedConfig=R,new Se(o,{})))):ft(new Se(o,{}));const{matched:d,consumedSegments:m,remainingSegments:E}=fu(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,wn.z)(M=>{const R=M.module,H=M.routes,{segmentGroup:Y,slicedSegments:le}=Cl(t,m,E,H),Fe=new Se(Y.segments,Y.children);if(0===le.length&&Fe.hasChildren())return this.expandChildren(R,H,Fe).pipe((0,Rt.U)(Yt=>new Se(m,Yt)));if(0===H.length&&0===le.length)return ft(new Se(m,{}));const st=Qt(r)===u;return this.expandSegment(R,Fe,H,le,st?At:u,!0).pipe((0,Rt.U)(Wt=>new Se(m.concat(Wt.segments),Wt.children)))})):lo(t)}getChildConfig(e,t,r){return t.children?ft(new td(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ft(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,wn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Rt.U)(u=>(t._loadedConfig=u,u))):function Ar(n){return xi(Fs(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ft(new td([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?ft(o.map(d=>{const m=e.get(d);let E;if(function Nh(n){return n&&ya(n.canLoad)}(m))E=m.canLoad(t,r);else{if(!ya(m))throw new Error("Invalid CanLoad guard");E=m(t,r)}return ri(E)})).pipe(jo(),(0,Gr.b)(d=>{if(!hu(d))return;const m=Fs(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,Rt.U)(d=>!0===d)):ft(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ft(r);if(o.numberOfChildren>1||!o.children[At])return xi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[At]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Ae(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return $n(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return $n(t.children,(m,E)=>{d[E]=this.createSegmentGroup(e,m,r,o)}),new Se(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function va(n){const e={};for(const r of Object.keys(n.children)){const u=va(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function vi(n){if(1===n.numberOfChildren&&n.children[At]){const e=n.children[At];return new Se(n.segments.concat(e.segments),e.children)}return n}(new Se(n.segments,e))}class Qp{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wa{constructor(e,t){this.component=e,this.route=t}}function qh(n,e,t){const r=n._root;return si(r,e?e._root:null,t,[r.value])}function Tl(n,e,t){const r=function yy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function si(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=ao(e);return n.children.forEach(d=>{(function Xp(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const E=function _y(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ct(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ct(n.url,e.url)||!Pi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sh(n,e)||!Pi(n.queryParams,e.queryParams);default:return!Sh(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new Qp(r)):(u.data=d.data,u._resolvedData=d._resolvedData),si(n,e,u.component?m?m.children:null:t,r,o),E&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new wa(m.outlet.component,d))}else d&&Ea(e,m,o),o.canActivateChecks.push(new Qp(r)),si(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),$n(u,(d,m)=>Ea(d,t.getContext(m),o)),o}function Ea(n,e,t){const r=ao(n),o=n.value;$n(r,(u,d)=>{Ea(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new wa(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class Zh{}function Kh(n){return new Hr.y(e=>e.error(n))}class Yh{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Cl(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,At);if(null===t)return null;const r=new lu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},At,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new oo(r,t),u=new Ah(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=iy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=jh(e,u),E=this.processSegmentGroup(m,d,u);if(null===E)return null;r.push(...E)}const o=tg(r);return function Iy(n){n.sort((e,t)=>e.value.outlet===At?-1:t.value.outlet===At?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return my(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!gy(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const Y=r.length>0?zc(r).parameters:{};u=new lu(r,Y,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Qt(e),e.component,e,h(t),p(t)+r.length,A(e))}else{const Y=fu(t,e,r);if(!Y.matched)return null;d=Y.consumedSegments,m=Y.remainingSegments,u=new lu(d,Y.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Qt(e),e.component,e,h(t),p(t)+d.length,A(e))}const E=function by(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:D,slicedSegments:M}=Cl(t,d,m,E.filter(Y=>void 0===Y.redirectTo),this.relativeLinkResolution);if(0===M.length&&D.hasChildren()){const Y=this.processChildren(E,D);return null===Y?null:[new oo(u,Y)]}if(0===E.length&&0===M.length)return[new oo(u,[])];const R=Qt(e)===o,H=this.processSegment(E,D,M,R?At:o);return null===H?null:[new oo(u,H)]}}function Cy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function tg(n){const e=[],t=new Set;for(const r of n){if(!Cy(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=tg(r.children);e.push(new oo(r.value,o))}return e.filter(r=>!t.has(r))}function h(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function p(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function v(n){return n.data||{}}function A(n){return n.resolve||{}}function Je(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ot(n){return Pn(e=>{const t=n(e);return t?(0,On.D)(t).pipe((0,Rt.U)(()=>e)):ft(e)})}class Sl extends class Fi{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const pu=new g.OlP("ROUTES");class gu{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Rt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new td(Ni(d.injector.get(pu,void 0,g.XFs.Self|g.XFs.Optional)).map(Bh),d)}),Oi(u=>{throw t._loader$=void 0,u}));return t._loader$=new Hc(o,()=>new sr.x).pipe(pi()),t._loader$}loadModuleFactory(e){return ri(e()).pipe((0,wn.z)(t=>t instanceof g.YKP?ft(t):(0,On.D)(this.compiler.compileModuleAsync(t))))}}class Dy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Ho(n){throw n}function sd(n,e,t){return e.parse("/")}function od(n,e){return ft(null)}const Jh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ad={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let qr=(()=>{class n{constructor(t,r,o,u,d,m,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new sr.x,this.errorHandler=Ho,this.malformedUriErrorHandler=sd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:od,afterPreactivation:od},this.urlHandlingStrategy=new Dy,this.routeReuseStrategy=new Sl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(g.h0i),this.console=d.get(g.c2e);const R=d.get(g.R0b);this.isNgZoneEnabled=R instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function pl(){return new Ae(new Se([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new gu(d,m,H=>this.triggerEvent(new ll(H)),H=>this.triggerEvent(new rs(H))),this.routerState=ma(this.currentUrlTree,this.rootComponentType),this.transitions=new $r({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ts(o=>0!==o.id),(0,Rt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Pn(o=>{let u=!1,d=!1;return ft(o).pipe((0,Gr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Pn(m=>{const E=this.browserUrlTree.toString(),D=!this.navigated||m.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return ng(m.source)&&(this.browserUrlTree=m.extractedUrl),ft(m).pipe(Pn(R=>{const H=this.transitions.getValue();return r.next(new ns(R.id,this.serializeUrl(R.extractedUrl),R.source,R.restoredState)),H!==this.transitions.getValue()?No.E:Promise.resolve(R)}),function Gh(n,e,t,r){return Pn(o=>function _a(n,e,t,r,o){return new Hh(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Rt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Gr.b)(R=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:R.urlAfterRedirects})}),function O(n,e,t,r,o){return(0,wn.z)(u=>function Ey(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new Yh(n,e,t,r,o,u).recognize();return null===d?Kh(new Zh):ft(d)}catch(d){return Kh(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Rt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,R=>this.serializeUrl(R),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Gr.b)(R=>{if("eager"===this.urlUpdateStrategy){if(!R.extras.skipLocationChange){const Y=this.urlHandlingStrategy.merge(R.urlAfterRedirects,R.rawUrl);this.setBrowserUrl(Y,R)}this.browserUrlTree=R.urlAfterRedirects}const H=new Lo(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);r.next(H)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:Y,source:le,restoredState:Fe,extras:st}=m,zt=new ns(H,this.serializeUrl(Y),le,Fe);r.next(zt);const Wt=ma(Y,this.rootComponentType).snapshot;return ft(Object.assign(Object.assign({},m),{targetSnapshot:Wt,urlAfterRedirects:Y,extras:Object.assign(Object.assign({},st),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),No.E}),ot(m=>{const{targetSnapshot:E,id:D,extractedUrl:M,rawUrl:R,extras:{skipLocationChange:H,replaceUrl:Y}}=m;return this.hooks.beforePreactivation(E,{navigationId:D,appliedUrlTree:M,rawUrlTree:R,skipLocationChange:!!H,replaceUrl:!!Y})}),(0,Gr.b)(m=>{const E=new $p(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(E)}),(0,Rt.U)(m=>Object.assign(Object.assign({},m),{guards:qh(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function vy(n,e){return(0,wn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?ft(Object.assign(Object.assign({},t),{guardsResult:!0})):function eg(n,e,t,r){return(0,On.D)(n).pipe((0,wn.z)(o=>function Al(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ft(u.map(m=>{const E=Tl(m,e,o);let D;if(function S0(n){return n&&ya(n.canDeactivate)}(E))D=ri(E.canDeactivate(n,e,t,r));else{if(!ya(E))throw new Error("Invalid CanDeactivate guard");D=ri(E(n,e,t,r))}return D.pipe(Ns())})).pipe(jo()):ft(!0)}(o.component,o.route,t,e,r)),Ns(o=>!0!==o,!0))}(d,r,o,n).pipe((0,wn.z)(m=>m&&function Zp(n){return"boolean"==typeof n}(m)?function _r(n,e,t,r){return(0,On.D)(e).pipe(Ps(o=>$c(function Wh(n,e){return null!==n&&e&&e(new mi(n)),ft(!0)}(o.route.parent,r),function zh(n,e){return null!==n&&e&&e(new pa(n)),ft(!0)}(o.route,r),function co(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Jp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>fi(()=>ft(d.guards.map(E=>{const D=Tl(E,d.node,t);let M;if(function Fh(n){return n&&ya(n.canActivateChild)}(D))M=ri(D.canActivateChild(r,n));else{if(!ya(D))throw new Error("Invalid CanActivateChild guard");M=ri(D(r,n))}return M.pipe(Ns())})).pipe(jo())));return ft(u).pipe(jo())}(n,o.path,t),function wy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ft(!0);const o=r.map(u=>fi(()=>{const d=Tl(u,e,t);let m;if(function kh(n){return n&&ya(n.canActivate)}(d))m=ri(d.canActivate(e,n));else{if(!ya(d))throw new Error("Invalid CanActivate guard");m=ri(d(e,n))}return m.pipe(Ns())}));return ft(o).pipe(jo())}(n,o.route,t))),Ns(o=>!0!==o,!0))}(r,u,n,e):ft(m)),(0,Rt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Gr.b)(m=>{if(hu(m.guardsResult)){const D=Fs(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw D.url=m.guardsResult,D}const E=new ul(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(E)}),ts(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),ot(m=>{if(m.guards.canActivateChecks.length)return ft(m).pipe((0,Gr.b)(E=>{const D=new mr(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(D)}),Pn(E=>{let D=!1;return ft(E).pipe(function G(n,e){return(0,wn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ft(t);let u=0;return(0,On.D)(o).pipe(Ps(d=>function ne(n,e,t,r){return function Ve(n,e,t,r){const o=Je(n);if(0===o.length)return ft({});const u={};return(0,On.D)(o).pipe((0,wn.z)(d=>function pt(n,e,t,r){const o=Tl(n,e,r);return ri(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,Gr.b)(m=>{u[d]=m}))),Gc(1),(0,wn.z)(()=>Je(u).length===o.length?ft(u):No.E))}(n._resolve,n,e,r).pipe((0,Rt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),iy(n,t).resolve),null)))}(d.route,r,n,e)),(0,Gr.b)(()=>u++),Gc(1),(0,wn.z)(d=>u===o.length?ft(t):No.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Gr.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,Gr.b)(E=>{const D=new ni(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(D)}))}),ot(m=>{const{targetSnapshot:E,id:D,extractedUrl:M,rawUrl:R,extras:{skipLocationChange:H,replaceUrl:Y}}=m;return this.hooks.afterPreactivation(E,{navigationId:D,appliedUrlTree:M,rawUrlTree:R,skipLocationChange:!!H,replaceUrl:!!Y})}),(0,Rt.U)(m=>{const E=function sy(n,e,t){const r=_l(n,e._root,t?t._root:void 0);return new Kc(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:E})}),(0,Gr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Rt.U)(r=>(new Wp(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Gr.b)({next(){u=!0},complete(){u=!0}}),function jp(n){return(0,Dr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),Oi(m=>{if(d=!0,function qc(n){return n&&n[fl]}(m)){const E=hu(m.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const D=new gn(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(D),E?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),R={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ng(o.source)};this.scheduleNavigation(M,"imperative",null,R,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new al(o.id,this.serializeUrl(o.extractedUrl),m);r.next(E);try{o.resolve(this.errorHandler(m))}catch(D){o.reject(D)}}return No.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const E=Object.assign({},d);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(u.state=E)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){bl(t),this.config=t.map(Bh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:E}=r,D=o||this.routerState.root,M=E?this.currentUrlTree.fragment:d;let R=null;switch(m){case"merge":R=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=u||null}return null!==R&&(R=this.removeEmptyProps(R)),function Ls(n,e,t,r,o){if(0===t.length)return qp(e.root,e.root,e.root,r,o);const u=function uy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ay(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return $n(u.outlets,(E,D)=>{m[D]="string"==typeof E?E.split("/"):E}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,E)=>{0==E&&"."===m||(0==E&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new ay(t,e,r)}(t);if(u.toRoot())return qp(e.root,e.root,new Se([],{}),r,o);const d=function zp(n,e,t){if(n.isAbsolute)return new Oh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Oh(u,u===e.root,0)}const r=Bo(n.commands[0])?0:1;return function ly(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Oh(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?Vs(d.segmentGroup,d.index,u.commands):dy(d.segmentGroup,d.index,u.commands);return qp(e.root,d.segmentGroup,m,r,o)}(D,this.currentUrlTree,t,R,null!=M?M:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=hu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Xh(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Jh):!1===r?Object.assign({},ad):r,hu(t))return uu(this.currentUrlTree,t,o);const u=this.parseUrl(t);return uu(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new su(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,E;if(this.disposed)return Promise.resolve(!1);let D,M,R;d?(D=d.resolve,M=d.reject,R=d.promise):R=new Promise((le,Fe)=>{D=le,M=Fe});const H=++this.navigationId;let Y;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Y=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):Y=0,this.setTransition({id:H,targetPageId:Y,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:D,reject:M,promise:R,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),R.catch(le=>Promise.reject(le))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new gn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function ng(n){return"imperative"!==n}let ud=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new sr.x,this.subscription=t.events.subscribe(u=>{u instanceof su&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){if(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:ld(this.skipLocationChange),replaceUrl:ld(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ld(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(qr),g.Y36(uo),g.Y36(he))},n.\u0275dir=g.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&g.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&g.uIk("target",r.target)("href",r.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),n})();function ld(n){return""===n||!!n}class Sy{}class M0{preload(e,t){return ft(null)}}let O0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new gu(o,r,E=>t.triggerEvent(new ll(E)),E=>t.triggerEvent(new rs(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(ts(t=>t instanceof su),Ps(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,On.D)(o).pipe((0,Mi.J)(),(0,Rt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ft(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,wn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(qr),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(Sy))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),rg=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ns?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof su&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof dl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new dl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const ss=new g.OlP("ROUTER_CONFIGURATION"),My=new g.OlP("ROUTER_FORROOT_GUARD"),R0=[me,{provide:Vn,useClass:En},{provide:qr,useFactory:function Ry(n,e,t,r,o,u,d={},m,E){const D=new qr(null,n,e,t,r,o,Ni(u));return m&&(D.urlHandlingStrategy=m),E&&(D.routeReuseStrategy=E),function k0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,D),d.enableTracing&&D.events.subscribe(M=>{var R,H;null===(R=console.group)||void 0===R||R.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(H=console.groupEnd)||void 0===H||H.call(console)}),D},deps:[Vn,El,me,g.zs3,g.Sil,pu,ss,[class Qh{},new g.FiY],[class In{},new g.FiY]]},El,{provide:uo,useFactory:function ig(n){return n.routerState.root},deps:[qr]},O0,M0,class xy{preload(e,t){return t().pipe(Oi(()=>ft(null)))}},{provide:ss,useValue:{enableTracing:!1}}];function mb(){return new g.PXZ("Router",qr)}let ef=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[R0,Oy(t),{provide:My,useFactory:N0,deps:[[qr,new g.FiY,new g.tp0]]},{provide:ss,useValue:r||{}},{provide:he,useFactory:P0,deps:[ce,[new g.tBr(et),new g.FiY],ss]},{provide:rg,useFactory:yb,deps:[qr,za,ss]},{provide:Sy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:M0},{provide:g.PXZ,multi:!0,useFactory:mb},[cd,{provide:g.ip1,multi:!0,useFactory:F0,deps:[cd]},{provide:Ny,useFactory:Py,deps:[cd]},{provide:g.tb,multi:!0,useExisting:Ny}]]}}static forChild(t){return{ngModule:n,providers:[Oy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(My,8),g.LFG(qr,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function yb(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new rg(n,e,t)}function P0(n,e,t={}){return t.useHash?new be(n,e):new Ze(n,e)}function N0(n){return"guarded"}function Oy(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:pu,multi:!0,useValue:n}]}let cd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new sr.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(qr),d=this.injector.get(ss);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?ft(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(ss),o=this.injector.get(O0),u=this.injector.get(rg),d=this.injector.get(qr),m=this.injector.get(g.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function F0(n){return n.appInitializer.bind(n)}function Py(n){return n.bootstrapListener.bind(n)}const Ny=new g.OlP("Router Initializer");var _b=N(4986),vr=N(5813);function Fy(){return(0,Dr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Ln.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function L0(n,e){return n===e}var tt,os=N(2011),ET=(N(820),N(3942)),ye=N(5861),xl=N(9681),tf=N(4859),mu=N(1877),Bt=N(2090),ho="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ia={},Ly=Ly||{},It=ho||self;function og(){}function Vy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function dd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Uy="closure_uid_"+(1e9*Math.random()>>>0),Ib=0;function Dt(n,e,t){return n.call.apply(n.bind,arguments)}function V0(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Sr(n,e,t){return(Sr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Dt:V0).apply(null,arguments)}function nf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function or(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function xr(){this.s=this.s,this.o=this.o}var bb={};xr.prototype.s=!1,xr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Eb(n){return Object.prototype.hasOwnProperty.call(n,Uy)&&n[Uy]||(n[Uy]=++Ib)}(this);delete bb[n]}},xr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ag=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Go=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function jy(n){return Array.prototype.concat.apply([],arguments)}function rf(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function $y(n){return/^[\s\xa0]*$/.test(n)}var Mr,Hy=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Li(n,e){return-1!=n.indexOf(e)}function hd(n,e){return n<e?-1:n>e?1:0}e:{var ug=It.navigator;if(ug){var lg=ug.userAgent;if(lg){Mr=lg;break e}}Mr=""}function sf(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Cb(n){const e={};for(const t in n)e[t]=n[t];return e}var B0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j0(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<B0.length;u++)t=B0[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Gy(n){return Gy[" "](n),n}Gy[" "]=og;var fd,n,$0=Li(Mr,"Opera"),of=Li(Mr,"Trident")||Li(Mr,"MSIE"),H0=Li(Mr,"Edge"),G0=H0||of,qy=Li(Mr,"Gecko")&&!(Li(Mr.toLowerCase(),"webkit")&&!Li(Mr,"Edge"))&&!(Li(Mr,"Trident")||Li(Mr,"MSIE"))&&!Li(Mr,"Edge"),q0=Li(Mr.toLowerCase(),"webkit")&&!Li(Mr,"Edge");function z0(){var n=It.document;return n?n.documentMode:void 0}e:{var W0="",Z0=(n=Mr,qy?/rv:([^\);]+)(\)|;)/.exec(n):H0?/Edge\/([\d\.]+)/.exec(n):of?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):q0?/WebKit\/(\S+)/.exec(n):$0?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Z0&&(W0=Z0?Z0[1]:""),of){var K0=z0();if(null!=K0&&K0>parseFloat(W0)){fd=String(K0);break e}}fd=W0}var IT={};var CT=It.document&&of&&(z0()||parseInt(fd,10))||void 0,DT=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",og,e),It.removeEventListener("test",og,e)}catch(t){}return n}();function wi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Us(n,e){if(wi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(qy){e:{try{Gy(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zy[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Us.Z.h.call(this)}}wi.prototype.h=function(){this.defaultPrevented=!0},or(Us,wi);var zy={2:"touch",3:"pen",4:"mouse"};Us.prototype.h=function(){Us.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var af="closure_listenable_"+(1e6*Math.random()|0),Q0=0;function Wy(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++Q0,this.ca=this.fa=!1}function uf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function pd(n){this.src=n,this.g={},this.h=0}function Zy(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=ag(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(uf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function qo(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}pd.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=qo(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new Wy(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var cg="closure_lm_"+(1e6*Math.random()|0),Ky={};function dg(n,e,t,r,o){if(r&&r.once)return ew(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)dg(n,e[u],t,r,o);return null}return t=_u(t),n&&n[af]?n.N(e,t,dd(r)?!!r.capture:!!r,o):J0(n,e,t,!1,r,o)}function J0(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=dd(o)?!!o.capture:!!o,m=yu(n);if(m||(n[cg]=m=new pd(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function X0(){var e=Yy;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)DT||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Ol(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ew(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)ew(n,e[u],t,r,o);return null}return t=_u(t),n&&n[af]?n.O(e,t,dd(r)?!!r.capture:!!r,o):J0(n,e,t,!0,r,o)}function tw(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)tw(n,e[u],t,r,o);else r=dd(r)?!!r.capture:!!r,t=_u(t),n&&n[af]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=qo(u=n.g[e],t,r,o))&&(uf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=yu(n))&&(e=n.g[e.toString()],n=-1,e&&(n=qo(e,t,r,o)),(t=-1<n?e[n]:null)&&Ml(t))}function Ml(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[af])Zy(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Ol(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=yu(e))?(Zy(t,n),0==t.h&&(t.src=null,e[cg]=null)):uf(n)}}}function Ol(n){return n in Ky?Ky[n]:Ky[n]="on"+n}function Yy(n,e){if(n.ca)n=!0;else{e=new Us(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Ml(n),n=t.call(r,e)}return n}function yu(n){return(n=n[cg])instanceof pd?n:null}var Rl="__closure_events_fn_"+(1e9*Math.random()>>>0);function _u(n){return"function"==typeof n?n:(n[Rl]||(n[Rl]=function(e){return n.handleEvent(e)}),n[Rl])}function Or(){xr.call(this),this.i=new pd(this),this.P=this,this.I=null}function Rr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new wi(e,n);else if(e instanceof wi)e.target=e.target||n;else{var o=e;j0(e=new wi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=lf(d,r,!0,e)&&o}if(o=lf(d=e.g=n,r,!0,e)&&o,o=lf(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=lf(d=e.g=t[u],r,!1,e)&&o}function lf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,E=d.ia||d.src;d.fa&&Zy(n.i,d),o=!1!==m.call(E,r)&&o}}return o&&!r.defaultPrevented}or(Or,xr),Or.prototype[af]=!0,Or.prototype.removeEventListener=function(n,e,t,r){tw(this,n,e,t,r)},Or.prototype.M=function(){if(Or.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)uf(t[r]);delete n.g[e],n.h--}}this.I=null},Or.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Or.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var cf=It.JSON.stringify;function Qy(){var n=Xy;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var hg,df=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Ab,n=>n.reset());class Ab{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function rw(n){It.setTimeout(()=>{throw n},0)}function iw(n,e){hg||function sw(){var n=It.Promise.resolve(void 0);hg=function(){n.then(Sb)}}(),Jy||(hg(),Jy=!0),Xy.add(n,e)}var Jy=!1,Xy=new class nw{constructor(){this.h=this.g=null}add(e,t){const r=df.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Sb(){for(var n;n=Qy();){try{n.h.call(n.g)}catch(t){rw(t)}var e=df;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Jy=!1}function fg(n,e){Or.call(this),this.h=n||1,this.g=e||It,this.j=Sr(this.kb,this),this.l=Date.now()}function Ei(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function e_(n,e,t){if("function"==typeof n)t&&(n=Sr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Sr(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function ow(n){n.g=e_(()=>{n.g=null,n.i&&(n.i=!1,ow(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}or(fg,Or),(tt=fg.prototype).da=!1,tt.S=null,tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Rr(this,"tick"),this.da&&(Ei(this),this.start()))}},tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.M=function(){fg.Z.M.call(this),Ei(this),delete this.g};class TT extends xr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ow(this)}M(){super.M(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pg(n){xr.call(this),this.h=n,this.g={}}or(pg,xr);var t_=[];function xb(n,e,t,r){Array.isArray(t)||(t&&(t_[0]=t.toString()),t=t_);for(var o=0;o<t.length;o++){var u=dg(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function aw(n){sf(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ml(e)},n),n.g={}}function gd(){this.g=!0}function md(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function lw(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return cf(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}pg.prototype.M=function(){pg.Z.M.call(this),aw(this)},pg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gd.prototype.Aa=function(){this.g=!1},gd.prototype.info=function(){};var Pl={},n_=null;function gg(){return n_=n_||new Or}function cw(n){wi.call(this,Pl.Ma,n)}function yd(n){const e=gg();Rr(e,new cw(e,n))}function r_(n,e){wi.call(this,Pl.STAT_EVENT,n),this.stat=e}function Ii(n){const e=gg();Rr(e,new r_(e,n))}function fo(n,e){wi.call(this,Pl.Na,n),this.size=e}function Nl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}Pl.Ma="serverreachability",or(cw,wi),Pl.STAT_EVENT="statevent",or(r_,wi),Pl.Na="timingevent",or(fo,wi);var mg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},dw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function hw(){}function fw(){}hw.prototype.h=null;var o_,hf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function s_(){wi.call(this,"d")}function ff(){wi.call(this,"c")}function yg(){}function vu(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new pg(this),this.P=Rb,this.W=new fg(n=G0?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new _g}function _g(){this.i=null,this.g="",this.h=!1}or(s_,wi),or(ff,wi),or(yg,hw),yg.prototype.g=function(){return new XMLHttpRequest},yg.prototype.i=function(){return{}},o_=new yg;var Rb=45e3,pf={},_d={};function vg(n,e,t){n.K=1,n.v=Cg(as(e)),n.s=t,n.U=!0,pw(n,null)}function pw(n,e){n.F=Date.now(),gf(n),n.A=as(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Dg(t.h,"t",r),n.C=0,t=n.l.H,n.h=new _g,n.g=$l(n.l,t?e:null,!n.s),0<n.O&&(n.L=new TT(Sr(n.Ia,n,n.g),n.O)),xb(n.V,n.g,"readystatechange",n.gb),e=n.H?Cb(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),yd(1),function uw(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),E=0;E<m.length;E++){var D=m[E].split("=");if(1<D.length){var M=D[0];D=D[1];var R=M.split("_");d=2<=R.length&&"type"==R[1]?d+(M+"=")+D+"&":d+(M+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function gw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function wg(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=AT(n,t),o==_d){4==e&&(n.o=4,Ii(14),r=!1),md(n.j,n.m,null,"[Incomplete Response]");break}if(o==pf){n.o=4,Ii(15),md(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}md(n.j,n.m,o,null),Eg(n,o)}gw(n)&&o!=_d&&o!=pf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),bf(e),e.L=!0,Ii(11))):(md(n.j,n.m,t,"[Invalid Chunked Response]"),wu(n),vd(n))}function AT(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?_d:(t=Number(e.substring(t,r)),isNaN(t)?pf:(r+=1)+t>e.length?_d:(e=e.substr(r,t),n.C=r+t,e))}function gf(n){n.Y=Date.now()+n.P,a_(n,n.P)}function a_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Nl(Sr(n.eb,n),e)}function mf(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function vd(n){0==n.l.G||n.I||Vl(n.l,n)}function wu(n){mf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Ei(n.W),aw(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Eg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||f_(t.i,n)))if(t.I=n.N,!n.J&&f_(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(D){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Nl(Sr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Ta(t),bu(t)}Vi(t),Ii(18)}if(1>=Ew(t.i)&&t.ka){try{t.ka()}catch(D){}t.ka=void 0}}else Bs(t,11)}else if((n.J||t.g==n)&&Ta(t),!$y(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let D=o[e];if(t.U=D[0],D=D[1],2==t.G)if("c"==D[0]){t.J=D[1],t.la=D[2];const M=D[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const R=D[4];null!=R&&(t.za=R,t.h.info("SVER="+t.za));const H=D[5];null!=H&&"number"==typeof H&&0<H&&(t.K=r=1.5*H,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Y=n.g;if(Y){const le=Y.g?Y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(le){var u=r.i;!u.g&&(Li(le,"spdy")||Li(le,"quic")||Li(le,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Tg(u,u.h),u.h=null))}if(r.D){const Fe=Y.g?Y.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.sa=Fe,bn(r.F,r.D,Fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=jl(r,r.H?r.la:null,r.W),d.J){Vb(r.i,d);var m=d,E=r.K;E&&m.setTimeout(E),m.B&&(mf(m),gf(m)),r.g=d}else If(r);0<t.l.length&&Sd(t)}else"stop"!=D[0]&&"close"!=D[0]||Bs(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Bs(t,7):__(t):"noop"!=D[0]&&t.j&&t.j.wa(D),t.A=0)}yd(4)}catch(D){}}function wd(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Vy(n)||"string"==typeof n)Go(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Vy(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function ba(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Vy(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Ed(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ed)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function u_(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Id(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Id(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Id(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(tt=vu.prototype).setTimeout=function(n){this.P=n},tt.gb=function(n){n=n.target;const e=this.L;e&&3==Da(n)?e.l():this.Ia(n)},tt.Ia=function(n){try{if(n==this.g)e:{const M=Da(this.g);var e=this.g.Da();const R=this.g.ba();if(!(3>M)&&(3!=M||G0||this.g&&(this.h.h||this.g.ga()||Tw(this.g)))){this.I||4!=M||7==e||yd(8==e||0>=R?3:2),mf(this);var t=this.g.ba();this.N=t;t:if(gw(this)){var r=Tw(this.g);n="";var o=r.length,u=4==Da(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){wu(this),vd(this);var d="";break t}this.h.i=new It.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function Mb(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$y(m)){var D=m;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Ii(12),wu(this),vd(this);break e}md(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Eg(this,t)}this.U?(wg(this,M,d),G0&&this.i&&3==M&&(xb(this.V,this.W,"tick",this.fb),this.W.start())):(md(this.j,this.m,d,null),Eg(this,d)),4==M&&wu(this),this.i&&!this.I&&(4==M?Vl(this.l,this):(this.i=!1,gf(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),wu(this),vd(this)}}}catch(M){}},tt.fb=function(){if(this.g){var n=Da(this.g),e=this.g.ga();this.C<e.length&&(mf(this),wg(this,n,e),this.i&&4!=n&&gf(this))}},tt.cancel=function(){this.I=!0,wu(this)},tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Ob(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(yd(3),Ii(17)),wu(this),this.o=2,vd(this)):a_(this,this.Y-n)},(tt=Ed.prototype).R=function(){u_(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},tt.T=function(){return u_(this),this.g.concat()},tt.get=function(n,e){return Id(this.h,n)?this.h[n]:e},tt.set=function(n,e){Id(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var Ig=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ca(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ca){this.g=void 0!==e?e:n.g,bg(this,n.j),this.s=n.s,bd(this,n.i),yf(this,n.m),this.l=n.l,e=n.h;var t=new vf;t.i=e.i,e.g&&(t.g=new Ed(e.g),t.h=e.h),l_(this,t),this.o=n.o}else n&&(t=String(n).match(Ig))?(this.g=!!e,bg(this,t[1]||"",!0),this.s=_f(t[2]||""),bd(this,t[3]||"",!0),yf(this,t[4]),this.l=_f(t[5]||"",!0),l_(this,t[6]||"",!0),this.o=_f(t[7]||"")):(this.g=!!e,this.h=new vf(null,this.g))}function as(n){return new Ca(n)}function bg(n,e,t){n.j=t?_f(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function bd(n,e,t){n.i=t?_f(e,!0):e}function yf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function l_(n,e,t){e instanceof vf?(n.h=e,function _w(n,e){e&&!n.j&&(Eu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(yw(this,r),Dg(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Cd(e,Td)),n.h=new vf(e,n.g))}function bn(n,e,t){n.h.set(e,t)}function Cg(n){return bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function _f(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Cd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Dd),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Dd(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ca.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Cd(e,d_,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Cd(e,d_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Cd(t,"/"==t.charAt(0)?kb:Nb,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Cd(t,Fb)),n.join("")};var d_=/[#\/\?@]/g,Nb=/[#\?:]/g,kb=/[#\?]/g,Td=/[#\?@]/g,Fb=/#/g;function vf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Eu(n){n.g||(n.g=new Ed,n.h=0,n.i&&function mw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function yw(n,e){Eu(n),e=kl(n,e),Id(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Id((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&u_(n)))}function po(n,e){return Eu(n),e=kl(n,e),Id(n.g.h,e)}function Dg(n,e,t){yw(n,e),0<t.length&&(n.i=null,n.g.set(kl(n,e),rf(t)),n.h+=t.length)}function kl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function h_(n){this.l=n||Lb,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ea&&It.g.Ea()&&It.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=vf.prototype).add=function(n,e){Eu(this),this.i=null,n=kl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){Eu(this),this.g.forEach(function(t,r){Go(t,function(o){n.call(e,o,r,this)},this)},this)},tt.T=function(){Eu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},tt.R=function(n){Eu(this);var e=[];if("string"==typeof n)po(this,n)&&(e=jy(e,this.g.get(kl(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=jy(e,n[t])}return e},tt.set=function(n,e){return Eu(this),this.i=null,po(this,n=kl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var Lb=10;function ww(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Ew(n){return n.h?1:n.g?n.g.size:0}function f_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Tg(n,e){n.g?n.g.add(e):n.h=e}function Vb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function p_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return rf(n.i)}function g_(){}function Ub(){this.g=new g_}function ST(n,e,t){const r=t||"";try{wd(n,function(o,u){let d=o;dd(o)&&(d=cf(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Ad(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function wf(n){this.l=n.$b||null,this.j=n.ib||!1}function Ef(n,e){Or.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Ag,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}h_.prototype.cancel=function(){if(this.i=p_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},g_.prototype.stringify=function(n){return It.JSON.stringify(n,void 0)},g_.prototype.parse=function(n){return It.JSON.parse(n,void 0)},or(wf,hw),wf.prototype.g=function(){return new Ef(this.l,this.j)},wf.prototype.i=function(n){return function(){return n}}({}),or(Ef,Or);var Ag=0;function Bb(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function bi(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Sg(n)}function Sg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=Ef.prototype).open=function(n,e){if(this.readyState!=Ag)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Sg(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||It).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bi(this)),this.readyState=Ag},tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Sg(this)),this.g&&(this.readyState=3,Sg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==It.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bb(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?bi(this):Sg(this),3==this.readyState&&Bb(this)}},tt.Ua=function(n){this.g&&(this.response=this.responseText=n,bi(this))},tt.Ta=function(n){this.g&&(this.response=n,bi(this))},tt.ha=function(){this.g&&bi(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ef.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var MT=It.JSON.parse;function Yn(n){Or.call(this),this.headers=new Ed,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=m_,this.K=this.L=!1}or(Yn,Or);var m_="",Iw=/^https?$/i,jb=["POST","PUT"];function bw(n){return"content-type"==n.toLowerCase()}function xg(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Cw(n),Og(n)}function Cw(n){n.D||(n.D=!0,Rr(n,"complete"),Rr(n,"error"))}function Mg(n){if(n.h&&void 0!==Ly&&(!n.C[1]||4!=Da(n)||2!=n.ba()))if(n.v&&4==Da(n))e_(n.Fa,0,n);else if(Rr(n,"readystatechange"),4==Da(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Ig)[1]||null;if(!o&&It.self&&It.self.location){var u=It.self.location.protocol;o=u.substr(0,u.length-1)}r=!Iw.test(o?o.toLowerCase():"")}t=r}if(t)Rr(n,"complete"),Rr(n,"success");else{n.m=6;try{var d=2<Da(n)?n.g.statusText:""}catch(E){d=""}n.j=d+" ["+n.ba()+"]",Cw(n)}}finally{Og(n)}}}function Og(n,e){if(n.g){Dw(n);const t=n.g,r=n.C[0]?og:null;n.g=null,n.C=null,e||Rr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function Dw(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function Da(n){return n.g?n.g.readyState:0}function Tw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case m_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function y_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function $b(n){let e="";return sf(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):bn(n,e,t))}function Iu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Fl(n){this.za=0,this.l=[],this.h=new gd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Iu("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Iu("baseRetryDelayMs",5e3,n),this.$a=Iu("retryDelaySeedMs",1e4,n),this.Ya=Iu("forwardChannelMaxRetries",2,n),this.ra=Iu("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new h_(n&&n.concurrentRequestLimit),this.Ca=new Ub,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function __(n){if(Aw(n),3==n.G){var e=n.V++,t=as(n.F);bn(t,"SID",n.J),bn(t,"RID",e),bn(t,"TYPE","terminate"),ar(n,t),(e=new vu(n,n.h,e,void 0)).K=2,e.v=Cg(as(t)),t=!1,It.navigator&&It.navigator.sendBeacon&&(t=It.navigator.sendBeacon(e.v.toString(),"")),!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=$l(e.l,null),e.g.ea(e.v)),e.F=Date.now(),gf(e)}Bl(n)}function bu(n){n.g&&(bf(n),n.g.cancel(),n.g=null)}function Aw(n){bu(n),n.u&&(It.clearTimeout(n.u),n.u=null),Ta(n),n.i.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function v_(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Sd(n)}function Sd(n){ww(n.i)||n.m||(n.m=!0,iw(n.Ha,n),n.C=0)}function xd(n,e){var t;t=e?e.m:n.V++;const r=as(n.F);bn(r,"SID",n.J),bn(r,"RID",t),bn(r,"AID",n.U),ar(n,r),n.o&&n.s&&y_(r,n.o,n.s),t=new vu(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Cu(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Tg(n.i,t),vg(t,r,e)}function ar(n,e){n.j&&wd({},function(t,r){bn(e,r,t)})}function Cu(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Sr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let E=0;E<t;E++){let D=o[E].h;const M=o[E].g;if(D-=u,0>D)u=Math.max(0,o[E].h-100),m=!1;else try{ST(M,d,"req"+D+"_")}catch(R){r&&r(M)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function If(n){n.g||n.u||(n.Y=1,iw(n.Ga,n),n.A=0)}function Vi(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Nl(Sr(n.Ga,n),Ul(n,n.A)),n.A++,0))}function bf(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function Ll(n){n.g=new vu(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=as(n.oa);bn(e,"RID","rpc"),bn(e,"SID",n.J),bn(e,"CI",n.N?"0":"1"),bn(e,"AID",n.U),ar(n,e),bn(e,"TYPE","xmlhttp"),n.o&&n.s&&y_(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Cg(as(e)),t.s=null,t.U=!0,pw(t,n)}function Ta(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function Vl(n,e){var t=null;if(n.g==e){Ta(n),bf(n),n.g=null;var r=2}else{if(!f_(n.i,e))return;t=e.D,Vb(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Rr(r=gg(),new fo(r,t,e,o)),Sd(n)}else If(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function zo(n,e){return!(Ew(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Nl(Sr(n.Ha,n,e),Ul(n,n.C)),n.C++,0)))}(n,e)||2==r&&Vi(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Bs(n,5);break;case 4:Bs(n,10);break;case 3:Bs(n,6);break;default:Bs(n,2)}}function Ul(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Bs(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Sr(n.jb,n);t||(t=new Ca("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||bg(t,"https"),Cg(t)),function xT(n,e){const t=new gd;if(It.Image){const r=new Image;r.onload=nf(Ad,t,r,"TestLoadImage: loaded",!0,e),r.onerror=nf(Ad,t,r,"TestLoadImage: error",!1,e),r.onabort=nf(Ad,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=nf(Ad,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ii(2);n.G=0,n.j&&n.j.va(e),Bl(n),Aw(n)}function Bl(n){n.G=0,n.I=-1,n.j&&((0!=p_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,rf(n.l),n.l.length=0),n.j.ua())}function jl(n,e,t){let r=function c_(n){return n instanceof Ca?as(n):new Ca(n,void 0)}(t);if(""!=r.i)e&&bd(r,e+"."+r.i),yf(r,r.m);else{const o=It.location;r=function Pb(n,e,t,r){var o=new Ca(null,void 0);return n&&bg(o,n),e&&bd(o,e),t&&yf(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&sf(n.aa,function(o,u){bn(r,u,o)}),t=n.sa,(e=n.D)&&t&&bn(r,e,t),bn(r,"VER",n.ma),ar(n,r),r}function $l(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yn(t&&n.Ba&&!n.qa?new wf({ib:!0}):n.qa)).L=n.H,e}function Hl(){}function Cf(){if(of&&!(10<=Number(CT)))throw Error("Environmental error: no available transport.")}function Ui(n,e){Or.call(this),this.g=new Fl(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!$y(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$y(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Gl(this)}function w_(n){s_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function E_(){ff.call(this),this.status=1}function Gl(n){this.g=n}(tt=Yn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():o_.g(),this.C=function i_(n){return n.h||(n.h=n.i())}(this.u?this.u:o_),this.g.onreadystatechange=Sr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void xg(this,u)}n=t||"";const o=new Ed(this.headers);r&&wd(r,function(u,d){o.set(d,u)}),r=function By(n){e:{var e=bw;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=It.FormData&&n instanceof It.FormData,!(0<=ag(jb,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Dw(this),0<this.B&&((this.K=function OT(n){return of&&function bT(){return function Db(n){var e=IT;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Hy(String(fd)).split("."),t=Hy("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=hd(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||hd(0==o[2].length,0==u[2].length)||hd(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Sr(this.pa,this)):this.A=e_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){xg(this,u)}},tt.pa=function(){void 0!==Ly&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Rr(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Rr(this,"complete"),Rr(this,"abort"),Og(this))},tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Og(this,!0)),Yn.Z.M.call(this)},tt.Fa=function(){this.s||(this.F||this.v||this.l?Mg(this):this.cb())},tt.cb=function(){Mg(this)},tt.ba=function(){try{return 2<Da(this)?this.g.status:-1}catch(n){return-1}},tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),MT(e)}},tt.Da=function(){return this.m},tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=Fl.prototype).ma=8,tt.G=1,tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new vu(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Cb(u),j0(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Cu(this,o,e),bn(t=as(this.F),"RID",n),bn(t,"CVER",22),this.D&&bn(t,"X-HTTP-Session-Id",this.D),ar(this,t),this.o&&u&&y_(t,this.o,u),Tg(this.i,o),this.Ra&&bn(t,"TYPE","init"),this.ja?(bn(t,"$req",e),bn(t,"SID","null"),o.$=!0,vg(o,t,null)):vg(o,t,e),this.G=2}}else 3==this.G&&(n?xd(this,n):0==this.l.length||ww(this.i)||xd(this))},tt.Ga=function(){if(this.u=null,Ll(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Nl(Sr(this.bb,this),n)}},tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ii(10),bu(this),Ll(this))},tt.ab=function(){null!=this.v&&(this.v=null,bu(this),Vi(this),Ii(19))},tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ii(2)):(this.h.info("Failed to ping google.com"),Ii(1))},(tt=Hl.prototype).xa=function(){},tt.wa=function(){},tt.va=function(){},tt.ua=function(){},tt.Oa=function(){},Cf.prototype.g=function(n,e){return new Ui(n,e)},or(Ui,Or),Ui.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),iw(Sr(n.hb,n,e))),Ii(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=jl(n,null,n.W),Sd(n)},Ui.prototype.close=function(){__(this.g)},Ui.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,v_(this.g,e)}else this.v?((e={}).__data__=cf(n),v_(this.g,e)):v_(this.g,n)},Ui.prototype.M=function(){this.g.j=null,delete this.j,__(this.g),delete this.g,Ui.Z.M.call(this)},or(w_,s_),or(E_,ff),or(Gl,Hl),Gl.prototype.xa=function(){Rr(this.g,"a")},Gl.prototype.wa=function(n){Rr(this.g,new w_(n))},Gl.prototype.va=function(n){Rr(this.g,new E_(n))},Gl.prototype.ua=function(){Rr(this.g,"b")},Cf.prototype.createWebChannel=Cf.prototype.g,Ui.prototype.send=Ui.prototype.u,Ui.prototype.open=Ui.prototype.m,Ui.prototype.close=Ui.prototype.close,mg.NO_ERROR=0,mg.TIMEOUT=8,mg.HTTP_ERROR=6,dw.COMPLETE="complete",fw.EventType=hf,hf.OPEN="a",hf.CLOSE="b",hf.ERROR="c",hf.MESSAGE="d",Or.prototype.listen=Or.prototype.N,Yn.prototype.listenOnce=Yn.prototype.O,Yn.prototype.getLastError=Yn.prototype.La,Yn.prototype.getLastErrorCode=Yn.prototype.Da,Yn.prototype.getStatus=Yn.prototype.ba,Yn.prototype.getResponseJson=Yn.prototype.Qa,Yn.prototype.getResponseText=Yn.prototype.ga,Yn.prototype.send=Yn.prototype.ea;var Sw=Ia.createWebChannelTransport=function(){return new Cf},xw=Ia.getStatEventTarget=function(){return gg()},Rg=Ia.ErrorCode=mg,Mw=Ia.EventType=dw,Hb=Ia.Event=Pl,I_=Ia.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Gb=Ia.FetchXmlHttpFactory=wf,Pg=Ia.WebChannel=fw,Ow=Ia.XhrIo=Yn;const Rw="@firebase/firestore";class zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zr.UNAUTHENTICATED=new zr(null),zr.GOOGLE_CREDENTIALS=new zr("google-credentials-uid"),zr.FIRST_PARTY=new zr("first-party-uid"),zr.MOCK_USER=new zr("mock-user");let ql="9.6.11";const Du=new mu.Yd("@firebase/firestore");function Ng(){return Du.logLevel}function Re(n,...e){if(Du.logLevel<=mu.in.DEBUG){const t=e.map(Tf);Du.debug(`Firestore (${ql}): ${n}`,...t)}}function wr(n,...e){if(Du.logLevel<=mu.in.ERROR){const t=e.map(Tf);Du.error(`Firestore (${ql}): ${n}`,...t)}}function Df(n,...e){if(Du.logLevel<=mu.in.WARN){const t=e.map(Tf);Du.warn(`Firestore (${ql}): ${n}`,...t)}}function Tf(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${ql}) INTERNAL ASSERTION FAILED: `+n;throw wr(e),new Error(e)}function wt(n,e){n||nt()}function We(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Bt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Er{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class zb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Wb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zr.UNAUTHENTICATED))}shutdown(){}}class Md{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Zb{constructor(e){this.t=e,this.currentUser=zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=D=>this.i!==o?(o=this.i,t(D)):Promise.resolve();let d=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Er,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const D=d;e.enqueueRetryable((0,ye.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},E=D=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(D=>E(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?E(D):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Er)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new zb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new zr(e)}}class Pw{constructor(e,t,r){this.type="FirstParty",this.user=zr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Kb{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Pw(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class b_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kg{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.p=t.token,new b_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Bi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Yb(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Bi.A=-1;class Nw{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Yb(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Mt(n,e){return n<e?-1:n>e?1:0}function Od(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function kw(n){return n+"\0"}class Hn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hn.fromMillis(Date.now())}static fromDate(e){return Hn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Hn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yt(e)}static min(){return new yt(new Hn(0,0))}static max(){return new yt(new Hn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function C_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Tu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Fg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Lg{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Lg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Gt extends Lg{construct(e,t,r){return new Gt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Gt(t)}static emptyPath(){return new Gt([])}}const Qb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wr extends Lg{construct(e,t,r){return new Wr(e,t,r)}static isValidIdentifier(e){return Qb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new xe(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new xe(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wr(t)}static emptyPath(){return new Wr([])}}class Wo{constructor(e){this.fields=e,e.sort(Wr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Od(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Qn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Qn(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Qn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qn.EMPTY_BYTE_STRING=new Qn("");const D_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Au(n){if(wt(!!n),"string"==typeof n){let e=0;const t=D_.exec(n);if(wt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Cn(n.seconds),nanos:Cn(n.nanos)}}function Cn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Zo(n){return"string"==typeof n?Qn.fromBase64String(n):Qn.fromUint8Array(n)}function Af(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Jb(n){const e=n.mapValue.fields.__previous_value__;return Af(e)?Jb(e):e}function Sf(n){const e=Au(n.mapValue.fields.__local_write_time__.timestampValue);return new Hn(e.seconds,e.nanos)}class T_{constructor(e,t,r,o,u,d,m,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=E}}class go{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new go("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof go&&e.projectId===this.projectId&&e.database===this.database}}function Su(n){return null==n}function Rd(n){return 0===n&&1/n==-1/0}function Vg(n){return"number"==typeof n&&Number.isInteger(n)&&!Rd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Gt.fromString(e))}static fromName(e){return new Be(Gt.fromString(e).popFirst(5))}static empty(){return new Be(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Gt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Gt(e.slice()))}}const A_={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ug={nullValue:"NULL_VALUE"};function xu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Af(n)?4:O_(n)?9:10:nt()}function Ko(n,e){if(n===e)return!0;const t=xu(n);if(t!==xu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sf(n).isEqual(Sf(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Au(r.timestampValue),d=Au(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Zo(n.bytesValue).isEqual(Zo(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Cn(r.geoPointValue.latitude)===Cn(o.geoPointValue.latitude)&&Cn(r.geoPointValue.longitude)===Cn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Cn(r.integerValue)===Cn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Cn(r.doubleValue),d=Cn(o.doubleValue);return u===d?Rd(u)===Rd(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Od(n.arrayValue.values||[],e.arrayValue.values||[],Ko);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(C_(u)!==C_(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Ko(u[m],d[m])))return!1;return!0}(n,e);default:return nt()}var o}function Pd(n,e){return void 0!==(n.values||[]).find(t=>Ko(t,e))}function Aa(n,e){if(n===e)return 0;const t=xu(n),r=xu(e);if(t!==r)return Mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Cn(o.integerValue||o.doubleValue),m=Cn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return Bg(n.timestampValue,e.timestampValue);case 4:return Bg(Sf(n),Sf(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Zo(o),m=Zo(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let E=0;E<d.length&&E<m.length;E++){const D=Mt(d[E],m[E]);if(0!==D)return D}return Mt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Mt(Cn(o.latitude),Cn(u.latitude));return 0!==d?d:Mt(Cn(o.longitude),Cn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let E=0;E<d.length&&E<m.length;++E){const D=Aa(d[E],m[E]);if(D)return D}return Mt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const d=o.fields||{},m=Object.keys(d),E=u.fields||{},D=Object.keys(E);m.sort(),D.sort();for(let M=0;M<m.length&&M<D.length;++M){const R=Mt(m[M],D[M]);if(0!==R)return R;const H=Aa(d[m[M]],E[D[M]]);if(0!==H)return H}return Mt(m.length,D.length)}(n.mapValue,e.mapValue);default:throw nt()}}function Bg(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=Au(n),r=Au(e),o=Mt(t.seconds,r.seconds);return 0!==o?o:Mt(t.nanos,r.nanos)}function zl(n){return S_(n)}function S_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Au(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Zo(n.bytesValue).toBase64():"referenceValue"in n?Be.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=S_(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${S_(r.fields[m])}`;return u+"}"}(n.mapValue):nt();var e}function Wl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function x_(n){return!!n&&"integerValue"in n}function Nd(n){return!!n&&"arrayValue"in n}function xf(n){return!!n&&"nullValue"in n}function M_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mf(n){return!!n&&"mapValue"in n}function kd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Tu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=kd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function O_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Lw(n){return"nullValue"in n?Ug:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Wl(go.empty(),Be.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function Vw(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Wl(go.empty(),Be.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?A_:nt()}function R_(n,e){return void 0===n?e:void 0===e||Aa(n,e)>0?n:e}function P_(n,e){return void 0===n?e:void 0===e||Aa(n,e)<0?n:e}class Ci{constructor(e){this.value=e}static empty(){return new Ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kd(t)}setAll(e){let t=Wr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=kd(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Mf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ko(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Mf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Tu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Ci(kd(this.value))}}function Uw(n){const e=[];return Tu(n.fields,(t,r)=>{const o=new Wr([t]);if(Mf(r)){const u=Uw(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Wo(e)}class Dn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Dn(e,0,yt.min(),yt.min(),Ci.empty(),0)}static newFoundDocument(e,t,r){return new Dn(e,1,t,yt.min(),r,0)}static newNoDocument(e,t){return new Dn(e,2,t,yt.min(),Ci.empty(),0)}static newUnknownDocument(e,t){return new Dn(e,3,t,yt.min(),Ci.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Of{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function N_(n){return n.fields.find(e=>2===e.kind)}function Tn(n){return n.fields.filter(e=>2!==e.kind)}Of.UNKNOWN_ID=-1;class Rf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Pf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Pf(0,Sa.min())}}function Bw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=yt.fromTimestamp(1e9===r?new Hn(t+1,0):new Hn(t,r));return new Sa(o,Be.empty(),e)}function jw(n){return new Sa(n.readTime,n.key,-1)}class Sa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Sa(yt.min(),Be.empty(),-1)}static max(){return new Sa(yt.max(),Be.empty(),-1)}}function $w(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Be.comparator(n.documentKey,e.documentKey),0!==t?t:Mt(n.largestBatchId,e.largestBatchId))}class Hw{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function Zl(n,e=null,t=[],r=[],o=null,u=null,d=null){return new Hw(n,e,t,r,o,u,d)}function Kl(n){const e=We(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+zl(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Su(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zl(r)).join(",")),e.P=t}return e.P}function Fd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!rC(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Ko(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$g(n.startAt,e.startAt)&&$g(n.endAt,e.endAt)}function jg(n){return Be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Nf(n,e){return n.filters.filter(t=>t instanceof Ir&&t.field.isEqual(e))}function eC(n,e,t){let r,o=!0;for(const u of Nf(n,e)){let d,m=!0;switch(u.op){case"<":case"<=":d=Lw(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=Ug}R_(r,d)===d&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];R_(r,d)===d&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function k_(n,e,t){let r,o=!0;for(const u of Nf(n,e)){let d,m=!0;switch(u.op){case">=":case">":d=Vw(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=A_}P_(r,d)===d&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];P_(r,d)===d&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Ir extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Yo(e,t,r):"array-contains"===t?new yo(e,r):"in"===t?new _o(e,r):"not-in"===t?new Gw(e,r):"array-contains-any"===t?new qw(e,r):new Ir(e,t,r)}static V(e,t,r){return"in"===t?new tC(e,r):new nC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Aa(t,this.value)):null!==t&&xu(this.value)===xu(t)&&this.v(Aa(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Yo extends Ir{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.v(t)}}class tC extends Ir{constructor(e,t){super(e,"in",t),this.keys=mo(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nC extends Ir{constructor(e,t){super(e,"not-in",t),this.keys=mo(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mo(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class yo extends Ir{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nd(t)&&Pd(t.arrayValue,this.value)}}class _o extends Ir{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Pd(this.value.arrayValue,t)}}class Gw extends Ir{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Pd(this.value.arrayValue,t)}}class qw extends Ir{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Pd(this.value.arrayValue,r))}}class Mu{constructor(e,t){this.position=e,this.inclusive=t}}class Ld{constructor(e,t="asc"){this.field=e,this.dir=t}}function rC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function zw(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Be.comparator(Be.fromName(d.referenceValue),t.key):Aa(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function $g(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ko(n.position[t],e.position[t]))return!1;return!0}class us{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=E,this.D=null,this.C=null}}function Ww(n,e,t,r,o,u,d,m){return new us(n,e,t,r,o,u,d,m)}function Yl(n){return new us(n)}function Hg(n){return!Su(n.limit)&&"F"===n.limitType}function kf(n){return!Su(n.limit)&&"L"===n.limitType}function Gg(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Vd(n){for(const e of n.filters)if(e.S())return e.field;return null}function F_(n){return null!==n.collectionGroup}function Ql(n){const e=We(n);if(null===e.D){e.D=[];const t=Vd(e),r=Gg(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Ld(t)),e.D.push(new Ld(Wr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Ld(Wr.keyField(),u))}}}return e.D}function ls(n){const e=We(n);if(!e.C)if("F"===e.limitType)e.C=Zl(e.path,e.collectionGroup,Ql(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Ql(e))t.push(new Ld(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Mu(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Mu(e.startAt.position,!e.startAt.inclusive):null;e.C=Zl(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function qg(n,e,t){return new us(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jl(n,e){return Fd(ls(n),ls(e))&&n.limitType===e.limitType}function L_(n){return`${Kl(ls(n))}|lt:${n.limitType}`}function zg(n){return`Query(target=${function Xb(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${zl(r.value)}`;var r}).join(", ")}]`),Su(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>zl(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>zl(t)).join(",")),`Target(${e})`}(ls(n))}; limitType=${n.limitType})`}function Wg(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Be.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=zw(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,Ql(t),r)||t.endAt&&!function(o,u,d){const m=zw(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,Ql(t),r)));var t,r}function V_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function U_(n){return(e,t)=>{let r=!1;for(const o of Ql(n)){const u=Zw(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Zw(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),E=d.data.field(o);return null!==m&&null!==E?Aa(m,E):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function B_(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function j_(n){return{integerValue:""+n}}function Kw(n,e){return Vg(e)?j_(e):B_(n,e)}class Zg{constructor(){this._=void 0}}function iC(n,e,t){return n instanceof Ud?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Xl?Qw(n,e):n instanceof ec?Jw(n,e):function(r,o){const u=Yw(r,o),d=Xw(u)+Xw(r.k);return x_(u)&&x_(r.k)?j_(d):B_(r.M,d)}(n,e)}function sC(n,e,t){return n instanceof Xl?Qw(n,e):n instanceof ec?Jw(n,e):t}function Yw(n,e){return n instanceof Bd?x_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ud extends Zg{}class Xl extends Zg{constructor(e){super(),this.elements=e}}function Qw(n,e){const t=eE(e);for(const r of n.elements)t.some(o=>Ko(o,r))||t.push(r);return{arrayValue:{values:t}}}class ec extends Zg{constructor(e){super(),this.elements=e}}function Jw(n,e){let t=eE(e);for(const r of n.elements)t=t.filter(o=>!Ko(o,r));return{arrayValue:{values:t}}}class Bd extends Zg{constructor(e,t){super(),this.M=e,this.k=t}}function Xw(n){return Cn(n.integerValue||n.doubleValue)}function eE(n){return Nd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ff{constructor(e,t){this.field=e,this.transform=t}}class aC{constructor(e,t){this.version=e,this.transformResults=t}}class ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Lf{}function tE(n,e,t){n instanceof jd?function(r,o,u){const d=r.value.clone(),m=q_(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Ou?function(r,o,u){if(!Kg(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=q_(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(G_(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Yg(n,e,t){var o;n instanceof jd?function(r,o,u){if(!Kg(r.precondition,o))return;const d=r.value.clone(),m=z_(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(H_(o),d).setHasLocalMutations()}(n,e,t):n instanceof Ou?function(r,o,u){if(!Kg(r.precondition,o))return;const d=z_(r.fieldTransforms,u,o),m=o.data;m.setAll(G_(r)),m.setAll(d),o.convertToFoundDocument(H_(o),m).setHasLocalMutations()}(n,e,t):Kg(n.precondition,o=e)&&o.convertToNoDocument(yt.min())}function nE(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Yw(r.transform,o||null);null!=u&&(null==t&&(t=Ci.empty()),t.set(r.field,u))}return t||null}function $_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Od(t,r,(o,u)=>function oC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Xl&&r instanceof Xl||t instanceof ec&&r instanceof ec?Od(t.elements,r.elements,Ko):t instanceof Bd&&r instanceof Bd?Ko(t.k,r.k):t instanceof Ud&&r instanceof Ud);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function H_(n){return n.isFoundDocument()?n.version:yt.min()}class jd extends Lf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Ou extends Lf{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function G_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function q_(n,e,t){const r=new Map;wt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,sC(d,m,t[o]))}return r}function z_(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,iC(u,d,e))}return r}class vo extends Lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class W_ extends Lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class uC{constructor(e){this.count=e}}var An,Jt;function Qg(n){switch(n){default:return nt();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function lC(n){if(void 0===n)return wr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case An.OK:return ae.OK;case An.CANCELLED:return ae.CANCELLED;case An.UNKNOWN:return ae.UNKNOWN;case An.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case An.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case An.INTERNAL:return ae.INTERNAL;case An.UNAVAILABLE:return ae.UNAVAILABLE;case An.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case An.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case An.NOT_FOUND:return ae.NOT_FOUND;case An.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case An.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case An.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case An.ABORTED:return ae.ABORTED;case An.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case An.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case An.DATA_LOSS:return ae.DATA_LOSS;default:return nt()}}(Jt=An||(An={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";class xa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Tu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Fg(this.inner)}size(){return this.innerSize}}class Gn{constructor(e,t){this.comparator=e,this.root=t||Xe.EMPTY}insert(e,t){return new Gn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(e){return new Gn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Z_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Z_(this.root,e,this.comparator,!1)}getReverseIterator(){return new Z_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Z_(this.root,e,this.comparator,!0)}}class Z_{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xe{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Xe.RED,this.left=null!=o?o:Xe.EMPTY,this.right=null!=u?u:Xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Xe(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Xe.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1,Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Xe(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Sn{constructor(e){this.comparator=e,this.data=new Gn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rE(this.data.getIterator())}getIteratorFrom(e){return new rE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Sn(this.comparator);return t.data=e,t}}class rE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $d(n){return n.hasNext()?n.getNext():void 0}const Jg=new Gn(Be.comparator);function js(){return Jg}const Xg=new Gn(Be.comparator);function Hd(){return Xg}function mn(){return new xa(n=>n.toString(),(n,e)=>n.isEqual(e))}const NT=new Gn(Be.comparator),iE=new Sn(Be.comparator);function un(...n){let e=iE;for(const t of n)e=e.add(t);return e}const cC=new Sn(Mt);function Vf(){return cC}class Gd{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,qd.createSynthesizedTargetChangeForCurrentChange(e,t)),new Gd(yt.min(),r,Vf(),js(),un())}}class qd{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new qd(Qn.EMPTY_BYTE_STRING,t,un(),un(),un())}}class Uf{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class sE{constructor(e,t){this.targetId=e,this.$=t}}class oE{constructor(e,t,r=Qn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class aE{constructor(){this.B=0,this.L=lE(),this.U=Qn.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=un(),t=un(),r=un();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:nt()}}),new qd(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=lE()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Bf{constructor(e){this.nt=e,this.st=new Map,this.it=js(),this.rt=uE(),this.ot=new Sn(Mt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(jg(u))if(0===r){const d=new Be(u.path);this.ct(t,d,Dn.newNoDocument(d,yt.min()))}else wt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&jg(m.target)){const E=new Be(m.target.path);null!==this.it.get(E)||this.It(d,E)||this.ct(d,E,Dn.newNoDocument(E,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=un();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(E=>{const D=this.wt(E);return!D||2===D.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new Gd(e,t,this.ot,this.it,r);return this.it=js(),this.rt=uE(),this.ot=new Sn(Mt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new aE,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Sn(Mt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new aE),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function uE(){return new Gn(Be.comparator)}function lE(){return new Gn(Be.comparator)}const dC={asc:"ASCENDING",desc:"DESCENDING"},em={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class cE{constructor(e,t){this.databaseId=e,this.N=t}}function zd(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function K_(n,e){return n.N?e.toBase64():e.toUint8Array()}function hC(n,e){return zd(n,e.toTimestamp())}function qn(n){return wt(!!n),yt.fromTimestamp(function(e){const t=Au(e);return new Hn(t.seconds,t.nanos)}(n))}function tc(n,e){return(t=n,new Gt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function dE(n){const e=Gt.fromString(n);return wt(yE(e)),e}function jf(n,e){return tc(n.databaseId,e.path)}function Qo(n,e){const t=dE(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(hE(t))}function tm(n,e){return tc(n.databaseId,e)}function Y_(n){const e=dE(n);return 4===e.length?Gt.emptyPath():hE(e)}function Wd(n){return new Gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hE(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Q_(n,e,t){return{name:jf(n,e),fields:t.value.mapValue.fields}}function fE(n,e,t){const r=Qo(n,e.name),o=qn(e.updateTime),u=new Ci({mapValue:{fields:e.fields}}),d=Dn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function nm(n,e){let t;if(e instanceof jd)t={update:Q_(n,e.key,e.value)};else if(e instanceof vo)t={delete:jf(n,e.key)};else if(e instanceof Ou)t={update:Q_(n,e.key,e.data),updateMask:mE(e.fieldMask)};else{if(!(e instanceof W_))return nt();t={verify:jf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Ud)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Xl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ec)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Bd)return{fieldPath:u.field.canonicalString(),increment:d.k};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:hC(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:nt()),t;var o}function pE(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?ur.updateTime(qn(o.updateTime)):void 0!==o.exists?ur.exists(o.exists):ur.none():ur.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(wt("REQUEST_TIME"===d.setToServerValue),m=new Ud):"appendMissingElements"in d?m=new Xl(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new ec(d.removeAllFromArray.values||[]):"increment"in d?m=new Bd(u,d.increment):nt();const E=Wr.fromServerFormat(d.fieldPath);return new Ff(E,m)}(n,o)):[];var o;if(e.update){const o=Qo(n,e.update.name),u=new Ci({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Wo((e.updateMask.fieldPaths||[]).map(D=>Wr.fromServerFormat(D)));return new Ou(o,u,d,t,r)}return new jd(o,u,t,r)}if(e.delete){const o=Qo(n,e.delete);return new vo(o,t)}if(e.verify){const o=Qo(n,e.verify);return new W_(o,t)}return nt()}function J_(n,e){return{documents:[tm(n,e.path)]}}function $f(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=tm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=tm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const D=E.map(M=>function(R){if("=="===R.op){if(M_(R.value))return{unaryFilter:{field:Zd(R.field),op:"IS_NAN"}};if(xf(R.value))return{unaryFilter:{field:Zd(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(M_(R.value))return{unaryFilter:{field:Zd(R.field),op:"IS_NOT_NAN"}};if(xf(R.value))return{unaryFilter:{field:Zd(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zd(R.field),op:gC(R.op),value:R.value}}}(M));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(E){if(0!==E.length)return E.map(D=>{return{field:Zd((M=D).field),direction:Hf(M.dir)};var M})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(D=e.limit,n.N||Su(D)?D:{value:D});var D,m,E;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function gE(n){let e=Y_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){wt(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let u=[];t.where&&(u=X_(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(M=>{return new Ld(Kd((R=M).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let m=null;t.limit&&(m=function(M){let R;return R="object"==typeof M?M.value:M,Su(R)?null:R}(t.limit));let E=null;var M;t.startAt&&(E=new Mu((M=t.startAt).values||[],!!M.before));let D=null;return t.endAt&&(D=function(M){return new Mu(M.values||[],!M.before)}(t.endAt)),Ww(e,o,d,u,m,"F",E,D)}function X_(n){return n?void 0!==n.unaryFilter?[yC(n)]:void 0!==n.fieldFilter?[mC(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>X_(e)).reduce((e,t)=>e.concat(t)):nt():[]}function Hf(n){return dC[n]}function gC(n){return em[n]}function Zd(n){return{fieldPath:n.canonicalString()}}function Kd(n){return Wr.fromServerFormat(n.fieldPath)}function mC(n){return Ir.create(Kd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function yC(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Kd(n.unaryFilter.field);return Ir.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Kd(n.unaryFilter.field);return Ir.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Kd(n.unaryFilter.field);return Ir.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Kd(n.unaryFilter.field);return Ir.create(o,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function mE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Di(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_E(e)),e=Yd(n.get(t),e);return _E(e)}function Yd(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function _E(n){return n+"\x01\x01"}function wo(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Gt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&nt(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let E;0===o.length?E=m:(o+=m,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:nt()}u=d+2}return new Gt(r)}const vE=["userId","batchId"];function Gf(n,e){return[n,Di(e)]}function wE(n,e,t){return[n,Di(e),t]}const EE={},_C=["prefixPath","collectionGroup","readTime","documentId"],ev=["prefixPath","collectionGroup","documentId"],vC=["collectionGroup","readTime","prefixPath","documentId"],IE=["canonicalId","targetId"],bE=["targetId","path"],wC=["path","targetId"],EC=["collectionId","parent"],IC=["indexId","uid"],tv=["uid","sequenceNumber"],bC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],CE=["indexId","uid","orderedDocumentKey"],CC=["userId","collectionPath","documentId"],DC=["userId","collectionPath","largestBatchId"],TC=["userId","collectionGroup","largestBatchId"],DE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],AC=[...DE,"documentOverlays"],TE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],SC=[...TE,"indexConfiguration","indexState","indexEntries"],AE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},E=>r(E))}),d=!0,u===o&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(o=>o?de.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class rm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Er,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new qf(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=sm(r.target.error);this.At.reject(new qf(e,o))}}static open(e,t,r,o){try{return new rm(t,e.transaction(o,r))}catch(u){throw new qf(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new xC(t)}}class Eo{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Eo.Vt((0,Bt.z$)())&&wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),Ma(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Bt.hl)())return!1;if(Eo.St())return!0;const e=(0,Bt.z$)(),t=Eo.Vt(e),r=0<t&&t<10,o=Eo.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new qf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new xe(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new qf(e,m))},u.onupgradeneeded=d=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.bt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ye.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const E=rm.open(u.db,e,d?"readonly":"readwrite",r),D=o(E).next(M=>(E.Pt(),M)).catch(M=>(E.abort(M),de.reject(M))).toPromise();return D.catch(()=>{}),yield E.Rt,D}catch(E){const D="FirebaseError"!==E.name&&m<3;if(Re("SimpleDb","Transaction failed with error:",E.message,"Retrying:",D),u.close(),!D)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class SE{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Ma(this.Ft.delete())}}class qf extends xe{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function nc(n){return"IndexedDbTransactionError"===n.name}class xC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ma(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),Ma(this.store.add(e))}get(e){return Ma(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),Ma(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),Ma(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new de((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new de((r,o)=>{t.onerror=u=>{const d=sm(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new de((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const E=new SE(m),D=t(m.primaryKey,m.value,E);if(D instanceof de){const M=D.catch(R=>(E.done(),de.reject(R)));r.push(M)}E.isDone?o():null===E.Lt?m.continue():m.continue(E.Lt)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ma(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=sm(r.target.error);t(o)}})}let im=!1;function sm(n){const e=Eo.Vt((0,Bt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return im||(im=!0,setTimeout(()=>{throw r},0)),r}}return n}class om extends nv{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Pr(n,e){const t=We(n);return Eo.xt(t.Ht,e)}class rv{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&tE(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Yg(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Yg(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(yt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&Od(this.mutations,e.mutations,(t,r)=>$_(t,r))&&Od(this.baseMutations,e.baseMutations,(t,r)=>$_(t,r))}}class zf{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){wt(e.mutations.length===r.length);let o=NT;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new zf(e,t,r,o)}}class iv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Oa{constructor(e,t,r,o,u=yt.min(),d=yt.min(),m=Qn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Oa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class xE{constructor(e){this.Jt=e}}function OE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Wf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:jf(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:zd(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Qd(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:Qd(e.version)}}var o,u;return r}function Wf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Qd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rc(n){const e=new Hn(n.seconds,n.nanoseconds);return yt.fromTimestamp(e)}function Ra(n,e){const t=(e.baseMutations||[]).map(u=>pE(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>pE(n.Jt,u)),o=Hn.fromMillis(e.localWriteTimeMs);return new rv(e.batchId,o,t,r)}function Zf(n){const e=rc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?rc(n.lastLimboFreeSnapshotVersion):yt.min();let r;var o;return void 0!==n.query.documents?(wt(1===(o=n.query).documents.length),r=ls(Yl(Y_(o.documents[0])))):r=ls(gE(n.query)),new Oa(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Qn.fromBase64String(n.resumeToken))}function ic(n,e){const t=Qd(e.snapshotVersion),r=Qd(e.lastLimboFreeSnapshotVersion);let o;o=jg(e.target)?J_(n.Jt,e.target):$f(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Kl(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function sc(n){const e=gE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?qg(e,e.limit,"L"):e}function sv(n,e){return new iv(e.largestBatchId,pE(n.Jt,e.overlayMutation))}function MC(n,e){const t=e.path.lastSegment();return[n,Di(e.path.popLast()),t]}class RE{getBundleMetadata(e,t){return PE(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:rc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return PE(e).put({bundleId:(r=t).id,createTime:Qd(qn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return NE(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:sc(o.bundledQuery),readTime:rc(o.readTime)};var o})}saveNamedQuery(e,t){return NE(e).put({name:(r=t).name,readTime:Qd(qn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function PE(n){return Pr(n,"bundles")}function NE(n){return Pr(n,"namedQueries")}class ov{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new ov(e,t.uid||"")}getOverlay(e,t){return Kf(e).get(MC(this.userId,t)).next(r=>r?sv(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new iv(t,d);o.push(this.Xt(e,m))}),de.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Di(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(Kf(e).Qt("collectionPathOverlayIndex",m))}),de.waitFor(u)}getOverlaysForCollection(e,t,r){const o=mn(),u=Di(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Kf(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const E of m){const D=sv(this.M,E);o.set(D.getKey(),D)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=mn();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Kf(e).Wt({index:"collectionGroupOverlayIndex",range:m},(E,D,M)=>{const R=sv(this.M,D);u.size()<o||R.largestBatchId===d?(u.set(R.getKey(),R),d=R.largestBatchId):M.done()}).next(()=>u)}Xt(e,t){return Kf(e).put(function(r,o,u){const[d,m,E]=MC(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:E,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:nm(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Kf(n){return Pr(n,"documentOverlays")}class Ru{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Cn(e.integerValue));else if("doubleValue"in e){const r=Cn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Rd(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Zo(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?O_(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):nt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Be.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function kE(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function am(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=kE(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Ru.fe=new Ru;class um{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=am(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=am(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Yf{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class OC{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Jd{constructor(){this.De=new um,this.Ce=new Yf(this.De),this.xe=new OC(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Pa{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Pa(this.indexId,this.documentKey,this.arrayValue,r)}}function oc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=FE(n.arrayValue,e.arrayValue),0!==t?t:(t=FE(n.directionalValue,e.directionalValue),0!==t?t:Be.comparator(n.documentKey,e.documentKey)))}function FE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class av{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=N_(e);if(void 0!==t&&!this.Be(t))return!1;const r=Tn(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class RC{constructor(){this.qe=new LE}addToCollectionParentIndex(e,t){return this.qe.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getFieldIndex(e,t){return de.resolve(null)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class LE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Sn(Gt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Sn(Gt.comparator)).toArray()}}const Xd=new Uint8Array(0);class PC{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new LE,this.Ge=new xa(r=>Kl(r),(r,o)=>Fd(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Di(o)};return ac(e).put(u)}return de.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[kw(t),""],!1,!0);return ac(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(wo(d.parent))}return r})}addFieldIndex(e,t){const r=Na(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Na(e),o=uv(e),u=eh(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=eh(e);let o=!0;const u=new Map;return de.forEach(this.Qe(t),d=>this.getFieldIndex(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=un();const m=[];return de.forEach(u,(E,D)=>{var M;Re("IndexedDbIndexManager",`Using index ${M=E,`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(Yt=>`${Yt.fieldPath}:${Yt.kind}`).join(",")}`} to execute ${Kl(t)}`);const R=function(Yt,Pt){const Zt=N_(Pt);if(void 0===Zt)return null;for(const dn of Nf(Yt,Zt.fieldPath))switch(dn.op){case"array-contains-any":return dn.value.arrayValue.values||[];case"array-contains":return[dn.value]}return null}(D,E),H=function(Yt,Pt){const Zt=new Map;for(const dn of Tn(Pt))for(const Hi of Nf(Yt,dn.fieldPath))switch(Hi.op){case"==":case"in":Zt.set(dn.fieldPath.canonicalString(),Hi.value);break;case"not-in":case"!=":return Zt.set(dn.fieldPath.canonicalString(),Hi.value),Array.from(Zt.values())}return null}(D,E),Y=function(Yt,Pt){const Zt=[];let dn=!0;for(const Hi of Tn(Pt)){const xp=0===Hi.kind?eC(Yt,Hi.fieldPath,Yt.startAt):k_(Yt,Hi.fieldPath,Yt.startAt);if(!xp.value)return null;Zt.push(xp.value),dn&&(dn=xp.inclusive)}return new Mu(Zt,dn)}(D,E),le=function(Yt,Pt){const Zt=[];let dn=!0;for(const Hi of Tn(Pt)){const xp=0===Hi.kind?k_(Yt,Hi.fieldPath,Yt.endAt):eC(Yt,Hi.fieldPath,Yt.endAt);if(!xp.value)return null;Zt.push(xp.value),dn&&(dn=xp.inclusive)}return new Mu(Zt,dn)}(D,E),Fe=this.je(E,D,Y),st=this.je(E,D,le),zt=this.We(E,D,H),Wt=this.ze(E.indexId,R,Fe,!!Y&&Y.inclusive,st,!!le&&le.inclusive,zt);return de.forEach(Wt,Yt=>r.Gt(Yt,t.limit).next(Pt=>{Pt.forEach(Zt=>{const dn=Be.fromSegments(Zt.documentKey);d.has(dn)||(d=d.add(dn),m.push(dn))})}))}).next(()=>m)}return de.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,o,u,d,m){const E=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),D=E/(null!=t?t.length:1),M=[];for(let R=0;R<E;++R){const H=t?this.He(t[R/D]):Xd,Y=r?this.Je(e,H,r[R%D],o):this.Ye(e),le=u?this.Xe(e,H,u[R%D],d):this.Ye(e+1);M.push(...this.createRange(Y,le,m.map(Fe=>this.Je(e,H,Fe,!0))))}return M}Je(e,t,r,o){const u=new Pa(e,Be.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new Pa(e,Be.empty(),t,r);return o?u.ke():u}Ye(e){return new Pa(e,Be.empty(),Xd,Xd)}getFieldIndex(e,t){const r=new av(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{const d=u.filter(m=>r.$e(m));return d.sort((m,E)=>E.fields.length-m.fields.length),d.length>0?d[0]:null})}Ze(e,t){const r=new Jd;for(const o of Tn(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);Ru.fe.Zt(u,d)}return r.Se()}He(e){const t=new Jd;return Ru.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Jd;return Ru.fe.Zt(Wl(this.databaseId,t),r.Ne(function(o){const u=Tn(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new Jd);let u=0;for(const d of Tn(e)){const m=r[u++];for(const E of o)if(this.en(t,d.fieldPath)&&Nd(m))o=this.nn(o,d,m);else{const D=E.Ne(d.kind);Ru.fe.Zt(m,D)}}return this.sn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const E=new Jd;E.seed(m.Se()),Ru.fe.Zt(d,E.Ne(t.kind)),u.push(E)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Ir&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Na(e),o=uv(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return de.forEach(u,m=>o.get([m.indexId,this.uid]).next(E=>{d.push(function(D,M){const R=M?new Pf(M.sequenceNumber,new Sa(rc(M.readTime),new Be(wo(M.documentKey)),M.largestBatchId)):Pf.empty(),H=D.fields.map(([Y,le])=>new Rf(Wr.fromServerFormat(Y),le));return new Of(D.indexId,D.collectionGroup,H,R)}(m,E))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Mt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Na(e),u=uv(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>de.forEach(m,E=>{return u.put({indexId:E.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Qd((H=r).readTime),documentKey:Di(H.documentKey.path),largestBatchId:H.largestBatchId});var H})))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?de.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),de.forEach(m,E=>this.on(e,o,E).next(D=>{const M=this.un(u,E);return D.isEqual(M)?de.resolve():this.an(e,u,E,D,M)}))))})}cn(e,t,r,o){return eh(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return eh(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=eh(e);let u=new Sn(oc);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{u=u.add(new Pa(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new Sn(oc);const o=this.Ze(t,e);if(null==o)return r;const u=N_(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Nd(d))for(const m of d.arrayValue.values||[])r=r.add(new Pa(t.indexId,e.key,this.He(m),o))}else r=r.add(new Pa(t.indexId,e.key,Xd,o));return r}an(e,t,r,o,u){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,E,D,M,R){const H=m.getIterator(),Y=E.getIterator();let le=$d(H),Fe=$d(Y);for(;le||Fe;){let st=!1,zt=!1;if(le&&Fe){const Wt=D(le,Fe);Wt<0?zt=!0:Wt>0&&(st=!0)}else null!=le?zt=!0:st=!0;st?(M(Fe),Fe=$d(Y)):zt?(R(le),le=$d(H)):(le=$d(H),Fe=$d(Y))}}(o,u,oc,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),de.waitFor(d)}rn(e){let t=1;return uv(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>oc(d,m)).filter((d,m,E)=>!m||0!==oc(d,E[m-1]));const o=[];o.push(e);for(const d of r){const m=oc(d,e),E=oc(d,t);if(0===m)o[0]=e.ke();else if(m>0&&E<0)o.push(d),o.push(d.ke());else if(E>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Xd,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Xd,[]]));return u}}function ac(n){return Pr(n,"collectionParents")}function eh(n){return Pr(n,"indexEntries")}function Na(n){return Pr(n,"indexConfiguration")}function uv(n){return Pr(n,"indexState")}const lv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ji{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ji(e,ji.DEFAULT_COLLECTION_PERCENTILE,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function NC(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const E=r.Wt({range:d},(M,R,H)=>(m++,H.delete()));u.push(E.next(()=>{wt(1===m)}));const D=[];for(const M of t.mutations){const R=wE(e,M.key.path,t.batchId);u.push(o.delete(R)),D.push(M.key)}return de.waitFor(u).next(()=>D)}function Qf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}ji.DEFAULT_COLLECTION_PERCENTILE=10,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ji.DEFAULT=new ji(41943040,ji.DEFAULT_COLLECTION_PERCENTILE,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ji.DISABLED=new ji(-1,0,0);class VE{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){wt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new VE(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jo(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=th(e),d=Jo(e);return d.add({}).next(m=>{wt("number"==typeof m);const E=new rv(m,t,r,o),D=function(H,Y,le){const Fe=le.baseMutations.map(zt=>nm(H.Jt,zt)),st=le.mutations.map(zt=>nm(H.Jt,zt));return{userId:Y,batchId:le.batchId,localWriteTimeMs:le.localWriteTime.toMillis(),baseMutations:Fe,mutations:st}}(this.M,this.userId,E),M=[];let R=new Sn((H,Y)=>Mt(H.canonicalString(),Y.canonicalString()));for(const H of o){const Y=wE(this.userId,H.key.path,m);R=R.add(H.key.path.popLast()),M.push(d.put(D)),M.push(u.put(Y,EE))}return R.forEach(H=>{M.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.ln[m]=E.keys()}),de.waitFor(M).next(()=>E)})}lookupMutationBatch(e,t){return Jo(e).get(t).next(r=>r?(wt(r.userId===this.userId),Ra(this.M,r)):null)}fn(e,t){return this.ln[t]?de.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Jo(e).Wt({index:"userMutationsIndex",range:o},(d,m,E)=>{m.userId===this.userId&&(wt(m.batchId>=r),u=Ra(this.M,m)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Jo(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jo(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Ra(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Gf(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return th(e).Wt({range:o},(d,m,E)=>{const[D,M,R]=d,H=wo(M);if(D===this.userId&&t.path.isEqual(H))return Jo(e).get(R).next(Y=>{if(!Y)throw nt();wt(Y.userId===this.userId),u.push(Ra(this.M,Y))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Sn(Mt);const o=[];return t.forEach(u=>{const d=Gf(this.userId,u.path),m=IDBKeyRange.lowerBound(d),E=th(e).Wt({range:m},(D,M,R)=>{const[H,Y,le]=D,Fe=wo(Y);H===this.userId&&u.path.isEqual(Fe)?r=r.add(le):R.done()});o.push(E)}),de.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Gf(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new Sn(Mt);return th(e).Wt({range:d},(E,D,M)=>{const[R,H,Y]=E,le=wo(H);R===this.userId&&r.isPrefixOf(le)?le.length===o&&(m=m.add(Y)):M.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Jo(e).get(u).next(d=>{if(null===d)throw nt();wt(d.userId===this.userId),r.push(Ra(this.M,d))}))}),de.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return NC(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),de.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return th(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const E=wo(u[1]);o.push(E)}else m.done()}).next(()=>{wt(0===o.length)})})}containsKey(e,t){return cv(e,this.userId,t)}wn(e){return UE(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function cv(n,e,t){const r=Gf(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return th(n).Wt({range:u,jt:!0},(m,E,D)=>{const[M,R,H]=m;M===e&&R===o&&(d=!0),D.done()}).next(()=>d)}function Jo(n){return Pr(n,"mutations")}function th(n){return Pr(n,"documentMutations")}function UE(n){return Pr(n,"mutationQueues")}class uc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new uc(0)}static yn(){return new uc(-1)}}class kC{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new uc(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>yt.fromTimestamp(new Hn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>nh(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return nh(e).Wt((d,m)=>{const E=Zf(m);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>de.waitFor(u)).next(()=>o)}forEachTarget(e,t){return nh(e).Wt((r,o)=>{const u=Zf(o);t(u)})}pn(e){return BE(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}In(e,t){return BE(e).put("targetGlobalKey",t)}Tn(e,t){return nh(e).put(ic(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Kl(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return nh(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,E)=>{const D=Zf(m);Fd(t,D.target)&&(u=D,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Pu(e);return t.forEach(d=>{const m=Di(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),de.waitFor(o)}removeMatchingKeys(e,t,r){const o=Pu(e);return de.forEach(t,u=>{const d=Di(u.path);return de.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Pu(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Pu(e);let u=un();return o.Wt({range:r,jt:!0},(d,m,E)=>{const D=wo(d[1]),M=new Be(D);u=u.add(M)}).next(()=>u)}containsKey(e,t){const r=Di(t.path),o=IDBKeyRange.bound([r],[kw(r)],!1,!0);let u=0;return Pu(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],E,D)=>{0!==d&&(u++,D.done())}).next(()=>u>0)}Et(e,t){return nh(e).get(t).next(r=>r?Zf(r):null)}}function nh(n){return Pr(n,"targets")}function BE(n){return Pr(n,"targetGlobal")}function Pu(n){return Pr(n,"targetDocuments")}function lc(n){return dv.apply(this,arguments)}function dv(){return dv=(0,ye.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==AE)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),dv.apply(this,arguments)}function jE([n,e],[t,r]){const o=Mt(n,t);return 0===o?Mt(e,r):o}class Jf{constructor(e){this.An=e,this.buffer=new Sn(jE),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();jE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $E{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Re("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){nc(o)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield lc(o)}yield t.Sn(e)}))}}class HE{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(Bi.A);const r=new Jf(t);return this.Dn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(lv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lv):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,m,E,D;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,d=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(D=Date.now(),Ng()<=mu.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-M}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(E-m)+`ms\n\tRemoved ${R} documents in `+(D-E)+`ms\nTotal Duration: ${D-M}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}class GE{constructor(e,t){this.db=e,this.garbageCollector=new HE(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return Xf(e,r)}removeReference(e,t,r){return Xf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Xf(e,t)}On(e,t){return function(r,o){let u=!1;return UE(r).zt(d=>cv(r,d,o).next(m=>(m&&(u=!0),de.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,m)=>{if(m<=t){const E=this.On(e,d).next(D=>{if(!D)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,yt.min()),Pu(e).delete([0,Di(d.path)])))});o.push(E)}}).next(()=>de.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Xf(e,t)}Mn(e,t){const r=Pu(e);let o,u=Bi.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:E,sequenceNumber:D})=>{0===d?(u!==Bi.A&&t(new Be(wo(o)),u),u=D,o=E):u=Bi.A}).next(()=>{u!==Bi.A&&t(new Be(wo(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Xf(n,e){return Pu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Di(e.path),sequenceNumber:r}));var r}class hv{constructor(){this.changes=new xa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class FC{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return cc(e).put(r)}removeEntry(e,t,r){return cc(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Wf(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Dn.newInvalidDocument(t);return cc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ep(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Dn.newInvalidDocument(t)};return cc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ep(t))},(o,u)=>{r={document:this.$n(t,u),size:Qf(u)}}).next(()=>r)}getEntries(e,t){let r=js();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=js(),o=new Gn(Be.comparator);return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);r=r.insert(u,m),o=o.insert(u,Qf(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return de.resolve();let o=new Sn(WE);t.forEach(E=>o=o.add(E));const u=IDBKeyRange.bound(ep(o.first()),ep(o.last())),d=o.getIterator();let m=d.getNext();return cc(e).Wt({index:"documentKeyIndex",range:u},(E,D,M)=>{const R=Be.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;m&&WE(m,R)<0;)r(m,null),m=d.getNext();m&&m.isEqual(R)&&(r(m,D),m=d.hasNext()?d.getNext():null),m?M.Ut(ep(m)):M.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Wf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cc(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=js();for(const E of d){const D=this.$n(Be.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);m=m.insert(D.key,D)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=js();const d=zE(t,r),m=zE(t,Sa.max());return cc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(E,D,M)=>{const R=this.$n(Be.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(R.key,R),u.size===o&&M.done()}).next(()=>u)}newChangeBuffer(e){return new LC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qE(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Fn(e,t){return qE(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function ME(n,e){let t;if(e.document)t=fE(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),o=rc(e.noDocument.readTime);t=Dn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=Be.fromSegments(e.unknownDocument.path),o=rc(e.unknownDocument.version);t=Dn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Hn(r[0],r[1]);return yt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(yt.min()))return r}return Dn.newInvalidDocument(e)}}class LC extends hv{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new xa(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Sn((u,d)=>Mt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const E=OE(this.Kn.M,d);o=o.add(u.path.popLast()),r+=Qf(E)-m.size,t.push(this.Kn.addEntry(e,u,E))}else if(r-=m.size,this.trackRemovals){const E=OE(this.Kn.M,d.convertToNoDocument(yt.min()));t.push(this.Kn.addEntry(e,u,E))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function qE(n){return Pr(n,"remoteDocumentGlobal")}function cc(n){return Pr(n,"remoteDocumentsV14")}function ep(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function zE(n,e){const t=e.documentKey.path.toArray();return[n,Wf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function WE(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Mt(t[u],r[u]),o)return o;return o=Mt(t.length,r.length),o||(o=Mt(t[t.length-2],r[r.length-2]),o||Mt(t[t.length-1],r[r.length-1]))}class tp{constructor(e){this.M=e}kt(e,t,r,o){const u=new rm("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vE,{unique:!0}),m.createObjectStore("documentMutations"),ZE(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=de.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),ZE(e)),d=d.next(()=>function(m){const E=m.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",D)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,E){return E.store("mutations").qt().next(D=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vE,{unique:!0});const M=E.store("mutations"),R=D.map(H=>M.put(H));return de.waitFor(R)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const E=m.createObjectStore("documentOverlays",{keyPath:CC});E.createIndex("collectionPathOverlayIndex",DC,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",TC,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const E=m.createObjectStore("remoteDocumentsV14",{keyPath:_C});E.createIndex("documentKeyIndex",ev),E.createIndex("collectionGroupIndex",vC)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:IC}).createIndex("sequenceNumberIndex",tv,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:bC}).createIndex("documentKeyIndex",CE,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=Qf(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>de.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>de.forEach(m,E=>{wt(E.userId===u.userId);const D=Ra(this.M,E);return NC(e,u.userId,D).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,m)=>{const E=new Gt(d),D=[0,Di(E)];u.push(t.get(D).next(M=>M?de.resolve():t.put({targetId:0,path:Di(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>de.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:EC});const r=t.store("collectionParents"),o=new LE,u=d=>{if(o.add(d)){const m=d.lastSegment(),E=d.popLast();return r.put({collectionId:m,parent:Di(E)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const E=new Gt(d);return u(E.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,E],D)=>{const M=wo(m);return u(M.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=Zf(o),d=ic(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),E=(D=d,D.document?new Be(Gt.fromString(D.document.name).popFirst(5)):D.noDocument?Be.fromSegments(D.noDocument.path):D.unknownDocument?Be.fromSegments(D.unknownDocument.path):nt()).path.toArray();var D;const M={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(M))}).next(()=>de.waitFor(o))}}function ZE(n){n.createObjectStore("targetDocuments",{keyPath:bE}).createIndex("documentTargetsIndex",wC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",IE,{unique:!0}),n.createObjectStore("targetGlobal")}const np="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $s{constructor(e,t,r,o,u,d,m,E,D,M,R=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=m,this.Xn=D,this.Zn=M,this.ts=R,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=H=>Promise.resolve(),!$s.vt())throw new xe(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new GE(this,o),this.hs=t+"main",this.M=new xE(E),this.ls=new Eo(this.hs,this.ts,new tp(this.M)),this.fs=new kC(this.referenceDelegate,this.M),this.ds=new FC(this.M),this._s=new RE,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===M&&wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ae.FAILED_PRECONDITION,np);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Bi(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,ye.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(nc(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return rp(e).get("owner").next(t=>de.resolve(this.bs(t)))}Vs(e){return rh(e).delete(this.clientId)}vs(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Pr(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),m=u.filter(E=>-1===d.indexOf(E));return de.forEach(m,E=>o.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?de.resolve(!0):rp(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new xe(ae.FAILED_PRECONDITION,np);return!1}}return!(!this.networkEnabled||!this.inForeground)||rh(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new om(t,Bi.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>rh(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return VE.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new PC(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return ov.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?SC:13===d?TE:12===d?AC:11===d?DE:void nt();var d;let m;return this.ls.runTransaction(e,o,u,E=>(m=new om(E,this.es?this.es.next():Bi.A),"readwrite-primary"===t?this.Es(m).next(D=>!!D||this.As(m)).next(D=>{if(!D)throw wr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new xe(ae.FAILED_PRECONDITION,AE);return r(m)}).next(D=>this.Ps(m).next(()=>D)):this.$s(m).next(()=>r(m)))).then(E=>(m.raiseOnCommittedEvent(),E))}$s(e){return rp(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ae.FAILED_PRECONDITION,np)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rp(e).put("owner",t)}static vt(){return Eo.vt()}Rs(e){const t=rp(e);return t.get("owner").next(r=>this.bs(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(wr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Bt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return wr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){wr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rp(n){return Pr(n,"owner")}function rh(n){return Pr(n,"clientMetadata")}function dc(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class VC{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Be.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):F_(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new Be(t)).next(r=>{let o=Hd();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=Hd();return this.indexManager.getCollectionParents(e,o).next(d=>de.forEach(d,m=>{const E=(D=t,M=m.child(o),new us(M,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,M;return this.zs(e,E,r).next(D=>{D.forEach((M,R)=>{u=u.insert(M,R)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const E=m.key;let D=o.get(E);null==D&&(D=Dn.newInvalidDocument(E),o=o.insert(E,D)),Yg(m,D,d.localWriteTime),D.isFoundDocument()||(o=o.remove(E))}}).next(()=>(o.forEach((u,d)=>{Wg(t,d)||(o=o.remove(u))}),o))}}class fv{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=un(),o=un();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new fv(e,t.fromCache,r,o)}}class KE{Xs(e){this.Zs=e}Qs(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(yt.min())?this.ti(e,t):this.Zs.Ks(e,o).next(u=>{const d=this.ei(t,u);return(Hg(t)||kf(t))&&this.ni(t.limitType,d,o,r)?this.ti(e,t):(Ng()<=mu.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zg(t)),this.Zs.Qs(e,t,Bw(r,-1)).next(m=>(d.forEach(E=>{m=m.insert(E.key,E)}),m)))});var u}ei(e,t){let r=new Sn(U_(e));return t.forEach((o,u)=>{Wg(e,u)&&(r=r.add(u))}),r}ni(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ti(e,t){return Ng()<=mu.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",zg(t)),this.Zs.Qs(e,t,Sa.min())}}class lm{constructor(e,t,r,o){this.persistence=e,this.si=t,this.M=o,this.ii=new Gn(Mt),this.ri=new xa(u=>Kl(u),Fd),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new VC(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function ip(n,e,t,r){return new lm(n,e,t,r)}function YE(n,e){return pv.apply(this,arguments)}function pv(){return pv=(0,ye.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.ai(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let E=un();for(const D of o){d.push(D.batchId);for(const M of D.mutations)E=E.add(M.key)}for(const D of u){m.push(D.batchId);for(const M of D.mutations)E=E.add(M.key)}return t.ci.Ks(r,E).next(D=>({hi:D,removedBatchIds:d,addedBatchIds:m}))})})}),pv.apply(this,arguments)}function QE(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.ui.newChangeBuffer({trackRemovals:!0});return function(d,m,E,D){const M=E.batch,R=M.keys();let H=de.resolve();return R.forEach(Y=>{H=H.next(()=>D.getEntry(m,Y)).next(le=>{const Fe=E.docVersions.get(Y);wt(null!==Fe),le.version.compareTo(Fe)<0&&(M.applyToRemoteDocument(le,E),le.isValidDocument()&&(le.setReadTime(E.commitVersion),D.addEntry(le)))})}),H.next(()=>d.Bs.removeMutationBatch(m,M))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,o))})}function gv(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function mv(n,e){const t=We(n),r=e.snapshotVersion;let o=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.ui.newChangeBuffer({trackRemovals:!0});o=t.ii;const m=[];e.targetChanges.forEach((D,M)=>{const R=o.get(M);if(!R)return;m.push(t.fs.removeMatchingKeys(u,D.removedDocuments,M).next(()=>t.fs.addMatchingKeys(u,D.addedDocuments,M)));let H=R.withSequenceNumber(u.currentSequenceNumber);var Y,le,Fe;e.targetMismatches.has(M)?H=H.withResumeToken(Qn.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):D.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(D.resumeToken,r)),o=o.insert(M,H),le=H,Fe=D,(0===(Y=R).resumeToken.approximateByteSize()||le.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=3e8||Fe.addedDocuments.size+Fe.modifiedDocuments.size+Fe.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,H))});let E=js();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,D))}),m.push(yv(u,d,e.documentUpdates).next(D=>{E=D})),!r.isEqual(yt.min())){const D=t.fs.getLastRemoteSnapshotVersion(u).next(M=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(D)}return de.waitFor(m).next(()=>d.apply(u)).next(()=>t.ci.Gs(u,E)).next(()=>E)}).then(u=>(t.ii=o,u))}function yv(n,e,t){let r=un();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=js();return t.forEach((d,m)=>{const E=o.get(d);m.isNoDocument()&&m.version.isEqual(yt.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!E.isValidDocument()||m.version.compareTo(E.version)>0||0===m.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):Re("LocalStore","Ignoring outdated watch update for ",d,". Current version:",E.version," Watch version:",m.version)}),u})}function UC(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function ih(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,de.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new Oa(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ii.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function sp(n,e,t){return op.apply(this,arguments)}function op(){return op=(0,ye.Z)(function*(n,e,t){const r=We(n),o=r.ii.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!nc(d))throw d;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ii=r.ii.remove(e),r.ri.delete(o.target)}),op.apply(this,arguments)}function sh(n,e,t){const r=We(n);let o=yt.min(),u=un();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,E,D){const M=We(m),R=M.ri.get(D);return void 0!==R?de.resolve(M.ii.get(R)):M.fs.getTargetData(E,D)}(r,d,ls(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(E=>{u=E})}).next(()=>r.si.Qs(d,e,t?o:yt.min(),t?u:un())).next(m=>(dm(r,V_(e),m),{documents:m,li:u})))}function _v(n,e){const t=We(n),r=We(t.fs),o=t.ii.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function cm(n,e){const t=We(n),r=t.oi.get(e)||yt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ui.getAllFromCollectionGroup(o,e,Bw(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(dm(t,e,o),o))}function dm(n,e,t){let r=yt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.oi.set(e,r)}function vv(){return vv=(0,ye.Z)(function*(n,e,t,r){const o=We(n);let u=un(),d=js();for(const D of t){const M=e.fi(D.metadata.name);D.document&&(u=u.add(M));const R=e.di(D);R.setReadTime(e._i(D.metadata.readTime)),d=d.insert(M,R)}const m=o.ui.newChangeBuffer({trackRemovals:!0}),E=yield ih(o,(D=r,ls(Yl(Gt.fromString(`__bundle__/docs/${D}`)))));var D;return o.persistence.runTransaction("Apply bundle documents","readwrite",D=>yv(D,m,d).next(M=>(m.apply(D),M)).next(M=>o.fs.removeMatchingKeysForTargetId(D,E.targetId).next(()=>o.fs.addMatchingKeys(D,u,E.targetId)).next(()=>o.ci.Gs(D,M)).next(()=>M)))}),vv.apply(this,arguments)}function jC(n,e){return wv.apply(this,arguments)}function wv(){return wv=(0,ye.Z)(function*(n,e,t=un()){const r=yield ih(n,ls(sc(e.bundledQuery))),o=We(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=qn(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(Qn.EMPTY_BYTE_STRING,d);return o.ii=o.ii.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),wv.apply(this,arguments)}class JE{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return de.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:qn(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:sc(r.bundledQuery),readTime:qn(r.readTime)}),de.resolve();var r}}class Ev{constructor(){this.overlays=new Gn(Be.comparator),this.gi=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.gi.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.gi.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const o=mn(),u=t.length+1,d=new Be(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const E=m.getNext().value,D=E.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&E.largestBatchId>r&&o.set(E.getKey(),E)}return de.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Gn((D,M)=>D-M);const d=this.overlays.getIterator();for(;d.hasNext();){const D=d.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let M=u.get(D.largestBatchId);null===M&&(M=mn(),u=u.insert(D.largestBatchId,M)),M.set(D.getKey(),D)}}const m=mn(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((D,M)=>m.set(D,M)),!(m.size()>=o)););return de.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.gi.get(o.largestBatchId).delete(r.key);this.gi.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new iv(t,r));let u=this.gi.get(t);void 0===u&&(u=un(),this.gi.set(t,u)),this.gi.set(t,u.add(r.key))}}class hm{constructor(){this.yi=new Sn(Nr.pi),this.Ii=new Sn(Nr.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new Nr(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new Nr(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new Be(new Gt([])),r=new Nr(t,e),o=new Nr(t,e+1),u=[];return this.Ii.forEachInRange([r,o],d=>{this.Ai(d),u.push(d.key)}),u}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Be(new Gt([])),r=new Nr(t,e),o=new Nr(t,e+1);let u=un();return this.Ii.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Nr(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Nr{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Be.comparator(e.key,t.key)||Mt(e.vi,t.vi)}static Ti(e,t){return Mt(e.vi,t.vi)||Be.comparator(e.key,t.key)}}class XE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new Sn(Nr.pi)}checkEmpty(e){return de.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.Si;this.Si++;const d=new rv(u,t,r,o);this.Bs.push(d);for(const m of o)this.Di=this.Di.add(new Nr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return de.resolve(d)}lookupMutationBatch(e,t){return de.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.xi(t+1),u=o<0?0:o;return de.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return de.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Nr(t,0),o=new Nr(t,Number.POSITIVE_INFINITY),u=[];return this.Di.forEachInRange([r,o],d=>{const m=this.Ci(d.vi);u.push(m)}),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Sn(Mt);return t.forEach(o=>{const u=new Nr(o,0),d=new Nr(o,Number.POSITIVE_INFINITY);this.Di.forEachInRange([u,d],m=>{r=r.add(m.vi)})}),de.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Be.isDocumentKey(u)||(u=u.child(""));const d=new Nr(new Be(u),0);let m=new Sn(Mt);return this.Di.forEachWhile(E=>{const D=E.key.path;return!!r.isPrefixOf(D)&&(D.length===o&&(m=m.add(E.vi)),!0)},d),de.resolve(this.Ni(m))}Ni(e){const t=[];return e.forEach(r=>{const o=this.Ci(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){wt(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return de.forEach(t.mutations,o=>{const u=new Nr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new Nr(t,0),o=this.Di.firstAfterOrEqual(r);return de.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return de.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class eI{constructor(e){this.Mi=e,this.docs=new Gn(Be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():Dn.newInvalidDocument(t))}getEntries(e,t){let r=js();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Dn.newInvalidDocument(o))}),de.resolve(r)}getAllFromCollection(e,t,r){let o=js();const u=new Be(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:E}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||$w(jw(E),r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return de.resolve(o)}getAllFromCollectionGroup(e,t,r,o){nt()}Oi(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $C(this)}getSize(e){return de.resolve(this.size)}}class $C extends hv{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class tI{constructor(e){this.persistence=e,this.Fi=new xa(t=>Kl(t),Fd),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new hm,this.targetCount=0,this.Li=uc.gn()}forEachTarget(e,t){return this.Fi.forEach((r,o)=>t(o)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),de.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new uc(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Tn(t),de.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Fi.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Fi.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),de.waitFor(u).next(()=>o)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),de.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.Bi.containsKey(t))}}class nI{constructor(e,t){this.Ui={},this.overlays={},this.es=new Bi(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new tI(this),this.indexManager=new RC,this.ds=new eI(r=>this.referenceDelegate.qi(r)),this.M=new xE(t),this._s=new JE(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ev,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new XE(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const o=new HC(this.es.next());return this.referenceDelegate.Ki(),r(o).next(u=>this.referenceDelegate.Gi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Qi(e,t){return de.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class HC extends nv{constructor(e){super(),this.currentSequenceNumber=e}}class fm{constructor(e){this.persistence=e,this.ji=new hm,this.Wi=null}static zi(e){return new fm(e)}get Hi(){if(this.Wi)return this.Wi;throw nt()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),de.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(o=>this.Hi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Hi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Hi,r=>{const o=Be.fromPath(r);return this.Ji(e,o).next(u=>{u||t.removeEntry(o,yt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return de.or([()=>de.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function rI(n,e){return`firestore_clients_${n}_${e}`}function oi(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Nu(n,e){return`firestore_targets_${n}_${e}`}class pm{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Yi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new pm(e,t,o.state,u):(wr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ap{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new ap(e,r.state,o):(wr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Iv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Vf();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=Vg(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new Iv(e,u):(wr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class hc{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new hc(t.clientId,t.onlineState):(wr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class bv{constructor(){this.activeTargetIds=Vf()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class up{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Gn(Mt),this.started=!1,this.rr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ur=rI(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new bv),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.er)continue;const u=e.getItem(rI(e.persistenceKey,o));if(u){const d=Iv.Yi(o,u);d&&(e.ir=e.ir.insert(d.clientId,d))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const o=e.mr(r);o&&e.gr(o)}for(const o of e.rr)e.sr(o);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Nu(this.persistenceKey,e));if(r){const o=ap.Yi(e,r);o&&(t=o.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Nu(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ir(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Pr(r.key);return t.br(o,null)}{const o=t.Vr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Sr(o)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(r.key===t.dr){if(null!==r.newValue){const o=t.mr(r.newValue);if(o)return t.gr(o)}}else if(r.key===t.ar){const o=function(u){let d=Bi.A;if(null!=u)try{const m=JSON.parse(u);wt("number"==typeof m),d=m}catch(m){wr("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==Bi.A&&t.sequenceNumberHandler(o)}else if(r.key===t._r){const o=t.Nr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.kr(u)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const o=new pm(this.currentUser,e,t,r),u=oi(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Xi())}Ir(e){const t=oi(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const o=Nu(this.persistenceKey,e),u=new ap(e,t,r);this.setItem(o,u.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return Iv.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return pm.Yi(new zr(void 0!==r[2]?r[2]:null),o,t)}Dr(e,t){const r=this.lr.exec(e),o=Number(r[1]);return ap.Yi(o,t)}mr(e){return hc.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),o=this.yr(this.ir),u=this.yr(r),d=[],m=[];return u.forEach(E=>{o.has(E)||d.push(E)}),o.forEach(E=>{u.has(E)||m.push(E)}),this.syncEngine.Fr(d,m).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=Vf();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class iI{constructor(){this.$r=new bv,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new bv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sI{Lr(e){}shutdown(){}}class oI{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const GC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Cv{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class aI extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,o,u){const d=this.uo(e,t);Re("RestConnection","Sending: ",d,r);const m={};return this.ao(m,o,u),this.co(e,d,m,r).then(E=>(Re("RestConnection","Received: ",E),E),E=>{throw Df("RestConnection",`${e} failed with error: `,E,"url: ",d,"request:",r),E})}ho(e,t,r,o,u){return this.oo(e,t,r,o,u)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ql,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}uo(e,t){return`${this.io}/v1/${t}:${GC[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,d)=>{const m=new Ow;m.listenOnce(Mw.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Rg.NO_ERROR:const D=m.getResponseJson();Re("Connection","XHR received:",JSON.stringify(D)),u(D);break;case Rg.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),d(new xe(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Rg.HTTP_ERROR:const M=m.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',M,"response text:",m.getResponseText()),M>0){const R=m.getResponseJson().error;if(R&&R.status&&R.message){const H=function(Y){const le=Y.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(le)>=0?le:ae.UNKNOWN}(R.status);d(new xe(H,R.message))}else d(new xe(ae.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new xe(ae.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);m.send(t,"POST",E,r,15)})}lo(e,t,r){const o=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Sw(),d=xw(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new Gb({})),this.ao(m.initMessageHeaders,t,r),(0,Bt.uI)()||(0,Bt.b$)()||(0,Bt.d)()||(0,Bt.w1)()||(0,Bt.Mn)()||(0,Bt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Re("Connection","Creating WebChannel: "+E,m);const D=u.createWebChannel(E,m);let M=!1,R=!1;const H=new Cv({Wr:le=>{R?Re("Connection","Not sending because WebChannel is closed:",le):(M||(Re("Connection","Opening WebChannel transport."),D.open(),M=!0),Re("Connection","WebChannel sending:",le),D.send(le))},zr:()=>D.close()}),Y=(le,Fe,st)=>{le.listen(Fe,zt=>{try{st(zt)}catch(Wt){setTimeout(()=>{throw Wt},0)}})};return Y(D,Pg.EventType.OPEN,()=>{R||Re("Connection","WebChannel transport opened.")}),Y(D,Pg.EventType.CLOSE,()=>{R||(R=!0,Re("Connection","WebChannel transport closed"),H.no())}),Y(D,Pg.EventType.ERROR,le=>{R||(R=!0,Df("Connection","WebChannel transport errored:",le),H.no(new xe(ae.UNAVAILABLE,"The operation could not be completed")))}),Y(D,Pg.EventType.MESSAGE,le=>{var Fe;if(!R){const st=le.data[0];wt(!!st);const zt=st,Wt=zt.error||(null===(Fe=zt[0])||void 0===Fe?void 0:Fe.error);if(Wt){Re("Connection","WebChannel received error:",Wt);const Yt=Wt.status;let Pt=function(dn){const Hi=An[dn];if(void 0!==Hi)return lC(Hi)}(Yt),Zt=Wt.message;void 0===Pt&&(Pt=ae.INTERNAL,Zt="Unknown error status: "+Yt+" with message "+Wt.message),R=!0,H.no(new xe(Pt,Zt)),D.close()}else Re("Connection","WebChannel received:",st),H.so(st)}}),Y(d,Hb.STAT_EVENT,le=>{le.stat===I_.PROXY?Re("Connection","Detected buffering proxy"):le.stat===I_.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.eo()},0),H}}function Dv(){return"undefined"!=typeof window?window:null}function fc(){return"undefined"!=typeof document?document:null}function pc(n){return new cE(n,!0)}class uI{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=o,this.wo=u,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),o=Math.max(0,t-r);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class Tv{constructor(e,t,r,o,u,d,m,E){this.Yn=e,this.Ro=r,this.Po=o,this.bo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=E,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new uI(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,ye.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,ye.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(wr(t.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Vo===t&&this.qo(r,o)},r=>{e(()=>{const o=new xe(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(o)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(o=>{r(()=>this.Ko(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}No(){var e=this;this.state=5,this.Do.To((0,ye.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qC extends Tv{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function kT(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:nt(),o=e.targetChange.targetIds||[],u=function(E,D){return E.N?(wt(void 0===D||"string"==typeof D),Qn.fromBase64String(D||"")):(wt(void 0===D||D instanceof Uint8Array),Qn.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(E){const D=void 0===E.code?ae.UNKNOWN:lC(E.code);return new xe(D,E.message||"")}(d);t=new oE(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Qo(n,r.document.name),u=qn(r.document.updateTime),d=new Ci({mapValue:{fields:r.document.fields}}),m=Dn.newFoundDocument(o,u,d);t=new Uf(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Qo(n,r.document),u=r.readTime?qn(r.readTime):yt.min(),d=Dn.newNoDocument(o,u);t=new Uf([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Qo(n,r.document);t=new Uf([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return nt();{const r=e.filter,u=new uC(r.count||0);t=new sE(r.targetId,u)}}var E;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return yt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?yt.min():u.readTime?qn(u.readTime):yt.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=Wd(this.M),t.addTarget=function(o,u){let d;const m=u.target;return d=jg(m)?{documents:J_(o,m)}:{query:$f(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=K_(o,u.resumeToken):u.snapshotVersion.compareTo(yt.min())>0&&(d.readTime=zd(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function pC(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Wd(this.M),t.removeTarget=e,this.Fo(t)}}class lI extends Tv{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function FT(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,o){let u=qn(r.updateTime?r.updateTime:o);return u.isEqual(yt.min())&&(u=qn(o)),new aC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=qn(e.commitTime);return this.listener.Yo(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Wd(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>nm(this.M,r))};this.Fo(t)}}class gm extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.tu=!1}eu(){if(this.tu)throw new xe(ae.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.oo(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ae.UNKNOWN,o.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ho(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ae.UNKNOWN,o.toString())})}terminate(){this.tu=!0}}class cI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(wr(t),this.iu=!1):Re("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class zC{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=u,this._u.Lr(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var E;ku(d)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,ye.Z)(function*(D){const M=We(D);M.fu.add(4),yield cp(M),M.wu.set("Unknown"),M.fu.delete(4),yield gc(M)}),function(D){return E.apply(this,arguments)})(d))}))}),this.wu=new cI(r,o)}}function gc(n){return lp.apply(this,arguments)}function lp(){return lp=(0,ye.Z)(function*(n){if(ku(n))for(const e of n.du)yield e(!0)}),lp.apply(this,arguments)}function cp(n){return Av.apply(this,arguments)}function Av(){return Av=(0,ye.Z)(function*(n){for(const e of n.du)yield e(!1)}),Av.apply(this,arguments)}function mm(n,e){const t=We(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),vm(t)?_m(t):uh(t).xo()&&ym(t,e))}function oh(n,e){const t=We(n),r=uh(t);t.lu.delete(e),r.xo()&&dI(t,e),0===t.lu.size&&(r.xo()?r.Mo():ku(t)&&t.wu.set("Unknown"))}function ym(n,e){n.mu.Z(e.targetId),uh(n).jo(e)}function dI(n,e){n.mu.Z(e),uh(n).Wo(e)}function _m(n){n.mu=new Bf({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),uh(n).start(),n.wu.ru()}function vm(n){return ku(n)&&!uh(n).Co()&&n.lu.size>0}function ku(n){return 0===We(n).fu.size}function hI(n){n.mu=void 0}function fI(n){return Sv.apply(this,arguments)}function Sv(){return Sv=(0,ye.Z)(function*(n){n.lu.forEach((e,t)=>{ym(n,e)})}),Sv.apply(this,arguments)}function pI(n,e){return wm.apply(this,arguments)}function wm(){return wm=(0,ye.Z)(function*(n,e){hI(n),vm(n)?(n.wu.au(e),_m(n)):n.wu.set("Unknown")}),wm.apply(this,arguments)}function gI(n,e,t){return Em.apply(this,arguments)}function Em(){return Em=(0,ye.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof oE&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.lu.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.lu.delete(m),o.mu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Im(n,r)}else if(e instanceof Uf?n.mu.ut(e):e instanceof sE?n.mu._t(e):n.mu.ht(e),!t.isEqual(yt.min()))try{const r=yield gv(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.mu.yt(u);return d.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const D=o.lu.get(E);D&&o.lu.set(E,D.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const E=o.lu.get(m);if(!E)return;o.lu.set(m,E.withResumeToken(Qn.EMPTY_BYTE_STRING,E.snapshotVersion)),dI(o,m);const D=new Oa(E.target,m,1,E.sequenceNumber);ym(o,D)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield Im(n,r)}var r}),Em.apply(this,arguments)}function Im(n,e,t){return xv.apply(this,arguments)}function xv(){return xv=(0,ye.Z)(function*(n,e,t){if(!nc(e))throw e;n.fu.add(1),yield cp(n),n.wu.set("Offline"),t||(t=()=>gv(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield gc(n)}))}),xv.apply(this,arguments)}function WC(n,e){return e().catch(t=>Im(n,t,e))}function mc(n){return mI.apply(this,arguments)}function mI(){return mI=(0,ye.Z)(function*(n){const e=We(n),t=ka(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;LT(e);)try{const o=yield UC(e.localStore,r);if(null===o){0===e.hu.length&&t.Mo();break}r=o.batchId,VT(e,o)}catch(o){yield Im(e,o)}ZC(e)&&KC(e)}),mI.apply(this,arguments)}function LT(n){return ku(n)&&n.hu.length<10}function VT(n,e){n.hu.push(e);const t=ka(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function ZC(n){return ku(n)&&!ka(n).Co()&&n.hu.length>0}function KC(n){ka(n).start()}function UT(n){return yI.apply(this,arguments)}function yI(){return yI=(0,ye.Z)(function*(n){ka(n).Zo()}),yI.apply(this,arguments)}function BT(n){return ah.apply(this,arguments)}function ah(){return ah=(0,ye.Z)(function*(n){const e=ka(n);for(const t of n.hu)e.Jo(t.mutations)}),ah.apply(this,arguments)}function jT(n,e,t){return bm.apply(this,arguments)}function bm(){return bm=(0,ye.Z)(function*(n,e,t){const r=n.hu.shift(),o=zf.from(r,e,t);yield WC(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield mc(n)}),bm.apply(this,arguments)}function Mv(n,e){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,ye.Z)(function*(n,e){var t;e&&ka(n).Ho&&(yield(t=(0,ye.Z)(function*(r,o){if(Qg(u=o.code)&&u!==ae.ABORTED){const d=r.hu.shift();ka(r).ko(),yield WC(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield mc(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),ZC(n)&&KC(n)}),Cm.apply(this,arguments)}function Ov(n,e){return _I.apply(this,arguments)}function _I(){return _I=(0,ye.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=ku(t);t.fu.add(3),yield cp(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield gc(t)}),_I.apply(this,arguments)}function dp(n,e){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,ye.Z)(function*(n,e){const t=We(n);e?(t.fu.delete(2),yield gc(t)):e||(t.fu.add(2),yield cp(t),t.wu.set("Unknown"))}),Dm.apply(this,arguments)}function uh(n){return n.gu||(n.gu=function(e,t,r){const o=We(e);return o.eu(),new qC(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:fI.bind(null,n),Yr:pI.bind(null,n),Qo:gI.bind(null,n)}),n.du.push(function(){var e=(0,ye.Z)(function*(t){t?(n.gu.ko(),vm(n)?_m(n):n.wu.set("Unknown")):(yield n.gu.stop(),hI(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function ka(n){return n.yu||(n.yu=function(e,t,r){const o=We(e);return o.eu(),new lI(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:UT.bind(null,n),Yr:Mv.bind(null,n),Xo:BT.bind(null,n),Yo:jT.bind(null,n)}),n.du.push(function(){var e=(0,ye.Z)(function*(t){t?(n.yu.ko(),yield mc(n)):(yield n.yu.stop(),n.hu.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class vI{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new vI(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lh(n,e){if(wr("AsyncQueue",`${e}: ${n}`),nc(n))return new xe(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class ch{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=Hd(),this.sortedSet=new Gn(this.comparator)}static emptySet(e){return new ch(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ch)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ch;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Tm{constructor(){this.pu=new Gn(Be.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):nt():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class dh{constructor(e,t,r,o,u,d,m,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new dh(e,t,ch.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class $T{constructor(){this.Tu=void 0,this.listeners=[]}}class HT{constructor(){this.queries=new xa(e=>L_(e),Jl),this.onlineState="Unknown",this.Eu=new Set}}function wI(n,e){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,ye.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new $T),o)try{u.Tu=yield t.onListen(r)}catch(d){const m=lh(d,`Initialization of query '${zg(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Au(t.onlineState),u.Tu&&e.Ru(u.Tu)&&hp(t)}),Rv.apply(this,arguments)}function Pv(n,e){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,ye.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Nv.apply(this,arguments)}function GT(n,e){const t=We(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Ru(o)&&(r=!0);d.Tu=o}}r&&hp(t)}function YC(n,e,t){const r=We(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function hp(n){n.Eu.forEach(e=>{e.next()})}class kv{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new dh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=dh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class Io{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class EI{constructor(e){this.M=e}fi(e){return Qo(this.M,e)}di(e){return e.metadata.exists?fE(this.M,e.document,!1):Dn.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return qn(e)}}class Fv{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=II(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Gt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new EI(this.M);for(const o of e)if(o.metadata.queries){const u=r.fi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||un()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function BC(n,e,t,r){return vv.apply(this,arguments)}(e.localStore,new EI(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const o of e.queries)yield jC(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function II(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class bI{constructor(e){this.key=e}}class Am{constructor(e){this.key=e}}class Lv{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=un(),this.mutatedKeys=un(),this.Uu=U_(e),this.qu=new ch(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new Tm,o=t?t.qu:this.qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const E=Hg(this.query)&&o.size===this.query.limit?o.last():null,D=kf(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,R)=>{const H=o.get(M),Y=Wg(this.query,R)?R:null,le=!!H&&this.mutatedKeys.has(H.key),Fe=!!Y&&(Y.hasLocalMutations||this.mutatedKeys.has(Y.key)&&Y.hasCommittedMutations);let st=!1;H&&Y?H.data.isEqual(Y.data)?le!==Fe&&(r.track({type:3,doc:Y}),st=!0):this.ju(H,Y)||(r.track({type:2,doc:Y}),st=!0,(E&&this.Uu(Y,E)>0||D&&this.Uu(Y,D)<0)&&(m=!0)):!H&&Y?(r.track({type:0,doc:Y}),st=!0):H&&!Y&&(r.track({type:1,doc:H}),st=!0,(E||D)&&(m=!0)),st&&(Y?(d=d.add(Y),u=Fe?u.add(M):u.delete(M)):(d=d.delete(M),u=u.delete(M)))}),Hg(this.query)||kf(this.query))for(;d.size>this.query.limit;){const M=Hg(this.query)?d.last():d.first();d=d.delete(M.key),u=u.delete(M.key),r.track({type:1,doc:M})}return{qu:d,Qu:r,ni:m,mutatedKeys:u}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const u=e.Qu.Iu();u.sort((D,M)=>function(R,H){const Y=le=>{switch(le){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return Y(R)-Y(H)}(D.type,M.type)||this.Uu(D.doc,M.doc)),this.Wu(r);const d=t?this.zu():[],m=0===this.Lu.size&&this.current?1:0,E=m!==this.Bu;return this.Bu=m,0!==u.length||E?{snapshot:new dh(this.query,e.qu,o,u,e.mutatedKeys,0===m,E,!1),Hu:d}:{Hu:d}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new Tm,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=un(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new Am(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new bI(r))}),t}Yu(e){this.$u=e.li,this.Lu=un();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return dh.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class CI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class QC{constructor(e){this.key=e,this.Zu=!1}}class DI{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.ta={},this.ea=new xa(m=>L_(m),Jl),this.na=new Map,this.sa=new Set,this.ia=new Gn(Be.comparator),this.ra=new Map,this.oa=new hm,this.ua={},this.aa=new Map,this.ca=uc.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function JC(n,e){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,ye.Z)(function*(n,e){const t=mp(n);let r,o;const u=t.ea.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Xu();else{const d=yield ih(t.localStore,ls(e));t.isPrimaryClient&&mm(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield Uv(t,e,r,"current"===m)}return o}),Vv.apply(this,arguments)}function Uv(n,e,t,r){return fp.apply(this,arguments)}function fp(){return fp=(0,ye.Z)(function*(n,e,t,r){n.la=(M,R,H)=>{return(Y=(0,ye.Z)(function*(le,Fe,st,zt){let Wt=Fe.view.Gu(st);Wt.ni&&(Wt=yield sh(le.localStore,Fe.query,!1).then(({documents:Zt})=>Fe.view.Gu(Zt,Wt)));const Yt=zt&&zt.targetChanges.get(Fe.targetId),Pt=Fe.view.applyChanges(Wt,le.isPrimaryClient,Yt);return Rm(le,Fe.targetId,Pt.Hu),Pt.snapshot}),function(le,Fe,st,zt){return Y.apply(this,arguments)})(n,M,R,H);var Y};const o=yield sh(n.localStore,e,!0),u=new Lv(e,o.li),d=u.Gu(o.documents),m=qd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=u.applyChanges(d,n.isPrimaryClient,m);Rm(n,t,E.Hu);const D=new CI(e,t,u);return n.ea.set(e,D),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),E.snapshot}),fp.apply(this,arguments)}function yc(n,e){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,ye.Z)(function*(n,e){const t=We(n),r=t.ea.get(e),o=t.na.get(r.targetId);if(o.length>1)return t.na.set(r.targetId,o.filter(u=>!Jl(u,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield sp(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),oh(t.remoteStore,r.targetId),Fu(t,r.targetId)}).catch(lc))):(Fu(t,r.targetId),yield sp(t.localStore,r.targetId,!0))}),Sm.apply(this,arguments)}function Bv(){return Bv=(0,ye.Z)(function*(n,e,t){const r=yp(n);try{const o=yield function(u,d){const m=We(u),E=Hn.now(),D=d.reduce((R,H)=>R.add(H.key),un());let M;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>m.ci.Ks(R,D).next(H=>{M=H;const Y=[];for(const le of d){const Fe=nE(le,M.get(le.key));null!=Fe&&Y.push(new Ou(le.key,Fe,Uw(Fe.value.mapValue),ur.exists(!0)))}return m.Bs.addMutationBatch(R,E,Y,d)})).then(R=>(R.applyToLocalDocumentSet(M),{batchId:R.batchId,changes:M}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let E=u.ua[u.currentUser.toKey()];E||(E=new Gn(Mt)),E=E.insert(d,m),u.ua[u.currentUser.toKey()]=E}(r,o.batchId,t),yield Xo(r,o.changes),yield mc(r.remoteStore)}catch(o){const u=lh(o,"Failed to persist write");t.reject(u)}}),Bv.apply(this,arguments)}function XC(n,e){return jv.apply(this,arguments)}function jv(){return jv=(0,ye.Z)(function*(n,e){const t=We(n);try{const r=yield mv(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.ra.get(u);d&&(wt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Zu=!0:o.modifiedDocuments.size>0?wt(d.Zu):o.removedDocuments.size>0&&(wt(d.Zu),d.Zu=!1))}),yield Xo(t,r,e)}catch(r){yield lc(r)}}),jv.apply(this,arguments)}function AI(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ea.forEach((u,d)=>{const m=d.view.Au(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=We(u);m.onlineState=d;let E=!1;m.queries.forEach((D,M)=>{for(const R of M.listeners)R.Au(d)&&(E=!0)}),E&&hp(m)}(r.eventManager,e),o.length&&r.ta.Qo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function eD(n,e,t){return xm.apply(this,arguments)}function xm(){return xm=(0,ye.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ra.get(e),u=o&&o.key;if(u){let d=new Gn(Be.comparator);d=d.insert(u,Dn.newNoDocument(u,yt.min()));const m=un().add(u),E=new Gd(yt.min(),new Map,new Sn(Mt),d,m);yield XC(r,E),r.ia=r.ia.remove(u),r.ra.delete(e),Pm(r)}else yield sp(r.localStore,e,!1).then(()=>Fu(r,e,t)).catch(lc)}),xm.apply(this,arguments)}function tD(n,e){return $v.apply(this,arguments)}function $v(){return $v=(0,ye.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const o=yield QE(t.localStore,e);Mm(t,r,null),Gv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xo(t,o)}catch(o){yield lc(o)}}),$v.apply(this,arguments)}function qT(n,e,t){return pp.apply(this,arguments)}function pp(){return pp=(0,ye.Z)(function*(n,e,t){const r=We(n);try{const o=yield function(u,d){const m=We(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let D;return m.Bs.lookupMutationBatch(E,d).next(M=>(wt(null!==M),D=M.keys(),m.Bs.removeMutationBatch(E,M))).next(()=>m.Bs.performConsistencyCheck(E)).next(()=>m.ci.Ks(E,D))})}(r.localStore,e);Mm(r,e,t),Gv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xo(r,o)}catch(o){yield lc(o)}}),pp.apply(this,arguments)}function Hv(){return Hv=(0,ye.Z)(function*(n,e){const t=We(n);ku(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=We(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.aa.get(r)||[];o.push(e),t.aa.set(r,o)}catch(r){const o=lh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),Hv.apply(this,arguments)}function Gv(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function Mm(n,e,t){const r=We(n);let o=r.ua[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ua[r.currentUser.toKey()]=o}}function Fu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||Om(n,r)})}function Om(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(oh(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),Pm(n))}function Rm(n,e,t){for(const r of t)r instanceof bI?(n.oa.addReference(r.key,e),nD(n,r)):r instanceof Am?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||Om(n,r.key)):nt()}function nD(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.sa.add(r),Pm(n))}function Pm(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new Be(Gt.fromString(e)),r=n.ca.next();n.ra.set(r,new QC(t)),n.ia=n.ia.insert(t,r),mm(n.remoteStore,new Oa(ls(Yl(t.path)),r,2,Bi.A))}}function Xo(n,e,t){return qv.apply(this,arguments)}function qv(){return qv=(0,ye.Z)(function*(n,e,t){const r=We(n),o=[],u=[],d=[];var m;r.ea.isEmpty()||(r.ea.forEach((m,E)=>{d.push(r.la(E,e,t).then(D=>{if(D){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,D.fromCache?"not-current":"current"),o.push(D);const M=fv.Ys(E.targetId,D);u.push(M)}}))}),yield Promise.all(d),r.ta.Qo(o),yield(m=(0,ye.Z)(function*(E,D){const M=We(E);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>de.forEach(D,H=>de.forEach(H.Hs,Y=>M.persistence.referenceDelegate.addReference(R,H.targetId,Y)).next(()=>de.forEach(H.Js,Y=>M.persistence.referenceDelegate.removeReference(R,H.targetId,Y)))))}catch(R){if(!nc(R))throw R;Re("LocalStore","Failed to update sequence numbers: "+R)}for(const R of D){const H=R.targetId;if(!R.fromCache){const Y=M.ii.get(H),Fe=Y.withLastLimboFreeSnapshotVersion(Y.snapshotVersion);M.ii=M.ii.insert(H,Fe)}}}),function(E,D){return m.apply(this,arguments)})(r.localStore,u))}),qv.apply(this,arguments)}function rD(n,e){return xI.apply(this,arguments)}function xI(){return xI=(0,ye.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield YE(t.localStore,e);t.currentUser=e,(o=t).aa.forEach(d=>{d.forEach(m=>{m.reject(new xe(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xo(t,r.hi)}var o}),xI.apply(this,arguments)}function zT(n,e){const t=We(n),r=t.ra.get(e);if(r&&r.Zu)return un().add(r.key);{let o=un();const u=t.na.get(e);if(!u)return o;for(const d of u){const m=t.ea.get(d);o=o.unionWith(m.view.Ku)}return o}}function MI(n,e){return zv.apply(this,arguments)}function zv(){return zv=(0,ye.Z)(function*(n,e){const t=We(n),r=yield sh(t.localStore,e.query,!0),o=e.view.Yu(r);return t.isPrimaryClient&&Rm(t,e.targetId,o.Hu),o}),zv.apply(this,arguments)}function iD(n,e){return Wv.apply(this,arguments)}function Wv(){return Wv=(0,ye.Z)(function*(n,e){const t=We(n);return cm(t.localStore,e).then(r=>Xo(t,r))}),Wv.apply(this,arguments)}function WT(n,e,t,r){return OI.apply(this,arguments)}function OI(){return OI=(0,ye.Z)(function*(n,e,t,r){const o=We(n),u=yield function(d,m){const E=We(d),D=We(E.Bs);return E.persistence.runTransaction("Lookup mutation documents","readonly",M=>D.fn(M,m).next(R=>R?E.ci.Ks(M,R):de.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield mc(o.remoteStore):"acknowledged"===t||"rejected"===t?(Mm(o,e,r||null),Gv(o,e),m=e,We(We(o.localStore).Bs)._n(m)):nt(),yield Xo(o,u)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),OI.apply(this,arguments)}function RI(){return RI=(0,ye.Z)(function*(n,e){const t=We(n);if(mp(t),yp(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield sD(t,r.toArray());t.ha=!0,yield dp(t.remoteStore,!0);for(const u of o)mm(t.remoteStore,u)}else if(!1===e&&!1!==t.ha){const r=[];let o=Promise.resolve();t.na.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Fu(t,d),sp(t.localStore,d,!0))),oh(t.remoteStore,d)}),yield o,yield sD(t,r),function(u){const d=We(u);d.ra.forEach((m,E)=>{oh(d.remoteStore,E)}),d.oa.bi(),d.ra=new Map,d.ia=new Gn(Be.comparator)}(t),t.ha=!1,yield dp(t.remoteStore,!1)}}),RI.apply(this,arguments)}function sD(n,e,t){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,ye.Z)(function*(n,e,t){const r=We(n),o=[],u=[];for(const d of e){let m;const E=r.na.get(d);if(E&&0!==E.length){m=yield ih(r.localStore,ls(E[0]));for(const D of E){const M=r.ea.get(D),R=yield MI(r,M);R.snapshot&&u.push(R.snapshot)}}else{const D=yield _v(r.localStore,d);m=yield ih(r.localStore,D),yield Uv(r,gp(D),d,!1)}o.push(m)}return r.ta.Qo(u),o}),Zv.apply(this,arguments)}function gp(n){return Ww(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function oD(n){const e=We(n);return We(We(e.localStore).persistence).Fs()}function aD(n,e,t,r){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,ye.Z)(function*(n,e,t,r){const o=We(n);if(o.ha)return void Re("SyncEngine","Ignoring unexpected query state notification.");const u=o.na.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield cm(o.localStore,V_(u[0])),m=Gd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Xo(o,d,m);break}case"rejected":yield sp(o.localStore,e,!0),Fu(o,e,r);break;default:nt()}}),Nm.apply(this,arguments)}function _c(n,e,t){return km.apply(this,arguments)}function km(){return km=(0,ye.Z)(function*(n,e,t){const r=mp(n);if(r.ha){for(const o of e){if(r.na.has(o)){Re("SyncEngine","Adding an already active target "+o);continue}const u=yield _v(r.localStore,o),d=yield ih(r.localStore,u);yield Uv(r,gp(u),d.targetId,!1),mm(r.remoteStore,d)}for(const o of t)r.na.has(o)&&(yield sp(r.localStore,o,!1).then(()=>{oh(r.remoteStore,o),Fu(r,o)}).catch(lc))}}),km.apply(this,arguments)}function mp(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=XC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eD.bind(null,e),e.ta.Qo=GT.bind(null,e.eventManager),e.ta.fa=YC.bind(null,e.eventManager),e}function yp(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qT.bind(null,e),e}class Fm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.M=pc(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return ip(this.persistence,new KE,e.initialUser,this.M)}wa(e){return new nI(fm.zi,this.M)}_a(e){return new iI}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Lm extends Fm{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield yp(r.ya.syncEngine),yield mc(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return ip(this.persistence,new KE,e.initialUser,this.M)}ma(e){return new $E(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=dc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ji.withCacheSize(this.cacheSizeBytes):ji.DEFAULT;return new $s(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Dv(),fc(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new iI}}class Vm extends Lm{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const o=r.ya.syncEngine;r.sharedClientState instanceof up&&(r.sharedClientState.syncEngine={Mr:WT.bind(null,o),Or:aD.bind(null,o),Fr:_c.bind(null,o),Fs:oD.bind(null,o),kr:iD.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,ye.Z)(function*(d){yield function ZT(n,e){return RI.apply(this,arguments)}(r.ya.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}_a(e){const t=Dv();if(!up.vt(t))throw new xe(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new up(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class PI{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>AI(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=rD.bind(null,r.syncEngine),yield dp(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new HT}createDatastore(e){const t=pc(e.databaseInfo.databaseId),r=new aI(e.databaseInfo);return new gm(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>AI(this.syncEngine,m,0),d=oI.vt()?new oI:new sI,new zC(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,E,D){const M=new DI(r,o,u,d,m,E);return D&&(M.ha=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=We(t);Re("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield cp(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function lD(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Kv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class KT{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Er,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),o=Number(r);isNaN(o)&&e.Pa(`length string (${r}) is not valid number`);const u=yield e.ba(o);return new Io(JSON.parse(u),t.length+o)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,ye.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class NI{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ye.Z)(function*(u,d){const m=We(u),E=Wd(m.M)+"/documents",D={documents:d.map(Y=>jf(m.M,Y))},M=yield m.ho("BatchGetDocuments",E,D),R=new Map;M.forEach(Y=>{const le=function fC(n,e){return"found"in e?function(t,r){wt(!!r.found);const o=Qo(t,r.found.name),u=qn(r.found.updateTime),d=new Ci({mapValue:{fields:r.found.fields}});return Dn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const o=Qo(t,r.missing),u=qn(r.readTime);return Dn.newNoDocument(o,u)}(n,e):nt()}(m.M,Y);R.set(le.key.toString(),le)});const H=[];return d.forEach(Y=>{const le=R.get(Y.toString());wt(!!le),H.push(le)}),H}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new vo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Be.fromPath(o);e.mutations.push(new W_(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(o,u){const d=We(o),m=Wd(d.M)+"/documents",E={writes:u.map(D=>nm(d.M,D))};yield d.oo("Commit",m,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=yt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ur.updateTime(t):ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yt.min()))throw new xe(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ur.updateTime(t)}return ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class cD{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.Sa=5,this.Do=new uI(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,ye.Z)(function*(){const t=new NI(e.datastore),r=e.Ca(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.xa(u)}))}).catch(o=>{e.xa(o)})}))}Ca(e){try{const t=this.updateFunction(e);return!Su(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Qg(t)}return!1}}class dD{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=zr.UNAUTHENTICATED,this.clientId=Nw.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ye.Z)(function*(m){Re("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Re("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=lh(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function kI(n,e){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ye.Z)(function*(u){r.isEqual(u)||(yield YE(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Yv.apply(this,arguments)}function Qv(n,e){return Um.apply(this,arguments)}function Um(){return Um=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Bm(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>Ov(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>Ov(e.remoteStore,u)),n.onlineComponents=e}),Um.apply(this,arguments)}function Bm(n){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,ye.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield kI(n,new Fm)),n.offlineComponents}),Jv.apply(this,arguments)}function jm(n){return $m.apply(this,arguments)}function $m(){return $m=(0,ye.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield Qv(n,new PI)),n.onlineComponents}),$m.apply(this,arguments)}function Hm(n){return Bm(n).then(e=>e.persistence)}function FI(n){return Bm(n).then(e=>e.localStore)}function Xv(n){return jm(n).then(e=>e.remoteStore)}function _p(n){return jm(n).then(e=>e.syncEngine)}function hh(n){return e0.apply(this,arguments)}function e0(){return e0=(0,ye.Z)(function*(n){const e=yield jm(n),t=e.eventManager;return t.onListen=JC.bind(null,e.syncEngine),t.onUnlisten=yc.bind(null,e.syncEngine),t}),e0.apply(this,arguments)}function LI(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,m,E){const D=new Kv({next:R=>{u.enqueueAndForget(()=>Pv(o,M));const H=R.docs.has(d);!H&&R.fromCache?E.reject(new xe(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&R.fromCache&&m&&"server"===m.source?E.reject(new xe(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(R)},error:R=>E.reject(R)}),M=new kv(Yl(d.path),D,{includeMetadataChanges:!0,Cu:!0});return wI(o,M)}(yield hh(n),n.asyncQueue,e,t,r)})),r.promise}function fD(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,m,E){const D=new Kv({next:R=>{u.enqueueAndForget(()=>Pv(o,M)),R.fromCache&&"server"===m.source?E.reject(new xe(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(R)},error:R=>E.reject(R)}),M=new kv(d,D,{includeMetadataChanges:!0,Cu:!0});return wI(o,M)}(yield hh(n),n.asyncQueue,e,t,r)})),r.promise}const gD=new Map;function VI(n,e,t){if(!t)throw new xe(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mD(n,e,t,r){if(!0===e&&!0===r)throw new xe(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yD(n){if(!Be.isDocumentKey(n))throw new xe(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function i(n){if(Be.isDocumentKey(n))throw new xe(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function s(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function a(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=s(n);throw new xe(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function l(n,e){if(e<=0)throw new xe(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class c{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,mD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class f{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c({}),this._settingsFrozen=!1,e instanceof go?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new xe(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new go(o.options.projectId)}(e))}get app(){if(!this._app)throw new xe(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Wb;switch(t.type){case"gapi":const r=t.client;return wt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Kb(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=gD.get(e);t&&(Re("ComponentProvider","Removing Datastore"),gD.delete(e),t.terminate())}(this),Promise.resolve()}}class w{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new T(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new w(this.firestore,e,this._key)}}class I{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new I(this.firestore,e,this._query)}}class T extends I{constructor(e,t,r){super(e,t,Yl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new w(this.firestore,null,new Be(e))}withConverter(e){return new T(this.firestore,e,this._path)}}function S(n,e,...t){if(n=(0,Bt.m9)(n),VI("collection","path",e),n instanceof f){const r=Gt.fromString(e,...t);return i(r),new T(n,null,r)}{if(!(n instanceof w||n instanceof T))throw new xe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Gt.fromString(e,...t));return i(r),new T(n.firestore,null,r)}}function V(n,e,...t){if(n=(0,Bt.m9)(n),1===arguments.length&&(e=Nw.R()),VI("doc","path",e),n instanceof f){const r=Gt.fromString(e,...t);return yD(r),new w(n,null,new Be(r))}{if(!(n instanceof w||n instanceof T))throw new xe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Gt.fromString(e,...t));return yD(r),new w(n.firestore,n instanceof T?n.converter:null,new Be(r))}}function z(n,e){return n=(0,Bt.m9)(n),e=(0,Bt.m9)(e),(n instanceof w||n instanceof T)&&(e instanceof w||e instanceof T)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ge(n,e){return n=(0,Bt.m9)(n),e=(0,Bt.m9)(e),n instanceof I&&e instanceof I&&n.firestore===e.firestore&&Jl(n._query,e._query)&&n.converter===e.converter}class Pe{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new uI(this,"async_queue_retry"),this.qa=()=>{const t=fc();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=fc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=fc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Er;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!nc(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,wr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const o=vI.createAndSchedule(this,e,t,r,u=>this.ja(u));return this.Fa.push(o),o}Ka(){this.$a&&nt()}verifyOperationInProgress(){}Wa(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function Ue(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class rt{constructor(){this._progressObserver={},this._taskCompletionResolver=new Er,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class He extends f{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Pe,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Lu(this),this._firestoreClient.terminate()}}function rn(n){return n._firestoreClient||Lu(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Lu(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new T_(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new dD(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Gm(n,e,t){const r=new Er;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield kI(n,t),yield Qv(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ae.FAILED_PRECONDITION||u.code===ae.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function nA(n){if(n._initialized||n._terminated)throw new xe(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vu(Qn.fromBase64String(e))}catch(t){throw new xe(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vu(Qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class vp{constructor(e){this._methodName=e}}class BI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}const Sx=/^__.*__$/;class xx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ou(e,this.data,this.fieldMask,t,this.fieldTransforms):new jd(e,this.data,t,this.fieldTransforms)}}class rA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ou(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function iA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class jI{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Ya(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new jI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.nc(e),o}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.Ya(),o}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return GI(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(iA(this.Xa)&&Sx.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class Mx{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||pc(e)}ac(e,t,r,o=!1){return new jI({Xa:e,methodName:t,uc:r,path:Wr.emptyPath(),ec:!1,oc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function wp(n){const e=n._freezeSettings(),t=pc(n._databaseId);return new Mx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $I(n,e,t,r,o,u={}){const d=n.ac(u.merge||u.mergeFields?2:0,e,t,o);ED("Data must be an object, but it was:",d,r);const m=aA(r,d);let E,D;if(u.merge)E=new Wo(d.fieldMask),D=d.fieldTransforms;else if(u.mergeFields){const M=[];for(const R of u.mergeFields){const H=ID(e,R,t);if(!d.contains(H))throw new xe(ae.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);lA(M,H)||M.push(H)}E=new Wo(M),D=d.fieldTransforms.filter(R=>E.covers(R.field))}else E=null,D=d.fieldTransforms;return new xx(new Ci(m),E,D)}class l0 extends vp{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof l0}}function sA(n,e,t){return new jI({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class _D extends vp{_toFieldTransform(e){return new Ff(e.path,new Ud)}isEqual(e){return e instanceof _D}}class Ox extends vp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=sA(this,e,!0),r=this.cc.map(u=>Ep(u,t)),o=new Xl(r);return new Ff(e.path,o)}isEqual(e){return this===e}}class Rx extends vp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=sA(this,e,!0),r=this.cc.map(u=>Ep(u,t)),o=new ec(r);return new Ff(e.path,o)}isEqual(e){return this===e}}class Px extends vp{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new Bd(e.M,Kw(e.M,this.hc));return new Ff(e.path,t)}isEqual(e){return this===e}}function vD(n,e,t,r){const o=n.ac(1,e,t);ED("Data must be an object, but it was:",o,r);const u=[],d=Ci.empty();Tu(r,(E,D)=>{const M=HI(e,E,t);D=(0,Bt.m9)(D);const R=o.sc(M);if(D instanceof l0)u.push(M);else{const H=Ep(D,R);null!=H&&(u.push(M),d.set(M,H))}});const m=new Wo(u);return new rA(d,m,o.fieldTransforms)}function wD(n,e,t,r,o,u){const d=n.ac(1,e,t),m=[ID(e,r,t)],E=[o];if(u.length%2!=0)throw new xe(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)m.push(ID(e,u[H])),E.push(u[H+1]);const D=[],M=Ci.empty();for(let H=m.length-1;H>=0;--H)if(!lA(D,m[H])){const Y=m[H];let le=E[H];le=(0,Bt.m9)(le);const Fe=d.sc(Y);if(le instanceof l0)D.push(Y);else{const st=Ep(le,Fe);null!=st&&(D.push(Y),M.set(Y,st))}}const R=new Wo(D);return new rA(M,R,d.fieldTransforms)}function oA(n,e,t,r=!1){return Ep(t,n.ac(r?4:3,e))}function Ep(n,e){if(uA(n=(0,Bt.m9)(n)))return ED("Unsupported field value:",e,n),aA(n,e);if(n instanceof vp)return function(t,r){if(!iA(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=Ep(d,r.ic(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Bt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Kw(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Hn.fromDate(t);return{timestampValue:zd(r.M,o)}}if(t instanceof Hn){const o=new Hn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:zd(r.M,o)}}if(t instanceof BI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Vu)return{bytesValue:K_(r.M,t._byteString)};if(t instanceof w){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.rc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:tc(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${s(t)}`)}(n,e)}function aA(n,e){const t={};return Fg(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tu(n,(r,o)=>{const u=Ep(o,e.tc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function uA(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Hn||n instanceof BI||n instanceof Vu||n instanceof w||n instanceof vp)}function ED(n,e,t){if(!uA(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=s(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function ID(n,e,t){if((e=(0,Bt.m9)(e))instanceof vc)return e._internalPath;if("string"==typeof e)return HI(n,e);throw GI("Field path arguments must be of type string or ",n,!1,void 0,t)}const Nx=new RegExp("[~\\*/\\[\\]]");function HI(n,e,t){if(e.search(Nx)>=0)throw GI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vc(...e.split("."))._internalPath}catch(r){throw GI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function GI(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(u||d)&&(E+=" (found",u&&(E+=` in field ${r}`),d&&(E+=` in document ${o}`),E+=")"),new xe(ae.INVALID_ARGUMENT,m+n+E)}function lA(n,e){return n.some(t=>t.isEqual(e))}class c0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new w(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new kx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class kx extends c0{data(){return super.data()}}function qI(n,e){return"string"==typeof e?HI(n,e):e instanceof vc?e._internalPath:e._delegate._internalPath}class Ip{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wc extends c0{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new d0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(qI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class d0 extends wc{data(e={}){return super.data(e)}}class fh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ip(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new d0(this._firestore,this._userDataWriter,r.key,r,new Ip(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new d0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ip(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new d0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ip(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,D=-1;return 0!==d.type&&(E=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),D=u.indexOf(d.doc.key)),{type:Fx(d.type),doc:m,oldIndex:E,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Fx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function cA(n,e){return n instanceof wc&&e instanceof wc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof fh&&e instanceof fh&&n._firestore===e._firestore&&ge(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function dA(n){if(kf(n)&&0===n.explicitOrderBy.length)throw new xe(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class h0{}function ph(n,...e){for(const t of e)n=t._apply(n);return n}class Lx extends h0{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=wp(e.firestore),r=function(o,u,d,m,E,D,M){let R;if(E.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new xe(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){yA(M,D);const Y=[];for(const le of M)Y.push(mA(m,o,le));R={arrayValue:{values:Y}}}else R=mA(m,o,M)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||yA(M,D),R=oA(d,"where",M,"in"===D||"not-in"===D);const H=Ir.create(E,D,R);return function(Y,le){if(le.S()){const st=Vd(Y);if(null!==st&&!st.isEqual(le.field))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${st.toString()}' and '${le.field.toString()}'`);const zt=Gg(Y);null!==zt&&_A(0,le.field,zt)}const Fe=function(st,zt){for(const Wt of st.filters)if(zt.indexOf(Wt.op)>=0)return Wt.op;return null}(Y,function(st){switch(st){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(le.op));if(null!==Fe)throw new xe(ae.INVALID_ARGUMENT,Fe===le.op?`Invalid query. You cannot use more than one '${le.op.toString()}' filter.`:`Invalid query. You cannot use '${le.op.toString()}' filters with '${Fe.toString()}' filters.`)}(o,H),H}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new I(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new us(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class Ux extends h0{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Ld(o,u);return function(m,E){if(null===Gg(m)){const D=Vd(m);null!==D&&_A(0,D,E.field)}}(r,d),d}(e._query,this.lc,this._c);return new I(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new us(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class hA extends h0{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new I(e.firestore,e.converter,qg(e._query,this.wc,this.mc))}}class fA extends h0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=gA(e,this.type,this.gc,this.yc);return new I(e.firestore,e.converter,(o=t,new us((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class pA extends h0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=gA(e,this.type,this.gc,this.yc);return new I(e.firestore,e.converter,(o=t,new us((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function gA(n,e,t,r){if(t[0]=(0,Bt.m9)(t[0]),t[0]instanceof c0)return function(o,u,d,m,E){if(!m)throw new xe(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const D=[];for(const M of Ql(o))if(M.field.isKeyField())D.push(Wl(u,m.key));else{const R=m.data.field(M.field);if(Af(R))throw new xe(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const H=M.field.canonicalString();throw new xe(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}D.push(R)}return new Mu(D,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=wp(n.firestore);return function(u,d,m,E,D,M){const R=u.explicitOrderBy;if(D.length>R.length)throw new xe(ae.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let Y=0;Y<D.length;Y++){const le=D[Y];if(R[Y].field.isKeyField()){if("string"!=typeof le)throw new xe(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof le}`);if(!F_(u)&&-1!==le.indexOf("/"))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${le}' contains a slash.`);const Fe=u.path.child(Gt.fromString(le));if(!Be.isDocumentKey(Fe))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const st=new Be(Fe);H.push(Wl(d,st))}else{const Fe=oA(m,E,le);H.push(Fe)}}return new Mu(H,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function mA(n,e,t){if("string"==typeof(t=(0,Bt.m9)(t))){if(""===t)throw new xe(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!F_(e)&&-1!==t.indexOf("/"))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Gt.fromString(t));if(!Be.isDocumentKey(r))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wl(n,new Be(r))}if(t instanceof w)return Wl(n,t._key);throw new xe(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${s(t)}.`)}function yA(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function _A(n,e,t){if(!t.isEqual(e))throw new xe(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class bD{convertValue(e,t="none"){switch(xu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return Tu(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new BI(Cn(e.latitude),Cn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Jb(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sf(e));default:return null}}convertTimestamp(e){const t=Au(e);return new Hn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Gt.fromString(e);wt(yE(r));const o=new go(r.get(1),r.get(3)),u=new Be(r.popFirst(5));return o.isEqual(t)||wr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function zI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Wx extends bD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new w(this.firestore,null,t)}}class vA{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wp(e)}set(e,t,r){this._verifyNotCommitted();const o=gh(e,this._firestore),u=zI(o.converter,t,r),d=$I(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,ur.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=gh(e,this._firestore);let d;return d="string"==typeof(t=(0,Bt.m9)(t))||t instanceof vc?wD(this._dataReader,"WriteBatch.update",u._key,t,r,o):vD(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gh(e,this._firestore);return this._mutations=this._mutations.concat(new vo(t._key,ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gh(n,e){if((n=(0,Bt.m9)(n)).firestore!==e)throw new xe(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class bp extends bD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new w(this.firestore,null,t)}}function wA(n,e,t){n=a(n,w);const r=a(n.firestore,He),o=zI(n.converter,e,t);return qm(r,[$I(wp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,ur.none())])}function EA(n,e,t,...r){n=a(n,w);const o=a(n.firestore,He),u=wp(o);let d;return d="string"==typeof(e=(0,Bt.m9)(e))||e instanceof vc?wD(u,"updateDoc",n._key,e,t,r):vD(u,"updateDoc",n._key,e),qm(o,[d.toMutation(n._key,ur.exists(!0))])}function IA(n,...e){var t,r,o;n=(0,Bt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||Ue(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(Ue(e[d])){const R=e[d];e[d]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[d+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[d+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let E,D,M;if(n instanceof w)D=a(n.firestore,He),M=Yl(n._key.path),E={next:R=>{e[d]&&e[d](CD(D,n,R))},error:e[d+1],complete:e[d+2]};else{const R=a(n,I);D=a(R.firestore,He),M=R._query;const H=new bp(D);E={next:Y=>{e[d]&&e[d](new fh(D,H,R,Y))},error:e[d+1],complete:e[d+2]},dA(n._query)}return function(R,H,Y,le){const Fe=new Kv(le),st=new kv(H,Fe,Y);return R.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return wI(yield hh(R),st)})),()=>{Fe.Ia(),R.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return Pv(yield hh(R),st)}))}}(rn(D),M,m,E)}function qm(n,e){return function(t,r){const o=new Er;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function TI(n,e,t){return Bv.apply(this,arguments)}(yield _p(t),r,o)})),o.promise}(rn(n),e)}function CD(n,e,t){const r=t.docs.get(e._key),o=new bp(n);return new wc(n,o,e._key,r,new Ip(t.hasPendingWrites,t.fromCache),e.converter)}class rM extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wp(e)}get(e){const t=gh(e,this._firestore),r=new Wx(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return nt();const u=o[0];if(u.isFoundDocument())return new c0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new c0(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const o=gh(e,this._firestore),u=zI(o.converter,t,r),d=$I(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=gh(e,this._firestore);let d;return d="string"==typeof(t=(0,Bt.m9)(t))||t instanceof vc?wD(this._dataReader,"Transaction.update",u._key,t,r,o):vD(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=gh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gh(e,this._firestore),r=new bp(this._firestore);return super.get(e).then(o=>new wc(this._firestore,r,t._key,o._document,new Ip(!1,!1),t.converter))}}function DD(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function CA(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function DA(){if(!function Fw(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ql=xl.SDK_VERSION,(0,xl._registerComponent)(new tf.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new He(o,new Zb(t.getProvider("auth-internal")),new kg(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,xl.registerVersion)(Rw,"3.4.8",n),(0,xl.registerVersion)(Rw,"3.4.8","esm2017")}();class f0{constructor(e){this._delegate=e}static fromBase64String(e){return DA(),new f0(Vu.fromBase64String(e))}static fromUint8Array(e){return CA(),new f0(Vu.fromUint8Array(e))}toBase64(){return DA(),this._delegate.toBase64()}toUint8Array(){return CA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function TD(n){return function hM(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class fM{enableIndexedDbPersistence(e,t){return function t0(n,e){nA(n=a(n,He));const t=rn(n),r=n._freezeSettings(),o=new PI;return Gm(t,o,new Lm(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function n0(n){nA(n=a(n,He));const e=rn(n),t=n._freezeSettings(),r=new PI;return Gm(e,r,new Vm(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function r0(n){if(n._initialized&&!n._terminated)throw new xe(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Er;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Eo.vt())return Promise.resolve();const o=r+"main";yield Eo.delete(o)}),function(r){return t.apply(this,arguments)})(dc(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class TA{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof go||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Df("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function _(n,e,t,r={}){var o;const u=(n=a(n,f))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Df("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=zr.MOCK_USER;else{d=(0,Bt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new xe(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new zr(E)}n._authCredentials=new Md(new zb(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function o0(n){return function YT(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield Hm(n),t=yield Xv(n);return e.setNetworkEnabled(!0),function(r){const o=We(r);return o.fu.delete(0),gc(o)}(t)}))}(rn(n=a(n,He)))}(this._delegate)}disableNetwork(){return function a0(n){return function QT(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield Hm(n),t=yield Xv(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(o){const u=We(o);u.fu.add(0),yield cp(u),u.wu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(rn(n=a(n,He)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,mD("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function s0(n){return function(e){const t=new Er;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function SI(n,e){return Hv.apply(this,arguments)}(yield _p(e),t)})),t.promise}(rn(n=a(n,He)))}(this._delegate)}onSnapshotsInSync(e){return function nM(n,e){return function XT(n,e){const t=new Kv(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield hh(n),o=t,We(r).Eu.add(o),void o.next();var r,o})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield hh(n),o=t,void We(r).Eu.delete(o);var r,o}))}}(rn(n=a(n,He)),Ue(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zm(this,S(this._delegate,e))}catch(t){throw cs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ea(this,V(this._delegate,e))}catch(t){throw cs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ds(this,function k(n,e){if(n=a(n,f),VI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new I(n,null,(t=e,new us(Gt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw cs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function iM(n,e){return function eA(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const r=yield(o=n,jm(o).then(u=>u.datastore));var o;new cD(n.asyncQueue,r,e,t).run()})),t.promise}(rn(n=a(n,He)),t=>e(new rM(n,t)))}(this._delegate,t=>e(new AA(this,t)))}batch(){return rn(this._delegate),new SA(new vA(this._delegate,e=>qm(this._delegate,e)))}loadBundle(e){return function u0(n,e){const t=rn(n=a(n,He)),r=new rt;return function tA(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,E=function(E,D){if(E instanceof Uint8Array)return lD(E,D);if(E instanceof ArrayBuffer)return lD(new Uint8Array(E),D);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new KT(E,d);var E}(t,pc(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function uD(n,e,t){const r=We(n);var o;(o=(0,ye.Z)(function*(u,d,m){try{const E=yield d.getMetadata();if(yield function(H,Y){const le=We(H),Fe=qn(Y.createTime);return le.persistence.runTransaction("hasNewerBundle","readonly",st=>le._s.getBundleMetadata(st,Y.id)).then(st=>!!st&&st.createTime.compareTo(Fe)>=0)}(u.localStore,E))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=E).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(II(E));const D=new Fv(E,u.localStore,d.M);let M=yield d.da();for(;M;){const H=yield D.ku(M);H&&m._updateProgress(H),M=yield d.da()}const R=yield D.complete();return yield Xo(u,R.Fu,void 0),yield function(H,Y){const le=We(H);return le.persistence.runTransaction("Save bundle","readwrite",Fe=>le._s.saveBundleMetadata(Fe,Y))}(u.localStore,E),m._completeWith(R.progress),Promise.resolve(R.Ou)}catch(E){return Df("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E),Promise.resolve(new Set)}var H}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield _p(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Ax(n,e){return function pD(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const o=We(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield FI(n),e)}))}(rn(n=a(n,He)),e).then(t=>t?new I(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ds(this,t):null)}}class WI extends bD{constructor(e){super(),this.firestore=e}convertBytes(e){return new f0(new Vu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ea.forKey(t,this.firestore,null)}}class AA{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new WI(e)}get(e){const t=Dp(e);return this._delegate.get(t).then(r=>new p0(this._firestore,new wc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Dp(e);return r?(DD("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Dp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Dp(e);return this._delegate.delete(t),this}}class SA{constructor(e){this._delegate=e}set(e,t,r){const o=Dp(e);return r?(DD("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Dp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Dp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Cp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new d0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new g0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Cp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Cp(e,new WI(e),t),o.set(t,u)),u}}Cp.INSTANCES=new WeakMap;class ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new WI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ea(t,new w(t._delegate,r,new Be(e)))}static forKey(e,t,r){return new ea(t,new w(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new zm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zm(this.firestore,S(this._delegate,e))}catch(t){throw cs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Bt.m9)(e))instanceof w&&z(this._delegate,e)}set(e,t){t=DD("DocumentReference.set",t);try{return t?wA(this._delegate,e,t):wA(this._delegate,e)}catch(r){throw cs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?EA(this._delegate,e):EA(this._delegate,e,t,...r)}catch(o){throw cs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function eM(n){return qm(a(n.firestore,He),[new vo(n._key,ur.none())])}(this._delegate)}onSnapshot(...e){const t=xA(e),r=MA(e,o=>new p0(this.firestore,new wc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return IA(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Kx(n){n=a(n,w);const e=a(n.firestore,He),t=rn(e),r=new bp(e);return function hD(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const m=yield function(E,D){const M=We(E);return M.persistence.runTransaction("read document","readonly",R=>M.ci.Ls(R,D))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=lh(m,`Failed to get document '${u} from cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield FI(n),e,t);var r})),t.promise}(t,n._key).then(o=>new wc(e,r,n._key,o,new Ip(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Yx(n){n=a(n,w);const e=a(n.firestore,He);return LI(rn(e),n._key,{source:"server"}).then(t=>CD(e,n,t))}(this._delegate):function Zx(n){n=a(n,w);const e=a(n.firestore,He);return LI(rn(e),n._key).then(t=>CD(e,n,t))}(this._delegate),t.then(r=>new p0(this.firestore,new wc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ea(this.firestore,this._delegate.withConverter(e?Cp.getInstance(this.firestore,e):null))}}function cs(n,e,t){return n.message=n.message.replace(e,t),n}function xA(n){for(const e of n)if("object"==typeof e&&!TD(e))return e;return{}}function MA(n,e){var t,r;let o;return o=TD(n[0])?n[0]:TD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class p0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return cA(this._delegate,e._delegate)}}class g0 extends p0{data(e){const t=this._delegate.data(e);return function RT(n,e){n||nt()}(void 0!==t),t}}class ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new WI(e)}where(e,t,r){try{return new ds(this.firestore,ph(this._delegate,function Vx(n,e,t){const r=e,o=qI("where",n);return new Lx(o,r,t)}(e,t,r)))}catch(o){throw cs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ds(this.firestore,ph(this._delegate,function Bx(n,e="asc"){const t=e,r=qI("orderBy",n);return new Ux(r,t)}(e,t)))}catch(r){throw cs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ds(this.firestore,ph(this._delegate,function jx(n){return l("limit",n),new hA("limit",n,"F")}(e)))}catch(t){throw cs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ds(this.firestore,ph(this._delegate,function $x(n){return l("limitToLast",n),new hA("limitToLast",n,"L")}(e)))}catch(t){throw cs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ds(this.firestore,ph(this._delegate,function Hx(...n){return new fA("startAt",n,!0)}(...e)))}catch(t){throw cs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ds(this.firestore,ph(this._delegate,function Gx(...n){return new fA("startAfter",n,!1)}(...e)))}catch(t){throw cs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ds(this.firestore,ph(this._delegate,function qx(...n){return new pA("endBefore",n,!1)}(...e)))}catch(t){throw cs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ds(this.firestore,ph(this._delegate,function zx(...n){return new pA("endAt",n,!0)}(...e)))}catch(t){throw cs(t,"endAt()","Query.endAt()")}}isEqual(e){return ge(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Jx(n){n=a(n,I);const e=a(n.firestore,He),t=rn(e),r=new bp(e);return function JT(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const m=yield sh(o,u,!0),E=new Lv(u,m.li),D=E.Gu(m.documents),M=E.applyChanges(D,!1);d.resolve(M.snapshot)}catch(m){const E=lh(m,`Failed to execute query '${u} against cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield FI(n),e,t);var r})),t.promise}(t,n._query).then(o=>new fh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function Xx(n){n=a(n,I);const e=a(n.firestore,He),t=rn(e),r=new bp(e);return fD(t,n._query,{source:"server"}).then(o=>new fh(e,r,n,o))}(this._delegate):function Qx(n){n=a(n,I);const e=a(n.firestore,He),t=rn(e),r=new bp(e);return dA(n._query),fD(t,n._query).then(o=>new fh(e,r,n,o))}(this._delegate),t.then(r=>new AD(this.firestore,new fh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=xA(e),r=MA(e,o=>new AD(this.firestore,new fh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return IA(this._delegate,t,r)}withConverter(e){return new ds(this.firestore,this._delegate.withConverter(e?Cp.getInstance(this.firestore,e):null))}}class gM{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new g0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class AD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ds(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new g0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new gM(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new g0(this._firestore,r))})}isEqual(e){return cA(this._delegate,e._delegate)}}class zm extends ds{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ea(this.firestore,e):null}doc(e){try{return new ea(this.firestore,void 0===e?V(this._delegate):V(this._delegate,e))}catch(t){throw cs(t,"doc()","CollectionReference.doc()")}}add(e){return function tM(n,e){const t=a(n.firestore,He),r=V(n),o=zI(n.converter,e);return qm(t,[$I(wp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,ur.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ea(this.firestore,t))}isEqual(e){return z(this._delegate,e._delegate)}withConverter(e){return new zm(this.firestore,this._delegate.withConverter(e?Cp.getInstance(this.firestore,e):null))}}function Dp(n){return a(n,w)}class SD{constructor(...e){this._delegate=new vc(...e)}static documentId(){return new SD(Wr.keyField().canonicalString())}isEqual(e){return(e=(0,Bt.m9)(e))instanceof vc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Tp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function oM(){return new _D("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Tp(e)}static delete(){const e=function sM(){return new l0("deleteField")}();return e._methodName="FieldValue.delete",new Tp(e)}static arrayUnion(...e){const t=function aM(...n){return new Ox("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Tp(t)}static arrayRemove(...e){const t=function uM(...n){return new Rx("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Tp(t)}static increment(e){const t=function lM(n){return new Px("increment",n)}(e);return t._methodName="FieldValue.increment",new Tp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const mM={Firestore:TA,GeoPoint:BI,Timestamp:Hn,Blob:f0,Transaction:AA,WriteBatch:SA,DocumentReference:ea,DocumentSnapshot:p0,Query:ds,QueryDocumentSnapshot:g0,QuerySnapshot:AD,CollectionReference:zm,FieldPath:SD,FieldValue:Tp,setLogLevel:function pM(n){!function qb(n){Du.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function _M(n){(function yM(n,e){n.INTERNAL.registerComponent(new tf.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},mM)))})(n,(e,t)=>new TA(e,t,new fM)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(ET.Z);var vM=N(6451),ZI=N(5363),wM=N(6063);class EM extends sr.x{constructor(e=1/0,t=1/0,r=wM.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let E=1;E<r.length&&r[E]<=d;E+=2)m=E;m&&r.splice(0,m+1)}}}var IM=N(3099);function OA(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,IM.B)({connector:()=>new EM(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function RA(n,e){return(0,ha.m)(e)?Pn(()=>n,e):Pn(()=>n)}var xD=N(9468);N(5867);const NA=new Map,AM={activated:!1,tokenObservers:[]},SM={initialized:!1,enabled:!1};function ai(n){return NA.get(n)||AM}function Fa(n,e){NA.set(n,e)}function YI(){return SM}class PM{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Bt.BH,yield function NM(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Bt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const hs=new Bt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function FA(n){if(!ai(n).activated)throw hs.create("use-before-activation",{appName:n.name})}function PD(n,e){return ND.apply(this,arguments)}function ND(){return ND=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const R=yield o.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(R){throw hs.create("fetch-network-error",{originalErrorMessage:R.message})}if(200!==d.status)throw hs.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(R){throw hs.create("fetch-parse-error",{originalErrorMessage:R.message})}const E=m.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw hs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const D=1e3*Number(E[1]),M=Date.now();return{token:m.token,expireTimeMillis:M+D,issuedAtTimeMillis:M}}),ND.apply(this,arguments)}function UM(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const m0="firebase-app-check-store";let XI=null;function VA(){return XI||(XI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(hs.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(m0,{keyPath:"compositeKey"})}}catch(t){e(hs.create("storage-open",{originalErrorMessage:t.message}))}}),XI)}function kD(){return kD=(0,ye.Z)(function*(n,e){const r=(yield VA()).transaction(m0,"readwrite"),u=r.objectStore(m0).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=E=>{d()},r.onerror=E=>{var D;m(hs.create("storage-set",{originalErrorMessage:null===(D=E.target.error)||void 0===D?void 0:D.message}))}})}),kD.apply(this,arguments)}const y0=new mu.Yd("@firebase/app-check");function $A(n,e){return(0,Bt.hl)()?function HM(n,e){return function UA(n,e){return kD.apply(this,arguments)}(function jA(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{y0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function HA(){return YI().enabled}function GA(){return UD.apply(this,arguments)}function UD(){return UD=(0,ye.Z)(function*(){const n=YI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),UD.apply(this,arguments)}const KM={error:"UNKNOWN_ERROR"};function YM(n){return Bt.US.encodeString(JSON.stringify(n),!1)}function eb(n){return BD.apply(this,arguments)}function BD(){return BD=(0,ye.Z)(function*(n,e=!1){const t=n.app;FA(t);const r=ai(t);let u,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&tb(E)&&(o=E)}if(!e&&o&&tb(o))return{token:o.token};let m,d=!1;if(HA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=PD(UM(t,yield GA()),n.heartbeatServiceProvider).then(D=>(r.exchangeTokenPromise=void 0,D)),d=!0);const E=yield r.exchangeTokenPromise;return yield $A(t,E),Fa(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),d=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?y0.warn(E.message):y0.error(E),u=E}return o?(m={token:o.token},Fa(t,Object.assign(Object.assign({},r),{token:o})),yield $A(t,o)):m=JM(u),d&&zA(t,m),m}),BD.apply(this,arguments)}function $D(n,e){const t=ai(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Fa(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function qA(n){const{app:e}=n,t=ai(e);let r=t.tokenRefresher;r||(r=function QM(n){const{app:e}=n;return new PM((0,ye.Z)(function*(){let r;if(r=ai(e).token?yield eb(n,!0):yield eb(n),r.error)throw r.error}),()=>!0,()=>{const t=ai(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Fa(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function zA(n,e){const t=ai(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function tb(n){return n.expireTimeMillis-Date.now()>0}function JM(n){return{token:YM(KM),error:n}}class XM{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ai(this.app);for(const t of e)$D(this.app,t.next);return Promise.resolve()}}const eS="app-check-internal";!function fO(){(0,xl._registerComponent)(new tf.wA("app-check",n=>function eO(n,e){return new XM(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(eS).initialize()})),(0,xl._registerComponent)(new tf.wA(eS,n=>function tO(n){return{getToken:e=>eb(n,e),addTokenListener:e=>function jD(n,e,t,r){const{app:o}=n,u=ai(o),d={next:t,error:r,type:e};if(Fa(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&tb(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),qA(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>qA(n))}(n,"INTERNAL",e),removeTokenListener:e=>$D(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,xl.registerVersion)("@firebase/app-check","0.5.7")}();class zD{constructor(){return(0,vr.vb)("app-check")}}"undefined"!=typeof window&&window;var nS=N(127);const rS=new g.OlP("angularfire2.auth.use-emulator"),iS=new g.OlP("angularfire2.auth.settings"),sS=new g.OlP("angularfire2.auth.tenant-id"),oS=new g.OlP("angularfire2.auth.langugage-code"),aS=new g.OlP("angularfire2.auth.use-device-language"),uS=new g.OlP("angularfire.auth.persistence"),lS=(n,e,t,r,o,u,d,m)=>(0,os.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),d)for(const[D,M]of Object.entries(d))E.settings[D]=M;return m&&E.setPersistence(m),E},[t,r,o,u,d,m]);let ZD=(()=>{class n{constructor(t,r,o,u,d,m,E,D,M,R,H,Y){const le=new sr.x,Fe=ft(void 0).pipe((0,ZI.Q)(d.outsideAngular),Pn(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,820)))),(0,Rt.U)(()=>(0,os.on)(t,u,r)),(0,Rt.U)(st=>lS(st,u,m,D,M,R,E,H)),OA({bufferSize:1,refCount:!1}));if(rr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ft(null);else{Fe.pipe(Ns()).subscribe();const zt=Fe.pipe(Pn(Pt=>Pt.getRedirectResult().then(Zt=>Zt,()=>null)),vr.iC,OA({bufferSize:1,refCount:!1})),Wt=Fe.pipe(Pn(Pt=>new Hr.y(Zt=>({unsubscribe:u.runOutsideAngular(()=>Pt.onAuthStateChanged(dn=>Zt.next(dn),dn=>Zt.error(dn),()=>Zt.complete()))})))),Yt=Fe.pipe(Pn(Pt=>new Hr.y(Zt=>({unsubscribe:u.runOutsideAngular(()=>Pt.onIdTokenChanged(dn=>Zt.next(dn),dn=>Zt.error(dn),()=>Zt.complete()))}))));this.authState=zt.pipe(RA(Wt),(0,xD.R)(d.outsideAngular),(0,ZI.Q)(d.insideAngular)),this.user=zt.pipe(RA(Yt),(0,xD.R)(d.outsideAngular),(0,ZI.Q)(d.insideAngular)),this.idToken=this.user.pipe(Pn(Pt=>Pt?(0,On.D)(Pt.getIdToken()):ft(null))),this.idTokenResult=this.user.pipe(Pn(Pt=>Pt?(0,On.D)(Pt.getIdTokenResult()):ft(null))),this.credential=(0,vM.T)(zt,le,this.authState.pipe(ts(Pt=>!Pt))).pipe((0,Rt.U)(Pt=>(null==Pt?void 0:Pt.user)?Pt:null),(0,xD.R)(d.outsideAngular),(0,ZI.Q)(d.insideAngular))}return(0,os.pX)(this,Fe,u,{spy:{apply:(st,zt,Wt)=>{(st.startsWith("signIn")||st.startsWith("createUser"))&&Wt.then(Yt=>le.next(Yt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(os.Dh),g.LFG(os.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(vr.HU),g.LFG(rS,8),g.LFG(iS,8),g.LFG(sS,8),g.LFG(oS,8),g.LFG(aS,8),g.LFG(uS,8),g.LFG(zD,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),vO=(()=>{class n{constructor(){nS.Z.registerVersion("angularfire",vr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[ZD]}),n})();function cS(n,e){return function wO(n,e=_b.z){return new Hr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function KD(n,e){return cS(n,e).pipe((0,Rt.U)(t=>({payload:t,type:"query"})))}function rb(n,e){return KD(n,e).pipe(gi(void 0),Fy(),(0,Rt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const E=o.find(M=>M.doc.ref.isEqual(d.ref)),D=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(d.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(d.metadata)||!E&&D&&JSON.stringify(D.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function dS(n,e,t){return rb(n,t).pipe(gr((r,o)=>function IO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function bO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return YD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return YD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return YD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function vb(n,e=ei.y){return n=null!=n?n:L0,(0,Dr.e)((t,r)=>{let o,u=!0;t.subscribe((0,Ln.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,Rt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function YD(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function hS(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class fS{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=rb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Rt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(gi(void 0),Fy(),ts(([r,o])=>o.length>0||!r),(0,Rt.U)(([r,o])=>o),vr.iC)}auditTrail(e){return this.stateChanges(e).pipe(gr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hS(e);return dS(this.query,t,this.afs.schedulers.outsideAngular).pipe(vr.iC)}valueChanges(e={}){return KD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),vr.iC)}get(e){return(0,On.D)(this.query.get(e)).pipe(vr.iC)}add(e){return this.ref.add(e)}doc(e){return new pS(this.ref.doc(e),this.afs)}}class pS{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=yS(r,t);return new fS(o,u,this.afs)}snapshotChanges(){return function EO(n,e){return cS(n,e).pipe(gi(void 0),Fy(),(0,Rt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(vr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Rt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,On.D)(this.ref.get(e)).pipe(vr.iC)}}class CO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?rb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ts(t=>t.length>0),vr.iC):rb(this.query,this.afs.schedulers.outsideAngular).pipe(vr.iC)}auditTrail(e){return this.stateChanges(e).pipe(gr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hS(e);return dS(this.query,t,this.afs.schedulers.outsideAngular).pipe(vr.iC)}valueChanges(e={}){return KD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),vr.iC)}get(e){return(0,On.D)(this.query.get(e)).pipe(vr.iC)}}const gS=new g.OlP("angularfire2.enableFirestorePersistence"),mS=new g.OlP("angularfire2.firestore.persistenceSettings"),DO=new g.OlP("angularfire2.firestore.settings"),TO=new g.OlP("angularfire2.firestore.use-emulator");function yS(n,e=(t=>t)){return{query:e(n),ref:n}}let _S=(()=>{class n{constructor(t,r,o,u,d,m,E,D,M,R,H,Y,le,Fe,st,zt,Wt){this.schedulers=E;const Yt=(0,os.on)(t,m,r),Pt=M;R&&lS(Yt,m,H,le,Fe,st,Y,zt),[this.firestore,this.persistenceEnabled$]=(0,os.cc)(`${Yt.name}.firestore`,"AngularFirestore",Yt.name,()=>{const Zt=m.runOutsideAngular(()=>Yt.firestore());if(u&&Zt.settings(u),Pt&&Zt.useEmulator(...Pt),o&&!rr(d)){const dn=()=>{try{return(0,On.D)(Zt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(Hi){return"undefined"!=typeof console&&console.warn(Hi),ft(!1)}};return[Zt,m.runOutsideAngular(dn)]}return[Zt,ft(!1)]},[u,Pt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=yS(o,r),m=this.schedulers.ngZone.run(()=>u);return new fS(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new CO(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new pS(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(os.Dh),g.LFG(os.xv,8),g.LFG(gS,8),g.LFG(DO,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(vr.HU),g.LFG(mS,8),g.LFG(TO,8),g.LFG(ZD,8),g.LFG(rS,8),g.LFG(iS,8),g.LFG(sS,8),g.LFG(oS,8),g.LFG(aS,8),g.LFG(uS,8),g.LFG(zD,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),AO=(()=>{class n{constructor(){nS.Z.registerVersion("angularfire",vr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:gS,useValue:!0},{provide:mS,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[_S]}),n})(),QD=(()=>{class n{constructor(t){this.angularFirestore=t}getTasks(){return this.angularFirestore.collection("tasks").snapshotChanges()}getTaskById(t){return this.angularFirestore.collection("tasks").doc(t).valueChanges()}createTask(t){return new Promise((r,o)=>{this.angularFirestore.collection("tasks").add(t).then(u=>{console.log(u)},u=>{o(u)})})}updateTask(t,r){return this.angularFirestore.collection("tasks").doc(r).update({title:t.title,descripction:t.description,author:t.author})}deleteTask(t){return this.angularFirestore.collection("tasks").doc(t.id).delete()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_S))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function SO(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"tr")(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA(),g.TgZ(7,"td")(8,"a",5),g._UZ(9,"i",6),g.qZA(),g.TgZ(10,"a",7),g.NdJ("click",function(){const u=g.CHM(t).$implicit;return g.oxw().deleteTaskRow(u)}),g._UZ(11,"i",8),g.qZA()()()}if(2&n){const t=e.$implicit;g.xp6(2),g.Oqu(t.title),g.xp6(2),g.Oqu(t.description),g.xp6(2),g.Oqu(t.author),g.xp6(2),g.MGl("routerLink","/edit/",t.id,"")}}let xO=(()=>{class n{constructor(t){this.taskService=t,this.deleteTaskRow=r=>this.taskService.deleteTask(r)}ngOnInit(){this.taskService.getTasks().subscribe(t=>{this.Tasks=t.map(r=>Object.assign({id:r.payload.doc.id},r.payload.doc.data()))})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(QD))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-show"]],decls:17,vars:1,consts:[[1,"show-options"],["type","text","name","search-task","id","search-task"],["routerLink","/create"],[1,"show-content"],[4,"ngFor","ngForOf"],[1,"button-edit",3,"routerLink"],[1,"fa-solid","fa-pen-to-square"],[1,"button-delete",3,"click"],[1,"fa-solid","fa-trash-can"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0),g._UZ(1,"input",1),g.TgZ(2,"a",2),g._uU(3,"Create task"),g.qZA()(),g.TgZ(4,"table",3)(5,"thead")(6,"tr")(7,"th"),g._uU(8,"Id"),g.qZA(),g.TgZ(9,"th"),g._uU(10,"Title"),g.qZA(),g.TgZ(11,"th"),g._uU(12,"Description"),g.qZA(),g.TgZ(13,"th"),g._uU(14,"Author"),g.qZA()()(),g.TgZ(15,"tbody"),g.YNc(16,SO,12,4,"tr",4),g.qZA()()),2&t&&(g.xp6(16),g.Q6J("ngForOf",r.Tasks))},directives:[ud,nr],styles:[".show-options[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;padding:20px 60px;background-color:var(--background-dark);border-radius:0 0 10px 10px;margin-bottom:25px}.show-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:75%;height:auto;padding:10px 15px;border:2px solid transparent;border-radius:5px;font-size:15px;font-weight:700;color:var(--color-table-light)}.show-options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:20%;background-color:var(--color-principal);color:#fff;padding:10px;border-radius:5px;border:2px solid white;text-align:center;font-weight:700;transition:all .4s ease}.show-options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--color-principal-dark)}.show-content[_ngcontent-%COMP%]{width:90%;border-collapse:collapse;margin:0 auto 25px;padding:0;table-layout:fixed;border-radius:5px}.show-content[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:var(--color-alternative-dark)}.show-content[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{font-size:17px;height:40px;font-weight:700;color:var(--color-table-light)}.show-content[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-top-left-radius:5px}.show-content[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-top-right-radius:5px}.show-content[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{font-size:15px;font-weight:700;height:40px;background-color:var(--color-table-dark);color:var(--color-table-light);text-align:center;cursor:default;transition:all .4s ease}.show-content[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:var(--color-table-light);color:var(--color-table-dark)}.show-content[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{margin-bottom:50px}.show-content[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:5px}.show-content[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:5px}.show-content[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--background-dark);color:var(--color-table-light)}.show-content[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px;text-decoration:none}.show-content[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a.button-edit[_ngcontent-%COMP%], .show-content[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a.button-edit[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-right:20px;color:var(--color-alternative);transition:all .4s ease}.show-content[_ngcontent-%COMP%]   tdody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a.button-edit[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:var(--color-alternative-dark)}.show-content[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a.button-delete[_ngcontent-%COMP%]{color:var(--color-principal);cursor:pointer;transition:all .4s ease}.show-content[_ngcontent-%COMP%]   tdody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a.button-delete[_ngcontent-%COMP%]:hover{color:var(--color-principal-dark)}"]}),n})(),vS=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Ap=(()=>{class n extends vS{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Uu=new g.OlP("NgValueAccessor"),RO={provide:Uu,useExisting:(0,g.Gpc)(()=>_0),multi:!0},NO=new g.OlP("CompositionEventMode");let _0=(()=>{class n extends vS{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function PO(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(NO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([RO]),g.qOj]}),n})();function mh(n){return null==n||0===n.length}function ES(n){return null!=n&&"number"==typeof n.length}const $i=new g.OlP("NgValidators"),yh=new g.OlP("NgAsyncValidators"),kO=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Wm{static min(e){return function IS(n){return e=>{if(mh(e.value)||mh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function bS(n){return e=>{if(mh(e.value)||mh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return CS(e)}static requiredTrue(e){return function DS(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function TS(n){return mh(n.value)||kO.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function AS(n){return e=>mh(e.value)||!ES(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function SS(n){return e=>ES(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function xS(n){if(!n)return ib;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(mh(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return kS(e)}static composeAsync(e){return FS(e)}}function CS(n){return mh(n.value)?{required:!0}:null}function ib(n){return null}function MS(n){return null!=n}function OS(n){const e=(0,g.QGY)(n)?(0,On.D)(n):n;return(0,g.CqO)(e),e}function RS(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function PS(n,e){return e.map(t=>t(n))}function NS(n){return n.map(e=>function FO(n){return!n.validate}(e)?e:t=>e.validate(t))}function kS(n){if(!n)return null;const e=n.filter(MS);return 0==e.length?null:function(t){return RS(PS(t,e))}}function JD(n){return null!=n?kS(NS(n)):null}function FS(n){if(!n)return null;const e=n.filter(MS);return 0==e.length?null:function(t){return function MO(...n){const e=(0,Rn.jO)(n),{args:t,keys:r}=hi(n),o=new Hr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let E=d,D=d;for(let M=0;M<d;M++){let R=!1;(0,Po.Xf)(t[M]).subscribe((0,Ln.x)(u,H=>{R||(R=!0,D--),m[M]=H},()=>E--,void 0,()=>{(!E||!R)&&(D||u.next(r?to(r,m):m),u.complete())}))}});return e?o.pipe(jc(e)):o}(PS(t,e).map(OS)).pipe((0,Rt.U)(RS))}}function XD(n){return null!=n?FS(NS(n)):null}function LS(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function VS(n){return n._rawValidators}function US(n){return n._rawAsyncValidators}function eT(n){return n?Array.isArray(n)?n:[n]:[]}function sb(n,e){return Array.isArray(n)?n.includes(e):n===e}function BS(n,e){const t=eT(e);return eT(n).forEach(o=>{sb(t,o)||t.push(o)}),t}function jS(n,e){return eT(e).filter(t=>!sb(n,t))}class $S{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=JD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=XD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class _h extends $S{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class fs extends $S{get formDirective(){return null}get path(){return null}}class HS{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let tT=(()=>{class n extends HS{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(_h,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})(),nT=(()=>{class n extends HS{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(fs,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[g.qOj]}),n})();function v0(n,e){sT(n,e),e.valueAccessor.writeValue(n.value),function GO(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qS(n,e)})}(n,e),function zO(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function qO(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qS(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function HO(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ub(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),cb(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function lb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function sT(n,e){const t=VS(n);null!==e.validator?n.setValidators(LS(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=US(n);null!==e.asyncValidator?n.setAsyncValidators(LS(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();lb(e._rawValidators,o),lb(e._rawAsyncValidators,o)}function cb(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=VS(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=US(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return lb(e._rawValidators,r),lb(e._rawAsyncValidators,r),t}function qS(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function uT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const w0="VALID",db="INVALID",Zm="PENDING",E0="DISABLED";function cT(n){return(hb(n)?n.validators:n)||null}function KS(n){return Array.isArray(n)?JD(n):n||null}function dT(n,e){return(hb(e)?e.asyncValidators:n)||null}function YS(n){return Array.isArray(n)?XD(n):n||null}function hb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const hT=n=>n instanceof Ec,fb=n=>n instanceof Km,QS=n=>n instanceof tx;function JS(n){return hT(n)?n.value:n.getRawValue()}function XS(n,e){const t=fb(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[e])throw new g.vHH(1001,"")}function ex(n,e){fb(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new g.vHH(1002,"")})}class fT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=KS(this._rawValidators),this._composedAsyncValidatorFn=YS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===w0}get invalid(){return this.status===db}get pending(){return this.status==Zm}get disabled(){return this.status===E0}get enabled(){return this.status!==E0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=KS(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=YS(e)}addValidators(e){this.setValidators(BS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(BS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jS(e,this._rawAsyncValidators))}hasValidator(e){return sb(this._rawValidators,e)}hasAsyncValidator(e){return sb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Zm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=E0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=w0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===w0||this.status===Zm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?E0:w0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Zm,this._hasOwnPendingAsyncValidator=!0;const t=OS(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function YO(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=fb(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:QS(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?E0:this.errors?db:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zm)?Zm:this._anyControlsHaveStatus(db)?db:w0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ec extends fT{constructor(e=null,t,r){super(cT(t),dT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hb(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){uT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){uT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Km extends fT{constructor(e,t,r){super(cT(t),dT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ex(this,e),Object.keys(e).forEach(r=>{XS(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=JS(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class tx extends fT{constructor(e,t,r){super(cT(t),dT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ex(this,e),e.forEach((r,o)=>{XS(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>JS(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let gT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),ax=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const mT=new g.OlP("NgModelWithFormControlWarning"),sR={provide:fs,useExisting:(0,g.Gpc)(()=>b0)};let b0=(()=>{class n extends fs{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(cb(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return v0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ub(t.control||null,t,!1),uT(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function ZS(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(ub(r||null,t),hT(o)&&(v0(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function zS(n,e){sT(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function WO(n,e){return cb(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){sT(this.form,this),this._oldForm&&cb(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36($i,10),g.Y36(yh,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([sR]),g.qOj,g.TTD]}),n})();const uR={provide:_h,useExisting:(0,g.Gpc)(()=>pb)};let pb=(()=>{class n extends _h{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function aT(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===_0?t=u:function KO(n){return Object.getPrototypeOf(n.constructor)===Ap}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function oT(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function ab(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(g.Y36(fs,13),g.Y36($i,10),g.Y36(yh,10),g.Y36(Uu,10),g.Y36(mT,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([uR]),g.qOj,g.TTD]}),n})(),Sp=(()=>{class n{constructor(){this._validator=ib}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ib,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,features:[g.TTD]}),n})();const _R={provide:$i,useExisting:(0,g.Gpc)(()=>C0),multi:!0};let C0=(()=>{class n extends Sp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function gR(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>CS}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&g.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[g._Bn([_R]),g.qOj]}),n})(),bx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[ax]]}),n})(),CR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[bx]}),n})(),Cx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:mT,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[bx]}),n})(),Dx=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,u=null,d=null;return null!=r&&(function DR(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,d=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,d=null!=r.asyncValidator?r.asyncValidator:null)),new Km(o,{asyncValidators:d,updateOn:m,validators:u})}control(t,r,o){return new Ec(t,r,o)}array(t,r,o){const u=t.map(d=>this._createControl(d));return new tx(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return hT(t)||fb(t)||QS(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:Cx}),n})();function TR(n,e){1&n&&(g.TgZ(0,"label",14),g._uU(1," * El campo esta vacio "),g.qZA())}function AR(n,e){if(1&n&&(g.TgZ(0,"div",12),g.YNc(1,TR,2,0,"label",13),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.Q6J("ngIf",t.taskForm.controls.title.errors.required)}}function SR(n,e){1&n&&(g.TgZ(0,"label",16),g._uU(1," * El campo esta vacio "),g.qZA())}function xR(n,e){if(1&n&&(g.TgZ(0,"div",12),g.YNc(1,SR,2,0,"label",15),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.Q6J("ngIf",t.taskForm.controls.author.errors.required)}}function MR(n,e){1&n&&(g.TgZ(0,"label",18),g._uU(1," * El campo esta vacio "),g.qZA())}function OR(n,e){if(1&n&&(g.TgZ(0,"div",12),g.YNc(1,MR,2,0,"label",17),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.Q6J("ngIf",t.taskForm.controls.description.errors.required)}}let RR=(()=>{class n{constructor(t,r,o){this.taskService=t,this.formBuilder=r,this.router=o,this.taskForm=new Km({}),this.taskForm=this.formBuilder.group({title:new Ec("",[Wm.required]),description:new Ec("",[Wm.required]),author:new Ec("",[Wm.required])})}ngOnInit(){}onSubmit(){this.taskService.createTask(this.taskForm.value),this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(QD),g.Y36(Dx),g.Y36(qr))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-create"]],decls:27,vars:5,consts:[[1,"create-title"],["action","",3,"formGroup","ngSubmit"],[1,"create-field"],[1,"create-input"],[1,"fa-solid","fa-user"],["type","text","formControlName","title","id","","required",""],["class","create-error",4,"ngIf"],["type","text","formControlName","author","id","","required",""],["formControlName","description","id","","cols","30","rows","10","required",""],[1,"create-buttons"],["routerLink","/"],["type","submit","value","Create",3,"disabled"],[1,"create-error"],["for","title",4,"ngIf"],["for","title"],["for","author",4,"ngIf"],["for","author"],["for","description",4,"ngIf"],["for","description"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"h1"),g._uU(2,"Create task"),g.qZA()(),g.TgZ(3,"form",1),g.NdJ("ngSubmit",function(){return r.onSubmit()}),g.TgZ(4,"div",2)(5,"h2"),g._uU(6,"Title"),g.qZA(),g.TgZ(7,"div",3),g._UZ(8,"i",4)(9,"input",5),g.qZA(),g.YNc(10,AR,2,1,"div",6),g.qZA(),g.TgZ(11,"div",2)(12,"h2"),g._uU(13,"Author"),g.qZA(),g.TgZ(14,"div",3),g._UZ(15,"i",4)(16,"input",7),g.qZA(),g.YNc(17,xR,2,1,"div",6),g.qZA(),g.TgZ(18,"div",2)(19,"h2"),g._uU(20,"Description"),g.qZA(),g._UZ(21,"textarea",8),g.YNc(22,OR,2,1,"div",6),g.qZA(),g.TgZ(23,"div",9)(24,"a",10),g._uU(25,"Cancel"),g.qZA(),g._UZ(26,"input",11),g.qZA()()),2&t&&(g.xp6(3),g.Q6J("formGroup",r.taskForm),g.xp6(7),g.Q6J("ngIf",r.taskForm.controls.title.invalid&&(r.taskForm.controls.title.dirty||r.taskForm.controls.title.touched)),g.xp6(7),g.Q6J("ngIf",r.taskForm.controls.author.invalid&&(r.taskForm.controls.author.dirty||r.taskForm.controls.author.touched)),g.xp6(5),g.Q6J("ngIf",r.taskForm.controls.description.invalid&&(r.taskForm.controls.description.dirty||r.taskForm.controls.description.touched)),g.xp6(4),g.Q6J("disabled",!r.taskForm.valid))},directives:[gT,nT,b0,_0,tT,pb,C0,Fr,ud],styles:[".create-title[_ngcontent-%COMP%]{width:100%;padding:20px 60px;background-color:var(--background-dark);border-radius:0 0 10px 10px;margin-bottom:25px;text-align:center;font-size:16px;font-weight:700;color:var(--color-table-light)}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:var(--color-table-light);width:70%;height:auto;margin:0 auto 25px;padding:15px;border-radius:10px;box-shadow:0 0 10px 4px var(--background-dark)}form[_ngcontent-%COMP%]   .create-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:90%}form[_ngcontent-%COMP%]   .create-field[_ngcontent-%COMP%]:first-child{margin-top:10px}form[_ngcontent-%COMP%]   .create-field[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--color-alternative-dark);margin-bottom:10px}form[_ngcontent-%COMP%]   .create-field[_ngcontent-%COMP%]   .create-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;margin-bottom:10px}form[_ngcontent-%COMP%]   .create-field[_ngcontent-%COMP%]   .create-input[_ngcontent-%COMP%]:hover{box-shadow:0 0 4px 2px var(--color-table-light)}form[_ngcontent-%COMP%]   .create-field[_ngcontent-%COMP%]   .create-input[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:10%;padding:7px;background-color:#fff;border:2px solid transparent;border-radius:7px 0 0 7px;text-align:center;font-size:20px;color:var(--color-alternative-dark)}form[_ngcontent-%COMP%]   .create-field[_ngcontent-%COMP%]   .create-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;padding:7px;border:2px solid transparent;border-radius:0 7px 7px 0;font-size:17px;transition:all .4s ease}form[_ngcontent-%COMP%]   .create-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:20px;border:2px solid transparent;border-radius:7px;font-size:17px;margin-bottom:10px}form[_ngcontent-%COMP%]   .create-error[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;margin-bottom:10px}form[_ngcontent-%COMP%]   .create-error[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:red}form[_ngcontent-%COMP%]   .create-buttons[_ngcontent-%COMP%]{width:90%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-top:20px;margin-bottom:10px}form[_ngcontent-%COMP%]   .create-buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;font-size:15px;font-weight:700;border:2px solid white;border-radius:5px;transition:all .4s ease}form[_ngcontent-%COMP%]   .create-buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--color-principal)}form[_ngcontent-%COMP%]   .create-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 30px;background-color:var(--color-alternative-dark);color:var(--color-table-light);font-size:15px;font-weight:700;border:2px solid transparent;border-radius:5px;cursor:pointer;transition:all .4s ease}form[_ngcontent-%COMP%]   .create-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{background-color:var(--color-alternative)}form[_ngcontent-%COMP%]   .create-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{opacity:.7}"]}),n})();function PR(n,e){1&n&&(g.TgZ(0,"label",14),g._uU(1," * El campo esta vacio "),g.qZA())}function NR(n,e){if(1&n&&(g.TgZ(0,"div",12),g.YNc(1,PR,2,0,"label",13),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.Q6J("ngIf",t.editForm.controls.title.errors.required)}}function kR(n,e){1&n&&(g.TgZ(0,"label",16),g._uU(1," * El campo esta vacio "),g.qZA())}function FR(n,e){if(1&n&&(g.TgZ(0,"div",12),g.YNc(1,kR,2,0,"label",15),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.Q6J("ngIf",t.editForm.controls.author.errors.required)}}function LR(n,e){1&n&&(g.TgZ(0,"label",18),g._uU(1," * El campo esta vaciotitle "),g.qZA())}function VR(n,e){if(1&n&&(g.TgZ(0,"div",12),g.YNc(1,LR,2,0,"label",17),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.Q6J("ngIf",t.editForm.controls.description.errors.required)}}const UR=[{path:"",component:xO},{path:"create",component:RR},{path:"edit/:id",component:(()=>{class n{constructor(t,r,o,u){this.taskService=t,this.formBuilder=r,this.activatedRoute=o,this.router=u,this.editForm=new Km({}),this.editForm=this.formBuilder.group({title:new Ec("",[Wm.required]),description:new Ec("",[Wm.required]),author:new Ec("",[Wm.required])})}ngOnInit(){const t=this.activatedRoute.snapshot.paramMap.get("id");this.taskService.getTaskById(t).subscribe(r=>{this.taskRef=r,this.editForm=this.formBuilder.group({title:[this.taskRef.title],description:[this.taskRef.description],author:[this.taskRef.author]})})}onSubmit(){const t=this.activatedRoute.snapshot.paramMap.get("id");this.taskService.updateTask(this.editForm.value,t),this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(QD),g.Y36(Dx),g.Y36(uo),g.Y36(qr))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-edit"]],decls:27,vars:5,consts:[[1,"edit-title"],["action","",3,"formGroup","ngSubmit"],[1,"edit-field"],[1,"edit-input"],[1,"fa-solid","fa-user"],["type","text","formControlName","title","id","","required",""],["class","edit-error",4,"ngIf"],["type","text","formControlName","author","id","","required",""],["formControlName","description","id","","cols","30","rows","10","required",""],[1,"edit-buttons"],["routerLink","/"],["type","submit","value","Edit",3,"disabled"],[1,"edit-error"],["for","title",4,"ngIf"],["for","title"],["for","author",4,"ngIf"],["for","author"],["for","description",4,"ngIf"],["for","description"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"h1"),g._uU(2,"Edit task"),g.qZA()(),g.TgZ(3,"form",1),g.NdJ("ngSubmit",function(){return r.onSubmit()}),g.TgZ(4,"div",2)(5,"h2"),g._uU(6,"Title"),g.qZA(),g.TgZ(7,"div",3),g._UZ(8,"i",4)(9,"input",5),g.qZA(),g.YNc(10,NR,2,1,"div",6),g.qZA(),g.TgZ(11,"div",2)(12,"h2"),g._uU(13,"Author"),g.qZA(),g.TgZ(14,"div",3),g._UZ(15,"i",4)(16,"input",7),g.qZA(),g.YNc(17,FR,2,1,"div",6),g.qZA(),g.TgZ(18,"div",2)(19,"h2"),g._uU(20,"Description"),g.qZA(),g._UZ(21,"textarea",8),g.YNc(22,VR,2,1,"div",6),g.qZA(),g.TgZ(23,"div",9)(24,"a",10),g._uU(25,"Cancel"),g.qZA(),g._UZ(26,"input",11),g.qZA()()),2&t&&(g.xp6(3),g.Q6J("formGroup",r.editForm),g.xp6(7),g.Q6J("ngIf",r.editForm.controls.title.invalid&&(r.editForm.controls.title.dirty||r.editForm.controls.title.touched)),g.xp6(7),g.Q6J("ngIf",r.editForm.controls.author.invalid&&(r.editForm.controls.author.dirty||r.editForm.controls.author.touched)),g.xp6(5),g.Q6J("ngIf",r.editForm.controls.description.invalid&&(r.editForm.controls.description.dirty||r.editForm.controls.description.touched)),g.xp6(4),g.Q6J("disabled",!r.editForm.valid))},directives:[gT,nT,b0,_0,tT,pb,C0,Fr,ud],styles:[".edit-title[_ngcontent-%COMP%]{width:100%;padding:20px 60px;background-color:var(--background-dark);border-radius:0 0 10px 10px;margin-bottom:25px;text-align:center;font-size:16px;font-weight:700;color:var(--color-table-light)}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:var(--color-table-light);width:70%;height:auto;margin:0 auto 25px;padding:15px;border-radius:10px;box-shadow:0 0 10px 4px var(--background-dark)}form[_ngcontent-%COMP%]   .edit-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:90%}form[_ngcontent-%COMP%]   .edit-field[_ngcontent-%COMP%]:first-child{margin-top:10px}form[_ngcontent-%COMP%]   .edit-field[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--color-alternative-dark);margin-bottom:10px}form[_ngcontent-%COMP%]   .edit-field[_ngcontent-%COMP%]   .edit-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;margin-bottom:10px}form[_ngcontent-%COMP%]   .edit-field[_ngcontent-%COMP%]   .edit-input[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:10%;padding:7px;background-color:#fff;border:2px solid transparent;border-radius:7px 0 0 7px;text-align:center;font-size:20px;color:var(--color-alternative-dark)}form[_ngcontent-%COMP%]   .edit-field[_ngcontent-%COMP%]   .edit-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;padding:7px;border:2px solid transparent;border-radius:0 7px 7px 0;font-size:17px;transition:all .4s ease}form[_ngcontent-%COMP%]   .edit-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:20px;border:2px solid transparent;border-radius:7px;font-size:17px;margin-bottom:10px}form[_ngcontent-%COMP%]   .edit-error[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;margin-bottom:10px}form[_ngcontent-%COMP%]   .edit-error[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:red}form[_ngcontent-%COMP%]   .edit-buttons[_ngcontent-%COMP%]{width:90%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-top:20px;margin-bottom:10px}form[_ngcontent-%COMP%]   .edit-buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;font-size:15px;font-weight:700;border:2px solid white;border-radius:5px;transition:all .4s ease}form[_ngcontent-%COMP%]   .edit-buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--color-principal)}form[_ngcontent-%COMP%]   .edit-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 30px;background-color:var(--color-alternative-dark);color:var(--color-table-light);font-size:15px;font-weight:700;border:2px solid transparent;border-radius:5px;cursor:pointer;transition:all .4s ease}form[_ngcontent-%COMP%]   .edit-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{background-color:var(--color-alternative)}form[_ngcontent-%COMP%]   .edit-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{opacity:.7}"]}),n})()}];let BR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[ef.forRoot(UR)],ef]}),n})(),jR=(()=>{class n{constructor(){this.title="Basic-crud-angular-firebase"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:13,vars:0,consts:[["id","title"],[1,"title-images"],["src","assets/images/angular.webp","alt","basic-crud-angular-luca-lagos"],["src","assets/images/firebase.webp","alt","basic-crud-firebase-luca-lagos"]],template:function(t,r){1&t&&(g.TgZ(0,"main")(1,"section",0)(2,"h1"),g._uU(3,"Basic CRUD with "),g.TgZ(4,"strong"),g._uU(5,"Angular"),g.qZA(),g._uU(6," + "),g.TgZ(7,"strong"),g._uU(8,"Firebase"),g.qZA()(),g.TgZ(9,"div",1),g._UZ(10,"img",2)(11,"img",3),g.qZA()(),g._UZ(12,"router-outlet"),g.qZA())},directives:[Il],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;margin:0 auto;width:1000px;height:auto;background-color:#fff;border-radius:10px;box-shadow:0 0 16px 2px var(--color-table-dark)}main[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:15px 40px;background-color:var(--background-principal);border-radius:10px 10px 0 0}main[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]   .title-images[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}main[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px;font-weight:700;color:var(--color-table-dark)}main[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]:first-child{color:var(--color-principal);text-shadow:0px 0px 16px var(--color-principal)}main[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]:last-child{color:var(--color-alternative);text-shadow:0px 0px 16px var(--color-alternative)}main[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]   .title-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:120px}"]}),n})();const Tx_firebaseConfig={apiKey:"AIzaSyCNcd97Z_dCo7SVbTR9T8NTED1Y7HVIxvU",authDomain:"basic-crud-angular-firebase.firebaseapp.com",projectId:"basic-crud-angular-firebase",storageBucket:"basic-crud-angular-firebase.appspot.com",messagingSenderId:"534449162617",appId:"1:534449162617:web:b97103e350df327a6b47a8",measurementId:"G-7G0TY5V200"};let $R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[jR]}),n.\u0275inj=g.cJS({providers:[],imports:[[ca,BR,os.hO.initializeApp(Tx_firebaseConfig),vO,AO,CR,Cx]]}),n})();(0,g.G48)(),Yu().bootstrapModule($R).catch(n=>console.error(n))},5867:(at,De,N)=>{N.d(De,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=N(9681);(0,g.registerVersion)("firebase","9.7.0","app")},127:(at,De,N)=>{N.d(De,{Z:()=>g.Z});var g=N(3942);g.Z.registerVersion("firebase","9.7.0","app-compat")},820:(at,De,N)=>{N.r(De);var g=N(5861),W=N(3942),P=N(2090),se=N(9681),J=N(655),fe=N(1877),re=N(4859);const Me=function qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ke=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),et=new fe.Yd("@firebase/auth");function Ze(y,...h){et.logLevel<=fe.in.ERROR&&et.error(`Auth (${se.SDK_VERSION}): ${y}`,...h)}function be(y,...h){throw je(y,...h)}function me(y,...h){return je(y,...h)}function _e(y,h,p){const v=Object.assign(Object.assign({},ke()),{[h]:p});return new P.LL("auth","Firebase",v).create(h,{appName:y.name})}function $e(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&be(y,"argument-error"),_e(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return he.create(y,...h)}function te(y,h,...p){if(!y)throw je(h,...p)}function ze(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Ze(h),new Error(h)}function Q(y,h){y||ze(h)}const ie=new Map;function ee(y){Q(y instanceof Function,"Expected a class definition");let h=ie.get(y);return h?(Q(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ie.set(y,h),h)}function Ne(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function _t(){return"http:"===jt()||"https:"===jt()}function jt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Ft{constructor(h,p){this.shortDelay=h,this.longDelay=p,Q(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Xt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_t()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zn(y,h){Q(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class yn{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ze("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ze("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ze("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ui=new Ft(3e4,6e4);function $t(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Lt(y,h,p,v){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,g.Z)(function*(y,h,p,v,A={}){return Zr(y,A,(0,g.Z)(function*(){let O={},G={};v&&("GET"===h?G=v:O={body:JSON.stringify(v)});const ne=(0,P.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),yn.fetch()(Cr(y,y.config.apiHost,p,ne),Object.assign({method:h,headers:Ve,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Zr(y,h,p){return ps.apply(this,arguments)}function ps(){return(ps=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Kt),h);try{const A=new Gi(y),O=yield Promise.race([p(),A.promise]);A.clearNetworkTimeout();const G=yield O.json();if("needConfirmation"in G)throw qi(y,"account-exists-with-different-credential",G);if(O.ok&&!("errorMessage"in G))return G;{const ne=O.ok?G.errorMessage:G.error.message,[Ve,Je]=ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw qi(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Ve)throw qi(y,"email-already-in-use",G);const pt=v[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw _e(y,pt,Je);be(y,pt)}}catch(A){if(A instanceof P.ZR)throw A;be(y,"network-request-failed")}})).apply(this,arguments)}function br(y,h,p,v){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,g.Z)(function*(y,h,p,v,A={}){const O=yield Lt(y,h,p,v,A);return"mfaPendingCredential"in O&&be(y,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Cr(y,h,p,v){const A=`${h}${p}?${v}`;return y.config.emulator?zn(y.config,A):`${y.config.apiScheme}://${A}`}class Gi{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(me(this.auth,"network-request-failed")),ui.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qi(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const A=me(y,h,v);return A.customData._tokenResponse=p,A}function kr(){return(kr=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Wn(y,h){return Un.apply(this,arguments)}function Un(){return(Un=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Kr(y,h){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function hn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function ta(){return(ta=(0,g.Z)(function*(y,h=!1){const p=(0,P.m9)(y),v=yield p.getIdToken(h),A=it(v);te(A&&A.exp&&A.auth_time&&A.iat,p.auth,"internal-error");const O="object"==typeof A.firebase?A.firebase:void 0,G=null==O?void 0:O.sign_in_provider;return{claims:A,token:v,authTime:hn(Vt(A.auth_time)),issuedAtTime:hn(Vt(A.iat)),expirationTime:hn(Vt(A.exp)),signInProvider:G||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function Vt(y){return 1e3*Number(y)}function it(y){const[h,p,v]=y.split(".");if(void 0===h||void 0===p||void 0===v)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,P.tV)(p);return A?JSON.parse(A):(Ze("Failed to decode base64 JWT payload"),null)}catch(A){return Ze("Caught error parsing JWT payload as JSON",A),null}}function Xn(y,h){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof P.ZR&&kt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function kt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Gs{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const A=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class lr{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=hn(this.lastLoginAt),this.creationTime=hn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function er(y){return lt.apply(this,arguments)}function lt(){return(lt=(0,g.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),A=yield Xn(y,Kr(p,{idToken:v}));te(null==A?void 0:A.users.length,p,"internal-error");const O=A.users[0];y._notifyReloadListener(O);const G=(null===(h=O.providerUserInfo)||void 0===h?void 0:h.length)?Ce(O.providerUserInfo):[],ne=Ke(y.providerData,G),pt=!!y.isAnonymous&&!(y.email&&O.passwordHash||(null==ne?void 0:ne.length)),ot={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ne,metadata:new lr(O.createdAt,O.lastLoginAt),isAnonymous:pt};Object.assign(y,ot)})).apply(this,arguments)}function Ot(){return(Ot=(0,g.Z)(function*(y){const h=(0,P.m9)(y);yield er(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ke(y,h){return[...y.filter(v=>!h.some(A=>A.providerId===v.providerId)),...h]}function Ce(y){return y.map(h=>{var{providerId:p}=h,v=(0,J._T)(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ct(){return(ct=(0,g.Z)(function*(y,h){const p=yield Zr(y,{},(0,g.Z)(function*(){const v=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:O}=y.config,G=Cr(y,A,"/v1/token",`key=${O}`),ne=yield y._getAdditionalHeaders();return ne["Content-Type"]="application/x-www-form-urlencoded",yn.fetch()(G,{method:"POST",headers:ne,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Nt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){te(h.idToken,"internal-error"),te(void 0!==h.idToken,"internal-error"),te(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function gt(y){const h=it(y);return te(h,"internal-error"),te(void 0!==h.exp,"internal-error"),te(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,g.Z)(function*(){return te(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,g.Z)(function*(){const{accessToken:A,refreshToken:O,expiresIn:G}=yield function Ye(y,h){return ct.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(A,O,Number(G))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:A,expirationTime:O}=p,G=new Nt;return v&&(te("string"==typeof v,"internal-error",{appName:h}),G.refreshToken=v),A&&(te("string"==typeof A,"internal-error",{appName:h}),G.accessToken=A),O&&(te("number"==typeof O,"internal-error",{appName:h}),G.expirationTime=O),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Nt,this.toJSON())}_performRefresh(){return ze("not implemented")}}function St(y,h){te("string"==typeof y||void 0===y,"internal-error",{appName:h})}class U{constructor(h){var{uid:p,auth:v,stsTokenManager:A}=h,O=(0,J._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new lr(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const v=yield Xn(p,p.stsTokenManager.getToken(p.auth,h));return te(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function gs(y){return ta.apply(this,arguments)}(this,h)}reload(){return function cr(y){return Ot.apply(this,arguments)}(this)}_assign(h){this!==h&&(te(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new U(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,g.Z)(function*(){let A=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),A=!0),p&&(yield er(v)),yield v.auth._persistUserIfCurrent(v),A&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield Xn(h,function ut(y,h){return kr.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,A,O,G,ne,Ve,Je,pt;const ot=null!==(v=p.displayName)&&void 0!==v?v:void 0,In=null!==(A=p.email)&&void 0!==A?A:void 0,Fi=null!==(O=p.phoneNumber)&&void 0!==O?O:void 0,Sl=null!==(G=p.photoURL)&&void 0!==G?G:void 0,pu=null!==(ne=p.tenantId)&&void 0!==ne?ne:void 0,gu=null!==(Ve=p._redirectEventId)&&void 0!==Ve?Ve:void 0,Qh=null!==(Je=p.createdAt)&&void 0!==Je?Je:void 0,Dy=null!==(pt=p.lastLoginAt)&&void 0!==pt?pt:void 0,{uid:Ho,emailVerified:sd,isAnonymous:od,providerData:Jh,stsTokenManager:ad}=p;te(Ho&&ad,h,"internal-error");const qr=Nt.fromJSON(this.name,ad);te("string"==typeof Ho,h,"internal-error"),St(ot,h.name),St(In,h.name),te("boolean"==typeof sd,h,"internal-error"),te("boolean"==typeof od,h,"internal-error"),St(Fi,h.name),St(Sl,h.name),St(pu,h.name),St(gu,h.name),St(Qh,h.name),St(Dy,h.name);const Xh=new U({uid:Ho,auth:h,email:In,emailVerified:sd,displayName:ot,isAnonymous:od,photoURL:Sl,phoneNumber:Fi,tenantId:pu,stsTokenManager:qr,createdAt:Qh,lastLoginAt:Dy});return Jh&&Array.isArray(Jh)&&(Xh.providerData=Jh.map(ng=>Object.assign({},ng))),gu&&(Xh._redirectEventId=gu),Xh}static _fromIdTokenResponse(h,p,v=!1){return(0,g.Z)(function*(){const A=new Nt;A.updateFromServerResponse(p);const O=new U({uid:p.localId,auth:h,stsTokenManager:A,isAnonymous:v});return yield er(O),O})()}}const $=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,v){var A=this;return(0,g.Z)(function*(){A.storage[p]=v})()}_get(p){var v=this;return(0,g.Z)(function*(){const A=v.storage[p];return void 0===A?null:A})()}_remove(p){var v=this;return(0,g.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function ue(y,h,p){return`firebase:${y}:${h}:${p}`}class Z{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:A,name:O}=this.auth;this.fullUserKey=ue(this.userKey,A.apiKey,O),this.fullPersistenceKey=ue("persistence",A.apiKey,O),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?U._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,g.Z)(function*(){if(!p.length)return new Z(ee($),h,v);const A=(yield Promise.all(p.map(function(){var Je=(0,g.Z)(function*(pt){if(yield pt._isAvailable())return pt});return function(pt){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let O=A[0]||ee($);const G=ue(v,h.config.apiKey,h.name);let ne=null;for(const Je of p)try{const pt=yield Je._get(G);if(pt){const ot=U._fromJSON(h,pt);Je!==O&&(ne=ot),O=Je;break}}catch(pt){}const Ve=A.filter(Je=>Je._shouldAllowMigration);return O._shouldAllowMigration&&Ve.length?(O=Ve[0],ne&&(yield O._set(G,ne.toJSON())),yield Promise.all(p.map(function(){var Je=(0,g.Z)(function*(pt){if(pt!==O)try{yield pt._remove(G)}catch(ot){}});return function(pt){return Je.apply(this,arguments)}}())),new Z(O,h,v)):new Z(O,h,v)})()}}function Le(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ut(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ht(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(bt(h))return"Blackberry";if(sn(h))return"Webos";if(Ht(h))return"Safari";if((h.includes("chrome/")||dr(h))&&!h.includes("edge/"))return"Chrome";if(_n(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function ht(y=(0,P.z$)()){return/firefox\//i.test(y)}function Ht(y=(0,P.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function dr(y=(0,P.z$)()){return/crios\//i.test(y)}function Ut(y=(0,P.z$)()){return/iemobile/i.test(y)}function _n(y=(0,P.z$)()){return/android/i.test(y)}function bt(y=(0,P.z$)()){return/blackberry/i.test(y)}function sn(y=(0,P.z$)()){return/webos/i.test(y)}function Kn(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)}function zi(y=(0,P.z$)()){return Kn(y)||_n(y)||sn(y)||bt(y)||/windows phone/i.test(y)||Ut(y)}function ra(y,h=[]){let p;switch(y){case"Browser":p=Le((0,P.z$)());break;case"Worker":p=`${Le((0,P.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${se.SDK_VERSION}/${v}`}class Yr{constructor(h,p,v){this.app=h,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tt(this),this.idTokenSubscription=new Tt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=ee(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var A,O;if(!v._deleted&&(v.persistenceManager=yield Z.create(v,h),!v._deleted)){if(null===(A=v._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(G){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(O=v.currentUser)||void 0===O?void 0:O.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var v;let A=yield p.assertedPersistence.getCurrentUser();if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const O=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,G=null==A?void 0:A._redirectEventId,ne=yield p.tryRedirectSignIn(h);(!O||O===G)&&(null==ne?void 0:ne.user)&&(A=ne.user)}return A?A._redirectEventId?(te(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===A._redirectEventId?p.directlySetCurrentUser(A):p.reloadAndSetCurrentUserOrClear(A)):p.reloadAndSetCurrentUserOrClear(A):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(A){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){try{yield er(h)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ge(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const v=h?(0,P.m9)(h):null;return v&&te(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){if(!p._deleted)return h&&te(p.tenantId===h.tenantId,p,"tenant-id-mismatch"),p.queue((0,g.Z)(function*(){yield p.directlySetCurrentUser(h),p.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(ee(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,g.Z)(function*(){const A=yield v.getOrInitRedirectPersistenceManager(p);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&ee(h)||p._popupRedirectResolver;te(v,p,"argument-error"),p.redirectPersistenceManager=yield Z.create(p,[ee(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var v,A;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(A=p.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,A){if(this._deleted)return()=>{};const O="function"==typeof p?p:p.next.bind(p),G=this._isInitialized?Promise.resolve():this._initializationPromise;return te(G,this,"internal-error"),G.then(()=>O(this.currentUser)),"function"==typeof p?h.addObserver(p,v,A):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ra(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const A=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return A&&(v["X-Firebase-Client"]=A),v})()}}function Oe(y){return(0,P.m9)(y)}class Tt{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(p=>this.observer=p)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function tr(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Nn(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class en{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ze("not implemented")}_getIdTokenResponse(h){return ze("not implemented")}_linkToIdToken(h,p){return ze("not implemented")}_getReauthenticationResolver(h){return ze("not implemented")}}function xn(y,h){return ys.apply(this,arguments)}function ys(){return(ys=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:resetPassword",$t(y,h))})).apply(this,arguments)}function Et(y,h){return bo.apply(this,arguments)}function bo(){return(bo=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function zs(y,h){return ia.apply(this,arguments)}function ia(){return(ia=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",$t(y,h))})).apply(this,arguments)}function nr(){return(nr=(0,g.Z)(function*(y,h){return br(y,"POST","/v1/accounts:signInWithPassword",$t(y,h))})).apply(this,arguments)}function Wi(y,h){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:sendOobCode",$t(y,h))})).apply(this,arguments)}function Fr(y,h){return tn.apply(this,arguments)}function tn(){return(tn=(0,g.Z)(function*(y,h){return Wi(y,h)})).apply(this,arguments)}function Va(y,h){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,g.Z)(function*(y,h){return Wi(y,h)})).apply(this,arguments)}function li(y,h){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,g.Z)(function*(y,h){return Wi(y,h)})).apply(this,arguments)}function Ic(y,h){return vs.apply(this,arguments)}function vs(){return(vs=(0,g.Z)(function*(y,h){return Wi(y,h)})).apply(this,arguments)}function Lr(){return(Lr=(0,g.Z)(function*(y,h){return br(y,"POST","/v1/accounts:signInWithEmailLink",$t(y,h))})).apply(this,arguments)}function bc(){return(bc=(0,g.Z)(function*(y,h){return br(y,"POST","/v1/accounts:signInWithEmailLink",$t(y,h))})).apply(this,arguments)}class ja extends en{constructor(h,p,v,A=null){super("password",v),this._email=h,this._password=p,this._tenantId=A}static _fromEmailAndPassword(h,p){return new ja(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new ja(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function _s(y,h){return nr.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Ba(y,h){return Lr.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:be(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return Et(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function vh(y,h){return bc.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:be(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function kn(y,h){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,g.Z)(function*(y,h){return br(y,"POST","/v1/accounts:signInWithIdp",$t(y,h))})).apply(this,arguments)}class Ki extends en{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Ki(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):be("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:A}=p,O=(0,J._T)(p,["providerId","signInMethod"]);if(!v||!A)return null;const G=new Ki(v,A);return G.idToken=O.idToken||void 0,G.accessToken=O.accessToken||void 0,G.secret=O.secret,G.nonce=O.nonce,G.pendingToken=O.pendingToken||null,G}_getIdTokenResponse(h){return kn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,kn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,kn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,P.xO)(p)}return h}}function Op(y,h){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:sendVerificationCode",$t(y,h))})).apply(this,arguments)}function ws(){return(ws=(0,g.Z)(function*(y,h){return br(y,"POST","/v1/accounts:signInWithPhoneNumber",$t(y,h))})).apply(this,arguments)}function Tc(){return(Tc=(0,g.Z)(function*(y,h){const p=yield br(y,"POST","/v1/accounts:signInWithPhoneNumber",$t(y,h));if(p.temporaryProof)throw qi(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Pp={USER_NOT_FOUND:"user-not-found"};function Ac(){return(Ac=(0,g.Z)(function*(y,h){return br(y,"POST","/v1/accounts:signInWithPhoneNumber",$t(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Pp)})).apply(this,arguments)}class Co extends en{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Co({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Co({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Bu(y,h){return ws.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Rp(y,h){return Tc.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Np(y,h){return Ac.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:A}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:A,temporaryProof:O}=h;return v||p||A||O?new Co({verificationId:p,verificationCode:v,phoneNumber:A,temporaryProof:O}):null}}class Ws{constructor(h){var p,v,A,O,G,ne;const Ve=(0,P.zd)((0,P.pd)(h)),Je=null!==(p=Ve.apiKey)&&void 0!==p?p:null,pt=null!==(v=Ve.oobCode)&&void 0!==v?v:null,ot=function Ym(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ve.mode)&&void 0!==A?A:null);te(Je&&pt&&ot,"argument-error"),this.apiKey=Je,this.operation=ot,this.code=pt,this.continueUrl=null!==(O=Ve.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(G=Ve.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ne=Ve.tenantId)&&void 0!==ne?ne:null}static parseLink(h){const p=function $a(y){const h=(0,P.zd)((0,P.pd)(y)).link,p=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,v=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(v?(0,P.zd)((0,P.pd)(v)).link:null)||v||p||h||y}(h);try{return new Ws(p)}catch(v){return null}}}let ju=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return ja._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const A=Ws.parseLink(v);return te(A,"argument-error"),ja._fromEmailAndCode(p,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Es{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Vr extends Es{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Do extends Vr{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return te("providerId"in p&&"signInMethod"in p,"argument-error"),Ki._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return te(h.idToken||h.accessToken,"argument-error"),Ki._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Do.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Do.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:A,pendingToken:O,nonce:G,providerId:ne}=h;if(!v&&!A&&!p&&!O||!ne)return null;try{return new Do(ne)._credential({idToken:p,accessToken:v,nonce:G,pendingToken:O})}catch(Ve){return null}}}let Zs=(()=>{class y extends Vr{constructor(){super("facebook.com")}static credential(p){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),sa=(()=>{class y extends Vr{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:A}=p;if(!v&&!A)return null;try{return y.credential(v,A)}catch(O){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Sc=(()=>{class y extends Vr{constructor(){super("github.com")}static credential(p){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class To extends en{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return kn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,kn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,kn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:A,pendingToken:O}=p;return v&&A&&O&&v===A?new To(v,O):null}static _create(h,p){return new To(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Jr extends Es{constructor(h){te(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Jr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Jr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=To.fromJSON(h);return te(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return To._create(v,p)}catch(A){return null}}}let Ha=(()=>{class y extends Vr{constructor(){super("twitter.com")}static credential(p,v){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:A}=p;if(!v||!A)return null;try{return y.credential(v,A)}catch(O){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ga(y,h){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,g.Z)(function*(y,h){return br(y,"POST","/v1/accounts:signUp",$t(y,h))})).apply(this,arguments)}class rr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,A=!1){return(0,g.Z)(function*(){const O=yield U._fromIdTokenResponse(h,v,A),G=Eh(v);return new rr({user:O,providerId:G,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const A=Eh(v);return new rr({user:h,providerId:A,_tokenResponse:v,operationType:p})})()}}function Eh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function xc(){return(xc=(0,g.Z)(function*(y){var h;const p=Oe(y);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new rr({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Ga(p,{returnSecureToken:!0}),A=yield rr._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class za extends P.ZR{constructor(h,p,v,A){var O;super(p.code,p.message),this.operationType=v,this.user=A,Object.setPrototypeOf(this,za.prototype),this.customData={appName:h.name,tenantId:null!==(O=h.tenantId)&&void 0!==O?O:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,A){return new za(h,p,v,A)}}function Wa(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?za._fromErrorAndOperation(y,O,h,v):O})}function Yi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function $u(){return($u=(0,g.Z)(function*(y,h){const p=(0,P.m9)(y);yield bs(!0,p,h);const{providerUserInfo:v}=yield Wn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),A=Yi(v||[]);return p.providerData=p.providerData.filter(O=>A.has(O.providerId)),A.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function ln(y,h){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,g.Z)(function*(y,h,p=!1){const v=yield Xn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return rr._forOperation(y,"link",v)})).apply(this,arguments)}function bs(y,h,p){return nn.apply(this,arguments)}function nn(){return(nn=(0,g.Z)(function*(y,h,p){yield er(h);const A=!1===y?"provider-already-linked":"no-such-provider";te(Yi(h.providerData).has(p)===y,h.auth,A)})).apply(this,arguments)}function Mc(y,h){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,g.Z)(function*(y,h,p=!1){const{auth:v}=y,A="reauthenticate";try{const O=yield Xn(y,Wa(v,A,h,y),p);te(O.idToken,v,"internal-error");const G=it(O.idToken);te(G,v,"internal-error");const{sub:ne}=G;return te(y.uid===ne,v,"user-mismatch"),rr._forOperation(y,A,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&be(v,"user-mismatch"),O}})).apply(this,arguments)}function Ys(y,h){return hr.apply(this,arguments)}function hr(){return(hr=(0,g.Z)(function*(y,h,p=!1){const v="signIn",A=yield Wa(y,v,h),O=yield rr._fromIdTokenResponse(y,v,A);return p||(yield y._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Mn(y,h){return aa.apply(this,arguments)}function aa(){return(aa=(0,g.Z)(function*(y,h){return Ys(Oe(y),h)})).apply(this,arguments)}function ci(y,h){return fr.apply(this,arguments)}function fr(){return(fr=(0,g.Z)(function*(y,h){const p=(0,P.m9)(y);return yield bs(!1,p,h.providerId),ln(p,h)})).apply(this,arguments)}function Cs(y,h){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,g.Z)(function*(y,h){return Mc((0,P.m9)(y),h)})).apply(this,arguments)}function Za(y,h){return Br.apply(this,arguments)}function Br(){return(Br=(0,g.Z)(function*(y,h){return br(y,"POST","/v1/accounts:signInWithCustomToken",$t(y,h))})).apply(this,arguments)}function Ts(){return(Ts=(0,g.Z)(function*(y,h){const p=Oe(y),v=yield Za(p,{token:h,returnSecureToken:!0}),A=yield rr._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class dt{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Ka._fromServerResponse(h,p):be(h,"internal-error")}}class Ka extends dt{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Ka(p)}}function ua(y,h,p){var v;te((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),te(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(te(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(te(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Qa(){return(Qa=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y),A={requestType:"PASSWORD_RESET",email:h};p&&ua(v,A,p),yield Va(v,A)})).apply(this,arguments)}function Hu(){return(Hu=(0,g.Z)(function*(y,h,p){yield xn((0,P.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Ee(){return(Ee=(0,g.Z)(function*(y,h){yield zs((0,P.m9)(y),{oobCode:h})})).apply(this,arguments)}function xt(y,h){return qu.apply(this,arguments)}function qu(){return(qu=(0,g.Z)(function*(y,h){const p=(0,P.m9)(y),v=yield xn(p,{oobCode:h}),A=v.requestType;switch(te(A,p,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(v.mfaInfo,p,"internal-error");default:te(v.email,p,"internal-error")}let O=null;return v.mfaInfo&&(O=dt._fromServerResponse(Oe(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:O},operation:A}})).apply(this,arguments)}function So(){return(So=(0,g.Z)(function*(y,h){const{data:p}=yield xt((0,P.m9)(y),h);return p.email})).apply(this,arguments)}function jr(){return(jr=(0,g.Z)(function*(y,h,p){const v=Oe(y),A=yield Ga(v,{returnSecureToken:!0,email:h,password:p}),O=yield rr._fromIdTokenResponse(v,"signIn",A);return yield v._updateCurrentUser(O.user),O})).apply(this,arguments)}function Oc(){return(Oc=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y),A={requestType:"EMAIL_SIGNIN",email:h};te(p.handleCodeInApp,v,"argument-error"),p&&ua(v,A,p),yield li(v,A)})).apply(this,arguments)}function As(){return(As=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y),A=ju.credentialWithLink(h,p||Ne());return te(A._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Mn(v,A)})).apply(this,arguments)}function ir(y,h){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:createAuthUri",$t(y,h))})).apply(this,arguments)}function Ss(){return(Ss=(0,g.Z)(function*(y,h){const v={identifier:h,continueUri:_t()?Ne():"http://localhost"},{signinMethods:A}=yield ir((0,P.m9)(y),v);return A||[]})).apply(this,arguments)}function Ku(){return(Ku=(0,g.Z)(function*(y,h){const p=(0,P.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&ua(p.auth,A,h);const{email:O}=yield Fr(p.auth,A);O!==y.email&&(yield y.reload())})).apply(this,arguments)}function nu(){return(nu=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&ua(v.auth,O,p);const{email:G}=yield Ic(v.auth,O);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function Yu(y,h){return la.apply(this,arguments)}function la(){return(la=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Qu(){return(Qu=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,P.m9)(y),O={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},G=yield Xn(v,Yu(v.auth,O));v.displayName=G.displayName||null,v.photoURL=G.photoUrl||null;const ne=v.providerData.find(({providerId:Ve})=>"password"===Ve);ne&&(ne.displayName=v.displayName,ne.photoURL=v.photoURL),yield v._updateTokensIfNecessary(G)})).apply(this,arguments)}function Xu(y,h,p){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,g.Z)(function*(y,h,p){const{auth:v}=y,O={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(O.email=h),p&&(O.password=p);const G=yield Xn(y,Et(v,O));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Js{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class Nc extends Js{constructor(h,p,v,A){super(h,p,v),this.username=A}}class kc extends Js{constructor(h,p){super(h,"facebook.com",p)}}class Xs extends Nc{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class xs extends Js{constructor(h,p){super(h,"google.com",p)}}class el extends Nc{constructor(h,p,v){super(h,"twitter.com",p,v)}}function pr(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Pc(y){var h,p;if(!y)return null;const{providerId:v}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},O=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const G=null===(p=null===(h=it(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(G)return new Js(O,"anonymous"!==G&&"custom"!==G?G:null)}if(!v)return null;switch(v){case"facebook.com":return new kc(O,A);case"github.com":return new Xs(O,A);case"google.com":return new xs(O,A);case"twitter.com":return new el(O,A,y.screenName||null);case"custom":case"anonymous":return new Js(O,null);default:return new Js(O,v,A)}}(p)}class Ji{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new Ji("enroll",h)}static _fromMfaPendingCredential(h){return new Ji("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return Ji._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return Ji._fromIdtoken(h.multiFactorSession.idToken)}return null}}class da{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=Oe(h),A=p.customData._serverResponse,O=(A.mfaInfo||[]).map(ne=>dt._fromServerResponse(v,ne));te(A.mfaPendingCredential,v,"internal-error");const G=Ji._fromMfaPendingCredential(A.mfaPendingCredential);return new da(G,O,function(){var ne=(0,g.Z)(function*(Ve){const Je=yield Ve._process(v,G);delete A.mfaInfo,delete A.mfaPendingCredential;const pt=Object.assign(Object.assign({},A),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(p.operationType){case"signIn":const ot=yield rr._fromIdTokenResponse(v,p.operationType,pt);return yield v._updateCurrentUser(ot.user),ot;case"reauthenticate":return te(p.user,v,"internal-error"),rr._forOperation(p.user,p.operationType,pt);default:be(v,"internal-error")}});return function(Ve){return ne.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function Fn(y,h){return Lt(y,"POST","/v2/accounts/mfaEnrollment:start",$t(y,h))}class Xi{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>dt._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new Xi(h)}getSession(){var h=this;return(0,g.Z)(function*(){return Ji._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var v=this;return(0,g.Z)(function*(){const A=h,O=yield v.getSession(),G=yield Xn(v.user,A._process(v.user.auth,O,p));return yield v.user._updateTokensIfNecessary(G),v.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){const v="string"==typeof h?h:h.uid,A=yield p.user.getIdToken(),O=yield Xn(p.user,function Fp(y,h){return Lt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(y,h))}(p.user.auth,{idToken:A,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:G})=>G!==v),yield p.user._updateTokensIfNecessary(O);try{yield p.user.reload()}catch(G){if("auth/user-token-expired"!==G.code)throw G}})()}}const Mo=new WeakMap,rl="__sak";class eo{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(rl,"1"),this.storage.removeItem(rl),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Rn=(()=>{class y extends eo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Vc(){const y=(0,P.z$)();return Ht(y)||Kn(y)}()&&function Bn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=zi(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const A=this.storage.getItem(v),O=this.localCache[v];A!==O&&p(v,O,A)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((ne,Ve,Je)=>{this.notifyListeners(ne,Je)});const A=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ne=this.storage.getItem(A);if(p.newValue!==ne)null!==p.newValue?this.storage.setItem(A,p.newValue):this.storage.removeItem(A);else if(this.localCache[A]===p.newValue&&!v)return}const O=()=>{const ne=this.storage.getItem(A);!v&&this.localCache[A]===ne||this.notifyListeners(A,ne)},G=this.storage.getItem(A);!function na(){return(0,P.w1)()&&10===document.documentMode}()||G===p.newValue||p.newValue===p.oldValue?O():setTimeout(O,10)}notifyListeners(p,v){this.localCache[p]=v;const A=this.listeners[p];if(A)for(const O of Array.from(A))O(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var A=()=>super._set,O=this;return(0,g.Z)(function*(){yield A().call(O,p,v),O.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,A=this;return(0,g.Z)(function*(){const O=yield v().call(A,p);return A.localCache[p]=JSON.stringify(O),O})()}_remove(p){var v=()=>super._remove,A=this;return(0,g.Z)(function*(){yield v().call(A,p),delete A.localCache[p]})()}}return y.type="LOCAL",y})(),sr=(()=>{class y extends eo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let Hr=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(O=>O.isListeningto(p));if(v)return v;const A=new y(p);return this.receivers.push(A),A}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,g.Z)(function*(){const A=p,{eventId:O,eventType:G,data:ne}=A.data,Ve=v.handlersMap[G];if(!(null==Ve?void 0:Ve.size))return;A.ports[0].postMessage({status:"ack",eventId:O,eventType:G});const Je=Array.from(Ve).map(function(){var ot=(0,g.Z)(function*(In){return In(A.origin,ne)});return function(In){return ot.apply(this,arguments)}}()),pt=yield function $r(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(Je);A.ports[0].postMessage({status:"done",eventId:O,eventType:G,response:pt})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Oo(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class Uc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var A=this;return(0,g.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let G,ne;return new Promise((Ve,Je)=>{const pt=Oo("",20);O.port1.start();const ot=setTimeout(()=>{Je(new Error("unsupported_event"))},v);ne={messageChannel:O,onMessage(In){const Fi=In;if(Fi.data.eventId===pt)switch(Fi.data.status){case"ack":clearTimeout(ot),G=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Ve(Fi.data.response);break;default:clearTimeout(ot),clearTimeout(G),Je(new Error("invalid_response"))}}},A.handlers.add(ne),O.port1.addEventListener("message",ne.onMessage),A.target.postMessage({eventType:h,eventId:pt,data:p},[O.port2])}).finally(()=>{ne&&A.removeMessageHandler(ne)})})()}}function an(){return window}function hi(){return void 0!==an().WorkerGlobalScope&&"function"==typeof an().importScripts}function ei(){return(ei=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const il="firebaseLocalStorageDb",to="firebaseLocalStorage",Ln="fbase_key";class es{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Ro(y,h){return y.transaction([to],h?"readwrite":"readonly").objectStore(to)}function Os(){const y=indexedDB.open(il,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(to,{keyPath:Ln})}catch(A){p(A)}}),y.addEventListener("success",(0,g.Z)(function*(){const v=y.result;v.objectStoreNames.contains(to)?h(v):(v.close(),yield function ti(){const y=indexedDB.deleteDatabase(il);return new es(y).toPromise()}(),h(yield Os()))}))})}function ha(y,h,p){return xi.apply(this,arguments)}function xi(){return(xi=(0,g.Z)(function*(y,h,p){const v=Ro(y,!0).put({[Ln]:h,value:p});return new es(v).toPromise()})).apply(this,arguments)}function Rs(){return(Rs=(0,g.Z)(function*(y,h){const p=Ro(y,!1).get(h),v=yield new es(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Mi(y,h){const p=Ro(y,!0).delete(h);return new es(p).toPromise()}const fi=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield Os()),p.db})()}_withRetries(p){var v=this;return(0,g.Z)(function*(){let A=0;for(;;)try{const O=yield v._openDb();return yield p(O)}catch(O){if(A++>3)throw O;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return hi()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=Hr._getInstance(function Bc(){return hi()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(A,O){return{keyProcessed:(yield p._poll()).includes(O.key)}});return function(A,O){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(A,O){return["keyChanged"]});return function(A,O){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var v,A;if(p.activeServiceWorker=yield function iu(){return ei.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Uc(p.activeServiceWorker);const O=yield p.sender._send("ping",{},800);!O||(null===(v=O[0])||void 0===v?void 0:v.fulfilled)&&(null===(A=O[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Rt(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Os();return yield ha(p,rl,"1"),yield Mi(p,rl),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var A=this;return(0,g.Z)(function*(){return A._withPendingWrite((0,g.Z)(function*(){return yield A._withRetries(O=>ha(O,p,v)),A.localCache[p]=v,A.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,g.Z)(function*(){const A=yield v._withRetries(O=>function sl(y,h){return Rs.apply(this,arguments)}(O,p));return v.localCache[p]=A,A})()}_remove(p){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(A=>Mi(A,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const v=yield p._withRetries(G=>{const ne=Ro(G,!1).getAll();return new es(ne).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const A=[],O=new Set;for(const{fbase_key:G,value:ne}of v)O.add(G),JSON.stringify(p.localCache[G])!==JSON.stringify(ne)&&(p.notifyListeners(G,ne),A.push(G));for(const G of Object.keys(p.localCache))p.localCache[G]&&!O.has(G)&&(p.notifyListeners(G,null),A.push(G));return A})()}notifyListeners(p,v){this.localCache[p]=v;const A=this.listeners[p];if(A)for(const O of Array.from(A))O(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function No(y,h){return Lt(y,"POST","/v2/accounts/mfaSignIn:start",$t(y,h))}function pi(){return(pi=(0,g.Z)(function*(y){return(yield Lt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Pn(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=A=>{const O=me("internal-error");O.customData=A,p(O)},v.type="text/javascript",v.charset="UTF-8",function Hc(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function ko(y){return`__${y}${Math.floor(1e6*Math.random())}`}const gr=1e12;class ts{constructor(h){this.auth=h,this.counter=gr,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new Oi(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||gr;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||gr))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var v;return null===(v=p._widgets.get(h||gr))||void 0===v||v.execute(),""})()}}class Oi{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;te(A,"argument-error",{appName:p}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function wn(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ps=ko("rcb"),Gc=new Ft(3e4,6e4);class Vp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!an().grecaptcha}load(h,p=""){return te(function Up(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(an().grecaptcha):new Promise((v,A)=>{const O=an().setTimeout(()=>{A(me(h,"network-request-failed"))},Gc.get());an()[Ps]=()=>{an().clearTimeout(O),delete an()[Ps];const ne=an().grecaptcha;if(!ne)return void A(me(h,"internal-error"));const Ve=ne.render;ne.render=(Je,pt)=>{const ot=Ve(Je,pt);return this.counter++,ot},this.hostLanguage=p,v(ne)},Pn(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Ps,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(O),A(me(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!an().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Bp{load(h){return(0,g.Z)(function*(){return new ts(h)})()}clearedOneInstance(){}}const Ns="recaptcha",Gr={theme:"light",type:"image"};class jp{constructor(h,p=Object.assign({},Gr),v){this.parameters=p,this.type=Ns,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Oe(v),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;te(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bp:new Vp,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(O=>{const G=ne=>{!ne||(h.tokenChangeListeners.delete(G),O(ne))};h.tokenChangeListeners.add(G),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=an()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){te(_t()&&!hi(),h.auth,"internal-error"),yield function ks(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Dr(y){return pi.apply(this,arguments)}(h.auth);te(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ns{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Co._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function gn(){return(gn=(0,g.Z)(function*(y,h,p){const v=Oe(y),A=yield mr(v,h,(0,P.m9)(p));return new ns(A,O=>Mn(v,O))})).apply(this,arguments)}function Lo(){return(Lo=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y);yield bs(!1,v,"phone");const A=yield mr(v.auth,h,(0,P.m9)(p));return new ns(A,O=>ci(v,O))})).apply(this,arguments)}function ul(){return(ul=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y),A=yield mr(v.auth,h,(0,P.m9)(p));return new ns(A,O=>Cs(v,O))})).apply(this,arguments)}function mr(y,h,p){return ni.apply(this,arguments)}function ni(){return(ni=(0,g.Z)(function*(y,h,p){var v;const A=yield p.verify();try{let O;if(te("string"==typeof A,y,"argument-error"),te(p.type===Ns,y,"argument-error"),O="string"==typeof h?{phoneNumber:h}:h,"session"in O){const G=O.session;if("phoneNumber"in O)return te("enroll"===G.type,y,"internal-error"),(yield Fn(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{te("signin"===G.type,y,"internal-error");const ne=(null===(v=O.multiFactorHint)||void 0===v?void 0:v.uid)||O.multiFactorUid;return te(ne,y,"missing-multi-factor-info"),(yield No(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:ne,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield Op(y,{phoneNumber:O.phoneNumber,recaptchaToken:A});return G}}finally{p._reset()}})).apply(this,arguments)}function rs(){return(rs=(0,g.Z)(function*(y,h){yield ln((0,P.m9)(y),h)})).apply(this,arguments)}let mi=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=Oe(p)}verifyPhoneNumber(p,v){return mr(this.auth,p,(0,P.m9)(v))}static credential(p,v){return Co._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:A}=p;return v&&A?Co._fromTokenResponse(v,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ri(y,h){return h?ee(h):(te(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class pa extends en{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return kn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return kn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return kn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function cl(y){return Ys(y.auth,new pa(y),y.bypassAuthState)}function dl(y){const{auth:h,user:p}=y;return te(p,h,"internal-error"),Mc(p,new pa(y),y.bypassAuthState)}function At(y){return hl.apply(this,arguments)}function hl(){return(hl=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return te(p,h,"internal-error"),ln(p,new pa(y),y.bypassAuthState)})).apply(this,arguments)}class jn{constructor(h,p,v,A,O=!1){this.auth=h,this.resolver=v,this.user=A,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(v,A){h.pendingPromise={resolve:v,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(O){h.reject(O)}});return function(v,A){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:A,postBody:O,tenantId:G,error:ne,type:Ve}=h;if(ne)return void p.reject(ne);const Je={auth:p.auth,requestUri:v,sessionId:A,tenantId:G||void 0,postBody:O||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ve)(Je))}catch(pt){p.reject(pt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return cl;case"linkViaPopup":case"linkViaRedirect":return At;case"reauthViaPopup":case"reauthViaRedirect":return dl;default:be(this.auth,"internal-error")}}resolve(h){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fl=new Ft(2e3,1e4);function qc(){return(qc=(0,g.Z)(function*(y,h,p){const v=Oe(y);$e(y,h,Es);const A=Ri(v,p);return new Ni(v,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function ou(){return(ou=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y);$e(v.auth,h,Es);const A=Ri(v.auth,p);return new Ni(v.auth,"reauthViaPopup",h,A,v).executeNotNull()})).apply(this,arguments)}function au(){return(au=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y);$e(v.auth,h,Es);const A=Ri(v.auth,p);return new Ni(v.auth,"linkViaPopup",h,A,v).executeNotNull()})).apply(this,arguments)}let Ni=(()=>{class y extends jn{constructor(p,v,A,O,G){super(p,v,O,G),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const v=yield p.execute();return te(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,g.Z)(function*(){Q(1===p.filter.length,"Popup operations only handle one event");const v=Oo();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(A=>{p.reject(A)}),p.resolver._isIframeWebStorageSupported(p.auth,A=>{A||p.reject(me(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,A;this.pollId=(null===(A=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,fl.get())};p()}}return y.currentPopupAction=null,y})();const ki=new Map;class $n extends jn{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let v=ki.get(p.auth._key());if(!v){try{const O=(yield function ri(y,h){return pl.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(O)}catch(A){v=()=>Promise.reject(A)}ki.set(p.auth._key(),v)}return p.bypassAuthState||ki.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const A=yield v.auth._redirectUserForId(h.eventId);if(A)return v.user=A,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function pl(){return(pl=(0,g.Z)(function*(y,h){const p=C(h),v=b(y);if(!(yield v._isAvailable()))return!1;const A="true"===(yield v._get(p));return yield v._remove(p),A})).apply(this,arguments)}function ro(y,h){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,g.Z)(function*(y,h){return b(y)._set(C(h),"true")})).apply(this,arguments)}function b(y){return ee(y._redirectPersistence)}function C(y){return ue("pendingRedirect",y.config.apiKey,y.name)}function q(){return(q=(0,g.Z)(function*(y,h,p){const v=Oe(y);$e(y,h,Es);const A=Ri(v,p);return yield ro(A,v),A._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function Se(){return(Se=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y);$e(v.auth,h,Es);const A=Ri(v.auth,p);yield ro(A,v.auth);const O=yield io(v);return A._openRedirect(v.auth,h,"reauthViaRedirect",O)})).apply(this,arguments)}function Ct(){return(Ct=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y);$e(v.auth,h,Es);const A=Ri(v.auth,p);yield bs(!1,v,h.providerId),yield ro(A,v.auth);const O=yield io(v);return A._openRedirect(v.auth,h,"linkViaRedirect",O)})).apply(this,arguments)}function Vn(){return(Vn=(0,g.Z)(function*(y,h){return yield Oe(y)._initializationPromise,En(y,h,!1)})).apply(this,arguments)}function En(y,h){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,g.Z)(function*(y,h,p=!1){const v=Oe(y),A=Ri(v,h),G=yield new $n(v,A,p).execute();return G&&!p&&(delete G.user._redirectEventId,yield v._persistUserIfCurrent(G.user),yield v._setRedirectUser(null,h)),G})).apply(this,arguments)}function io(y){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,g.Z)(function*(y){const h=Oo(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class yi{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function gl(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wc(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!Wc(h)){const A=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(me(this.auth,A))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(so(h))}saveEventToCache(h){this.cachedEventUids.add(so(h)),this.lastProcessedEventTime=Date.now()}}function so(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Wc({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function ml(y){return ga.apply(this,arguments)}function ga(){return(ga=(0,g.Z)(function*(y,h={}){return Lt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Hp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jm=/^https?/;function is(){return(is=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield ml(y);for(const p of h)try{if(yl(p))return}catch(v){}be(y,"unauthorized-domain")})).apply(this,arguments)}function yl(y){const h=Ne(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&G.hostname===v}if(!Jm.test(p))return!1;if(Hp.test(y))return v===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(v)}const ey=new Ft(3e4,6e4);function ty(){const y=an().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Zc=null;function ny(y){return Zc=Zc||function Gp(y){return new Promise((h,p)=>{var v,A,O;function G(){ty(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{ty(),p(me(y,"network-request-failed"))},timeout:ey.get()})}if(null===(A=null===(v=an().gapi)||void 0===v?void 0:v.iframes)||void 0===A?void 0:A.Iframe)h(gapi.iframes.getContext());else{if(!(null===(O=an().gapi)||void 0===O?void 0:O.load)){const ne=ko("iframefcb");return an()[ne]=()=>{gapi.load?G():p(me(y,"network-request-failed"))},Pn(`https://apis.google.com/js/api.js?onload=${ne}`).catch(Ve=>p(Ve))}G()}}).catch(h=>{throw Zc=null,h})}(y),Zc}const Dh=new Ft(5e3,15e3),ao={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ma(y){const h=y.config;te(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?zn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:se.SDK_VERSION},A=Kc.get(y.config.apiHost);A&&(v.eid=A);const O=y._getFrameworks();return O.length&&(v.fw=O.join(",")),`${p}?${(0,P.xO)(v).slice(1)}`}function uo(){return uo=(0,g.Z)(function*(y){const h=yield ny(y),p=an().gapi;return te(p,y,"internal-error"),h.open({where:document.body,url:ma(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ao,dontclear:!0},v=>new Promise(function(){var A=(0,g.Z)(function*(O,G){yield v.restyle({setHideOnLeave:!1});const ne=me(y,"network-request-failed"),Ve=an().setTimeout(()=>{G(ne)},Dh.get());function Je(){an().clearTimeout(Ve),O(v)}v.ping(Je).then(Je,()=>{G(ne)})});return function(O,G){return A.apply(this,arguments)}}()))}),uo.apply(this,arguments)}const iy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Jc{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function xh(y,h,p,v,A,O){te(y.config.authDomain,y,"auth-domain-config-required"),te(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:se.SDK_VERSION,eventId:A};if(h instanceof Es){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ve,Je]of Object.entries(O||{}))G[Ve]=Je}if(h instanceof Vr){const Ve=h.getScopes().filter(Je=>""!==Je);Ve.length>0&&(G.scopes=Ve.join(","))}y.tenantId&&(G.tid=y.tenantId);const ne=G;for(const Ve of Object.keys(ne))void 0===ne[Ve]&&delete ne[Ve];return`${function oy({config:y}){return y.emulator?zn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(ne).slice(1)}`}const Ls="webStorageSupport";class Mh extends class qp{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return ze("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Mh(h)}_finalizeEnroll(h,p,v){return function Fc(y,h){return Lt(y,"POST","/v2/accounts/mfaEnrollment:finalize",$t(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function fa(y,h){return Lt(y,"POST","/v2/accounts/mfaSignIn:finalize",$t(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ay=(()=>{class y{constructor(){}static assertion(p){return Mh._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var uy="@firebase/auth",Oh="0.19.12";class zp{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{var A;h((null===(A=v)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Vs(){return window}function du(){return(du=(0,g.Z)(function*(y,h,p){var v;const{BuildInfo:A}=Vs();Q(h.sessionId,"AuthEvent did not contain a session ID");const O=yield ya(h.sessionId),G={};return Kn()?G.ibi=A.packageName:_n()?G.apn=A.packageName:be(y,"operation-not-supported-in-this-environment"),A.displayName&&(G.appDisplayName=A.displayName),G.sessionId=O,xh(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,G)})).apply(this,arguments)}function _i(){return(_i=(0,g.Z)(function*(y){const{BuildInfo:h}=Vs(),p={};Kn()?p.iosBundleId=h.packageName:_n()?p.androidPackageName=h.packageName:be(y,"operation-not-supported-in-this-environment"),yield ml(y,p)})).apply(this,arguments)}function ed(){return(ed=(0,g.Z)(function*(y,h,p){const{cordova:v}=Vs();let A=()=>{};try{yield new Promise((O,G)=>{let ne=null;function Ve(){var ot;O();const In=null===(ot=v.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof In&&In(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Je(){ne||(ne=window.setTimeout(()=>{G(me(y,"redirect-cancelled-by-user"))},2e3))}function pt(){"visible"===(null==document?void 0:document.visibilityState)&&Je()}h.addPassiveListener(Ve),document.addEventListener("resume",Je,!1),_n()&&document.addEventListener("visibilitychange",pt,!1),A=()=>{h.removePassiveListener(Ve),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",pt,!1),ne&&window.clearTimeout(ne)}})}finally{A()}})).apply(this,arguments)}function ya(y){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,g.Z)(function*(y){const h=hu(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function hu(y){if(Q(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}!function cy(y){(0,se._registerComponent)(new re.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),A=h.getProvider("heartbeat"),{apiKey:O,authDomain:G}=v.options;return((ne,Ve)=>{te(O&&!O.includes(":"),"invalid-api-key",{appName:ne.name}),te(!(null==G?void 0:G.includes(":")),"argument-error",{appName:ne.name});const Je={apiKey:O,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ra(y)},pt=new Yr(ne,Ve,Je);return function pe(y,h){const p=(null==h?void 0:h.persistence)||[],v=(Array.isArray(p)?p:[p]).map(ee);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(pt,p),pt})(v,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new re.wA("auth-internal",h=>{const p=Oe(h.getProvider("auth").getImmediate());return new zp(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(uy,Oh,function ly(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(uy,Oh,"esm2017")}("Browser");class kh extends yi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function wl(y){return jo.apply(this,arguments)}function jo(){return(jo=(0,g.Z)(function*(y){const h=yield Il()._get(Lh(y));return h&&(yield Il()._remove(Lh(y))),h})).apply(this,arguments)}function El(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function Il(){return ee(Rn)}function Lh(y){return ue("authEvent",y.config.apiKey,y.name)}function nd(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...p]=y.split("?");return(0,P.zd)(p.join("?"))}function jh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:me("no-auth-event")}}function rd(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Yp(y=(0,P.z$)()){return!("file:"!==rd()&&"ionic:"!==rd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function yr(){try{const y=self.localStorage,h=Oo();if(y)return y.setItem(h,"1"),y.removeItem(h),!function $o(y=(0,P.z$)()){return function gy(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function my(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch(y){return lo()&&(0,P.hl)()}return!1}function lo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Dl(){return(function py(){return"http:"===rd()||"https:"===rd()}()||(0,P.ru)()||Yp())&&!function id(){return(0,P.b$)()||(0,P.UG)()}()&&yr()&&!lo()}function $h(){return Yp()&&"undefined"!=typeof document}function _a(){return(_a=(0,g.Z)(function*(){return!!$h()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const vi={LOCAL:"local",NONE:"none",SESSION:"session"},va=te,Gh="persistence";function wa(y){return qh.apply(this,arguments)}function qh(){return(qh=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Tl(),p=ue(Gh,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Tl(){var y;try{return(null===(y=function Hh(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const yy=te;class si{constructor(){this.browserResolver=ee(class Bo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sr,this._completeRedirectFn=En}_openPopup(h,p,v,A){var O=this;return(0,g.Z)(function*(){var G;Q(null===(G=O.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ne=xh(h,p,v,Ne(),A);return function Xc(y,h,p,v=500,A=600){const O=Math.max((window.screen.availHeight-A)/2,0).toString(),G=Math.max((window.screen.availWidth-v)/2,0).toString();let ne="";const Ve=Object.assign(Object.assign({},iy),{width:v.toString(),height:A.toString(),top:O,left:G}),Je=(0,P.z$)().toLowerCase();p&&(ne=dr(Je)?"_blank":p),ht(Je)&&(h=h||"http://localhost",Ve.scrollbars="yes");const pt=Object.entries(Ve).reduce((In,[Fi,Sl])=>`${In}${Fi}=${Sl},`,"");if(function La(y=(0,P.z$)()){var h;return Kn(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Je)&&"_self"!==ne)return function Sh(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",ne),new Jc(null);const ot=window.open(h||"",ne,pt);te(ot,y,"popup-blocked");try{ot.focus()}catch(In){}return new Jc(ot)}(h,ne,Oo())})()}_openRedirect(h,p,v,A){var O=this;return(0,g.Z)(function*(){return yield O._originValidation(h),function Ch(y){an().location.href=y}(xh(h,p,v,Ne(),A)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:A,promise:O}=this.eventManagers[p];return A?Promise.resolve(A):(Q(O,"If manager is not set, promise should be"),O)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const v=yield function ry(y){return uo.apply(this,arguments)}(h),A=new yi(h);return v.register("authEvent",O=>(te(null==O?void 0:O.authEvent,h,"invalid-auth-event"),{status:A.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:A},p.iframes[h._key()]=v,A})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Ls,{type:Ls},A=>{var O;const G=null===(O=null==A?void 0:A[0])||void 0===O?void 0:O[Ls];void 0!==G&&p(!!G),be(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Xm(y){return is.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return zi()||Ht()||Kn()}}),this.cordovaResolver=ee(class Bh{constructor(){this._redirectPersistence=sr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=En}_initialize(h){var p=this;return(0,g.Z)(function*(){const v=h._key();let A=p.eventManagers.get(v);return A||(A=new kh(h),p.eventManagers.set(v,A),p.attachCallbackListeners(h,A)),A})()}_openPopup(h){be(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,A){var O=this;return(0,g.Z)(function*(){!function td(y){var h,p,v,A,O,G,ne,Ve,Je,pt;const ot=Vs();te("function"==typeof(null===(h=null==ot?void 0:ot.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(void 0!==(null===(p=null==ot?void 0:ot.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te("function"==typeof(null===(O=null===(A=null===(v=null==ot?void 0:ot.cordova)||void 0===v?void 0:v.plugins)||void 0===A?void 0:A.browsertab)||void 0===O?void 0:O.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(Ve=null===(ne=null===(G=null==ot?void 0:ot.cordova)||void 0===G?void 0:G.plugins)||void 0===ne?void 0:ne.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(pt=null===(Je=null==ot?void 0:ot.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===pt?void 0:pt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield O._initialize(h);yield G.initialized(),G.resetRedirect(),function uu(){ki.clear()}(),yield O._originValidation(h);const ne=function Fh(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:El(),postBody:null,tenantId:y.tenantId,error:me(y,"no-auth-event")}}(h,v,A);yield function S0(y,h){return Il()._set(Lh(y),h)}(h,ne);const Ve=yield function Rh(y,h,p){return du.apply(this,arguments)}(h,ne,p),Je=yield function vl(y){const{cordova:h}=Vs();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let A=null;v?h.plugins.browsertab.openUrl(y):A=h.InAppBrowser.open(y,function qs(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(A)})})}(Ve);return function Wp(y,h,p){return ed.apply(this,arguments)}(h,G,Je)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Ph(y){return _i.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:A,BuildInfo:O}=Vs(),G=setTimeout((0,g.Z)(function*(){yield wl(h),p.onEvent(jh())}),500),ne=function(){var pt=(0,g.Z)(function*(ot){clearTimeout(G);const In=yield wl(h);let Fi=null;In&&(null==ot?void 0:ot.url)&&(Fi=function hy(y,h){var p,v;const A=function bl(y){const h=nd(y),p=h.link?decodeURIComponent(h.link):void 0,v=nd(p).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return nd(A).link||A||v||p||y}(h);if(A.includes("/__/auth/callback")){const O=nd(A),G=O.firebaseError?function Vh(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(O.firebaseError)):null,ne=null===(v=null===(p=null==G?void 0:G.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Ve=ne?me(ne):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(In,ot.url)),p.onEvent(Fi||jh())});return function(In){return pt.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,ne);const Ve=A,Je=`${O.packageName.toLowerCase()}://`;Vs().handleOpenURL=function(){var pt=(0,g.Z)(function*(ot){if(ot.toLowerCase().startsWith(Je)&&ne({url:ot}),"function"==typeof Ve)try{Ve(ot)}catch(In){console.error(In)}});return function(ot){return pt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=sr,this._completeRedirectFn=En}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,A){var O=this;return(0,g.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(h,p,v,A)})()}_openRedirect(h,p,v,A){var O=this;return(0,g.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(h,p,v,A)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return $h()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Ar(){return _a.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Xp(y){return y.unwrap()}function Ea(y){return eg(y)}function eg(y){const{_tokenResponse:h}=y instanceof P.ZR?y.customData:y;if(!h)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return mi.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=sa;break;case"facebook.com":v=Zs;break;case"github.com":v=Sc;break;case"twitter.com":v=Ha;break;default:const{oauthIdToken:A,oauthAccessToken:O,oauthTokenSecret:G,pendingToken:ne,nonce:Ve}=h;return O||G||A||ne?ne?p.startsWith("saml.")?To._create(p,ne):Ki._fromParams({providerId:p,signInMethod:p,pendingToken:ne,idToken:A,accessToken:O}):new Do(p).credential({idToken:A,accessToken:O,rawNonce:Ve}):null}return y instanceof P.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function _r(y,h){return h.catch(p=>{throw p instanceof P.ZR&&function vy(y,h){var p;const v=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new wy(y,function ru(y,h){var p;const v=(0,P.m9)(y),A=h;return te(h.customData.operationType,v,"argument-error"),te(null===(p=A.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),da._fromError(v,A)}(y,h));else if(v){const A=eg(h),O=h;A&&(O.credential=A,O.tenantId=v.tenantId||void 0,O.email=v.email||void 0,O.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const A=p.user;return{operationType:p.operationType,credential:Ea(p),additionalUserInfo:pr(p),user:co.getOrCreate(A)}})}function zh(y,h){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>_r(y,p.confirm(v))}})).apply(this,arguments)}class wy{constructor(h,p){this.resolver=p,this.auth=function _y(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return _r(Xp(this.auth),this.resolver.resolveSignIn(h))}}class co{constructor(h){this._delegate=h,this.multiFactor=function Lc(y){const h=(0,P.m9)(y);return Mo.has(h)||Mo.set(h,Xi._fromUser(h)),Mo.get(h)}(h)}static getOrCreate(h){return co.USER_MAP.has(h)||co.USER_MAP.set(h,new co(h)),co.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return _r(p.auth,ci(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,g.Z)(function*(){return zh(v.auth,function al(y,h,p){return Lo.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return _r(p.auth,function Pi(y,h,p){return au.apply(this,arguments)}(p._delegate,h,si))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield wa(Oe(p.auth)),function Qe(y,h,p){return function mt(y,h,p){return Ct.apply(this,arguments)}(y,h,p)}(p._delegate,h,si)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return _r(p.auth,Cs(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return zh(this.auth,function $p(y,h,p){return ul.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return _r(this.auth,function no(y,h,p){return ou.apply(this,arguments)}(this._delegate,h,si))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield wa(Oe(p.auth)),function X(y,h,p){return function Ae(y,h,p){return Se.apply(this,arguments)}(y,h,p)}(p._delegate,h,si)})()}sendEmailVerification(h){return function di(y,h){return Ku.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function oa(y,h){return $u.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Ju(y,h){return Xu((0,P.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Rc(y,h){return Xu((0,P.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function ll(y,h){return rs.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function ca(y,h){return Qu.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function tu(y,h,p){return nu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}co.USER_MAP=new WeakMap;const Al=te;let Zh=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=p.options;Al(A,"invalid-api-key",{appName:p.name}),Al(A,"invalid-api-key",{appName:p.name});const O="undefined"!=typeof window?si:void 0;this._delegate=v.initialize({options:{persistence:Ey(A,p.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Me),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?co.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function on(y,h,p){const v=Oe(y);te(v._canInitEmulator,v,"emulator-config-failed"),te(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const A=!!(null==p?void 0:p.disableWarnings),O=tr(h),{host:G,port:ne}=function ms(y){const h=tr(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(v);if(A){const O=A[1];return{host:O,port:Nn(v.substr(O.length+1))}}{const[O,G]=v.split(":");return{host:O,port:Nn(G)}}}(h);v.config.emulator={url:`${O}//${G}${null===ne?"":`:${ne}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:G,port:ne,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Si(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function Gu(y,h){return Ee.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return xt(this._delegate,p)}confirmPasswordReset(p,v){return function Ja(y,h,p){return Hu.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var A=this;return(0,g.Z)(function*(){return _r(A._delegate,function xo(y,h,p){return jr.apply(this,arguments)}(A._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function eu(y,h){return Ss.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Zu(y,h){const p=Ws.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Al(Dl(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function vt(y,h){return Vn.apply(this,arguments)}(p._delegate,si);return v?_r(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Kp(y,h){Oe(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,A){const{next:O,error:G,complete:ne}=Kh(p,v,A);return this._delegate.onAuthStateChanged(O,G,ne)}onIdTokenChanged(p,v,A){const{next:O,error:G,complete:ne}=Kh(p,v,A);return this._delegate.onIdTokenChanged(O,G,ne)}sendSignInLinkToEmail(p,v){return function Wu(y,h,p){return Oc.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function Ya(y,h,p){return Qa.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,g.Z)(function*(){let A;switch(function Qp(y,h){va(Object.values(vi).includes(h),y,"invalid-persistence-type"),(0,P.b$)()?va(h!==vi.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?va(h===vi.NONE,y,"unsupported-persistence-type"):lo()?va(h===vi.NONE||h===vi.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):va(h===vi.NONE||yr(),y,"unsupported-persistence-type")}(v._delegate,p),p){case vi.SESSION:A=sr;break;case vi.LOCAL:A=(yield ee(fi)._isAvailable())?fi:Rn;break;case vi.NONE:A=$;break;default:return be("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return _r(this._delegate,function qa(y){return xc.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return _r(this._delegate,Mn(this._delegate,p))}signInWithCustomToken(p){return _r(this._delegate,function Ds(y,h){return Ts.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return _r(this._delegate,function zu(y,h,p){return Mn((0,P.m9)(y),ju.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return _r(this._delegate,function Xa(y,h,p){return As.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return zh(this._delegate,function su(y,h,p){return gn.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,g.Z)(function*(){return Al(Dl(),v._delegate,"operation-not-supported-in-this-environment"),_r(v._delegate,function Fs(y,h,p){return qc.apply(this,arguments)}(v._delegate,p,si))})()}signInWithRedirect(p){var v=this;return(0,g.Z)(function*(){return Al(Dl(),v._delegate,"operation-not-supported-in-this-environment"),yield wa(v._delegate),function x(y,h,p){return function F(y,h,p){return q.apply(this,arguments)}(y,h,p)}(v._delegate,p,si)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function fn(y,h){return So.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=vi,y})();function Kh(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const A=v;return{next:G=>A(G&&co.getOrCreate(G)),error:h,complete:p}}function Ey(y,h){const p=function Jp(y,h){const p=Tl();if(!p)return[];const v=ue(Gh,y,h);switch(p.getItem(v)){case vi.NONE:return[$];case vi.LOCAL:return[fi,sr];case vi.SESSION:return[sr];default:return[]}}(y,h);if("undefined"!=typeof self&&!p.includes(fi)&&p.push(fi),"undefined"!=typeof window)for(const v of[Rn,sr])p.includes(v)||p.push(v);return p.includes($)||p.push($),p}class Yh{constructor(){this.providerId="phone",this._delegate=new mi(Xp(W.Z.auth()))}static credential(h,p){return mi.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Yh.PHONE_SIGN_IN_METHOD=mi.PHONE_SIGN_IN_METHOD,Yh.PROVIDER_ID=mi.PROVIDER_ID;const Iy=te;class by{constructor(h,p,v=W.Z.app()){var A;Iy(null===(A=v.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new jp(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function tg(y){y.INTERNAL.registerComponent(new re.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new Zh(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ju,FacebookAuthProvider:Zs,GithubAuthProvider:Sc,GoogleAuthProvider:sa,OAuthProvider:Do,SAMLAuthProvider:Jr,PhoneAuthProvider:Yh,PhoneMultiFactorGenerator:ay,RecaptchaVerifier:by,TwitterAuthProvider:Ha,Auth:Zh,AuthCredential:en,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.12")}(W.Z)},8306:(at,De,N)=>{N.d(De,{y:()=>B});var g=N(2961),W=N(727),P=N(8822),se=N(4671);var re=N(2416),ce=N(576),oe=N(2806);let B=(()=>{class Te{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const he=new Te;return he.source=this,he.operator=ke,he}subscribe(ke,he,ve){const et=function qe(Te){return Te&&Te instanceof g.Lv||function K(Te){return Te&&(0,ce.m)(Te.next)&&(0,ce.m)(Te.error)&&(0,ce.m)(Te.complete)}(Te)&&(0,W.Nn)(Te)}(ke)?ke:new g.Hp(ke,he,ve);return(0,oe.x)(()=>{const{operator:Ze,source:be}=this;et.add(Ze?Ze.call(et,be):be?this._subscribe(et):this._trySubscribe(et))}),et}_trySubscribe(ke){try{return this._subscribe(ke)}catch(he){ke.error(he)}}forEach(ke,he){return new(he=j(he))((ve,et)=>{const Ze=new g.Hp({next:be=>{try{ke(be)}catch(me){et(me),Ze.unsubscribe()}},error:et,complete:ve});this.subscribe(Ze)})}_subscribe(ke){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(ke)}[P.L](){return this}pipe(...ke){return function fe(Te){return 0===Te.length?se.y:1===Te.length?Te[0]:function(ke){return Te.reduce((he,ve)=>ve(he),ke)}}(ke)(this)}toPromise(ke){return new(ke=j(ke))((he,ve)=>{let et;this.subscribe(Ze=>et=Ze,Ze=>ve(Ze),()=>he(et))})}}return Te.create=Me=>new Te(Me),Te})();function j(Te){var Me;return null!==(Me=null!=Te?Te:re.v.Promise)&&void 0!==Me?Me:Promise}},7579:(at,De,N)=>{N.d(De,{x:()=>re});var g=N(8306),W=N(727);const se=(0,N(3888).d)(oe=>function(){oe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var J=N(8737),fe=N(2806);let re=(()=>{class oe extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const K=new ce(this,this);return K.operator=j,K}_throwIfClosed(){if(this.closed)throw new se}next(j){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(j)}})}error(j){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:K}=this;for(;K.length;)K.shift().error(j)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:K,isStopped:qe,observers:Te}=this;return K||qe?W.Lc:(this.currentObservers=null,Te.push(j),new W.w0(()=>{this.currentObservers=null,(0,J.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:K,thrownError:qe,isStopped:Te}=this;K?j.error(qe):Te&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return oe.create=(B,j)=>new ce(B,j),oe})();class ce extends re{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===K||K.call(j,B)}error(B){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===K||K.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,K;return null!==(K=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==K?K:W.Lc}}},2961:(at,De,N)=>{N.d(De,{Hp:()=>ke,Lv:()=>K});var g=N(576),W=N(727),P=N(2416),se=N(7849);function J(){}const fe=oe("C",void 0,void 0);function oe(be,me,_e){return{kind:be,value:me,error:_e}}var B=N(3410),j=N(2806);class K extends W.w0{constructor(me){super(),this.isStopped=!1,me?(this.destination=me,(0,W.Nn)(me)&&me.add(this)):this.destination=Ze}static create(me,_e,$e){return new ke(me,_e,$e)}next(me){this.isStopped?et(function ce(be){return oe("N",be,void 0)}(me),this):this._next(me)}error(me){this.isStopped?et(function re(be){return oe("E",void 0,be)}(me),this):(this.isStopped=!0,this._error(me))}complete(){this.isStopped?et(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(me){this.destination.next(me)}_error(me){try{this.destination.error(me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Te(be,me){return qe.call(be,me)}class Me{constructor(me){this.partialObserver=me}next(me){const{partialObserver:_e}=this;if(_e.next)try{_e.next(me)}catch($e){he($e)}}error(me){const{partialObserver:_e}=this;if(_e.error)try{_e.error(me)}catch($e){he($e)}else he(me)}complete(){const{partialObserver:me}=this;if(me.complete)try{me.complete()}catch(_e){he(_e)}}}class ke extends K{constructor(me,_e,$e){let je;if(super(),(0,g.m)(me)||!me)je={next:null!=me?me:void 0,error:null!=_e?_e:void 0,complete:null!=$e?$e:void 0};else{let te;this&&P.v.useDeprecatedNextContext?(te=Object.create(me),te.unsubscribe=()=>this.unsubscribe(),je={next:me.next&&Te(me.next,te),error:me.error&&Te(me.error,te),complete:me.complete&&Te(me.complete,te)}):je=me}this.destination=new Me(je)}}function he(be){P.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(be):(0,se.h)(be)}function et(be,me){const{onStoppedNotification:_e}=P.v;_e&&B.z.setTimeout(()=>_e(be,me))}const Ze={closed:!0,next:J,error:function ve(be){throw be},complete:J}},727:(at,De,N)=>{N.d(De,{Lc:()=>fe,w0:()=>J,Nn:()=>re});var g=N(576);const P=(0,N(3888).d)(oe=>function(j){oe(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((K,qe)=>`${qe+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var se=N(8737);class J{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:K}=this;if((0,g.m)(K))try{K()}catch(Te){B=Te instanceof P?Te.errors:[Te]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Te of qe)try{ce(Te)}catch(Me){B=null!=B?B:[],Me instanceof P?B=[...B,...Me.errors]:B.push(Me)}}if(B)throw new P(B)}}add(B){var j;if(B&&B!==this)if(this.closed)ce(B);else{if(B instanceof J){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,se.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,se.P)(j,B),B instanceof J&&B._removeParent(this)}}J.EMPTY=(()=>{const oe=new J;return oe.closed=!0,oe})();const fe=J.EMPTY;function re(oe){return oe instanceof J||oe&&"closed"in oe&&(0,g.m)(oe.remove)&&(0,g.m)(oe.add)&&(0,g.m)(oe.unsubscribe)}function ce(oe){(0,g.m)(oe)?oe():oe.unsubscribe()}},2416:(at,De,N)=>{N.d(De,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,De,N)=>{N.d(De,{E:()=>W});const W=new(N(8306).y)(J=>J.complete())},8996:(at,De,N)=>{N.d(De,{D:()=>me});var g=N(8421),W=N(5363),P=N(9468),fe=N(8306),ce=N(2202),oe=N(576),B=N(9672);function K(_e,$e){if(!_e)throw new Error("Iterable cannot be null");return new fe.y(je=>{(0,B.f)(je,$e,()=>{const te=_e[Symbol.asyncIterator]();(0,B.f)(je,$e,()=>{te.next().then(ze=>{ze.done?je.complete():je.next(ze.value)})},0,!0)})})}var qe=N(3670),Te=N(8239),Me=N(1144),ke=N(6495),he=N(2206),ve=N(4532),et=N(3260);function me(_e,$e){return $e?function be(_e,$e){if(null!=_e){if((0,qe.c)(_e))return function se(_e,$e){return(0,g.Xf)(_e).pipe((0,P.R)($e),(0,W.Q)($e))}(_e,$e);if((0,Me.z)(_e))return function re(_e,$e){return new fe.y(je=>{let te=0;return $e.schedule(function(){te===_e.length?je.complete():(je.next(_e[te++]),je.closed||this.schedule())})})}(_e,$e);if((0,Te.t)(_e))return function J(_e,$e){return(0,g.Xf)(_e).pipe((0,P.R)($e),(0,W.Q)($e))}(_e,$e);if((0,he.D)(_e))return K(_e,$e);if((0,ke.T)(_e))return function j(_e,$e){return new fe.y(je=>{let te;return(0,B.f)(je,$e,()=>{te=_e[ce.h](),(0,B.f)(je,$e,()=>{let ze,Q;try{({value:ze,done:Q}=te.next())}catch(ie){return void je.error(ie)}Q?je.complete():je.next(ze)},0,!0)}),()=>(0,oe.m)(null==te?void 0:te.return)&&te.return()})}(_e,$e);if((0,et.L)(_e))return function Ze(_e,$e){return K((0,et.Q)(_e),$e)}(_e,$e)}throw(0,ve.z)(_e)}(_e,$e):(0,g.Xf)(_e)}},8421:(at,De,N)=>{N.d(De,{Xf:()=>qe});var g=N(655),W=N(1144),P=N(8239),se=N(8306),J=N(3670),fe=N(2206),re=N(4532),ce=N(6495),oe=N(3260),B=N(576),j=N(7849),K=N(8822);function qe(be){if(be instanceof se.y)return be;if(null!=be){if((0,J.c)(be))return function Te(be){return new se.y(me=>{const _e=be[K.L]();if((0,B.m)(_e.subscribe))return _e.subscribe(me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(be);if((0,W.z)(be))return function Me(be){return new se.y(me=>{for(let _e=0;_e<be.length&&!me.closed;_e++)me.next(be[_e]);me.complete()})}(be);if((0,P.t)(be))return function ke(be){return new se.y(me=>{be.then(_e=>{me.closed||(me.next(_e),me.complete())},_e=>me.error(_e)).then(null,j.h)})}(be);if((0,fe.D)(be))return ve(be);if((0,ce.T)(be))return function he(be){return new se.y(me=>{for(const _e of be)if(me.next(_e),me.closed)return;me.complete()})}(be);if((0,oe.L)(be))return function et(be){return ve((0,oe.Q)(be))}(be)}throw(0,re.z)(be)}function ve(be){return new se.y(me=>{(function Ze(be,me){var _e,$e,je,te;return(0,g.mG)(this,void 0,void 0,function*(){try{for(_e=(0,g.KL)(be);!($e=yield _e.next()).done;)if(me.next($e.value),me.closed)return}catch(ze){je={error:ze}}finally{try{$e&&!$e.done&&(te=_e.return)&&(yield te.call(_e))}finally{if(je)throw je.error}}me.complete()})})(be,me).catch(_e=>me.error(_e))})}},6451:(at,De,N)=>{N.d(De,{T:()=>fe});var g=N(8189),W=N(8421),P=N(515),se=N(7669),J=N(8996);function fe(...re){const ce=(0,se.yG)(re),oe=(0,se._6)(re,1/0),B=re;return B.length?1===B.length?(0,W.Xf)(B[0]):(0,g.J)(oe)((0,J.D)(B,ce)):P.E}},5403:(at,De,N)=>{N.d(De,{x:()=>W});var g=N(2961);function W(se,J,fe,re,ce){return new P(se,J,fe,re,ce)}class P extends g.Lv{constructor(J,fe,re,ce,oe,B){super(J),this.onFinalize=oe,this.shouldUnsubscribe=B,this._next=fe?function(j){try{fe(j)}catch(K){J.error(K)}}:super._next,this._error=ce?function(j){try{ce(j)}catch(K){J.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(j){J.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var J;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(J=this.onFinalize)||void 0===J||J.call(this))}}}},4004:(at,De,N)=>{N.d(De,{U:()=>P});var g=N(4482),W=N(5403);function P(se,J){return(0,g.e)((fe,re)=>{let ce=0;fe.subscribe((0,W.x)(re,oe=>{re.next(se.call(J,oe,ce++))}))})}},8189:(at,De,N)=>{N.d(De,{J:()=>P});var g=N(5577),W=N(4671);function P(se=1/0){return(0,g.z)(W.y,se)}},5577:(at,De,N)=>{N.d(De,{z:()=>ce});var g=N(4004),W=N(8421),P=N(4482),se=N(9672),J=N(5403),re=N(576);function ce(oe,B,j=1/0){return(0,re.m)(B)?ce((K,qe)=>(0,g.U)((Te,Me)=>B(K,Te,qe,Me))((0,W.Xf)(oe(K,qe))),j):("number"==typeof B&&(j=B),(0,P.e)((K,qe)=>function fe(oe,B,j,K,qe,Te,Me,ke){const he=[];let ve=0,et=0,Ze=!1;const be=()=>{Ze&&!he.length&&!ve&&B.complete()},me=$e=>ve<K?_e($e):he.push($e),_e=$e=>{Te&&B.next($e),ve++;let je=!1;(0,W.Xf)(j($e,et++)).subscribe((0,J.x)(B,te=>{null==qe||qe(te),Te?me(te):B.next(te)},()=>{je=!0},void 0,()=>{if(je)try{for(ve--;he.length&&ve<K;){const te=he.shift();Me?(0,se.f)(B,Me,()=>_e(te)):_e(te)}be()}catch(te){B.error(te)}}))};return oe.subscribe((0,J.x)(B,me,()=>{Ze=!0,be()})),()=>{null==ke||ke()}}(K,qe,oe,j)))}},5363:(at,De,N)=>{N.d(De,{Q:()=>se});var g=N(9672),W=N(4482),P=N(5403);function se(J,fe=0){return(0,W.e)((re,ce)=>{re.subscribe((0,P.x)(ce,oe=>(0,g.f)(ce,J,()=>ce.next(oe),fe),()=>(0,g.f)(ce,J,()=>ce.complete(),fe),oe=>(0,g.f)(ce,J,()=>ce.error(oe),fe)))})}},3099:(at,De,N)=>{N.d(De,{B:()=>fe});var g=N(8996),W=N(5698),P=N(7579),se=N(2961),J=N(4482);function fe(ce={}){const{connector:oe=(()=>new P.x),resetOnError:B=!0,resetOnComplete:j=!0,resetOnRefCountZero:K=!0}=ce;return qe=>{let Te=null,Me=null,ke=null,he=0,ve=!1,et=!1;const Ze=()=>{null==Me||Me.unsubscribe(),Me=null},be=()=>{Ze(),Te=ke=null,ve=et=!1},me=()=>{const _e=Te;be(),null==_e||_e.unsubscribe()};return(0,J.e)((_e,$e)=>{he++,!et&&!ve&&Ze();const je=ke=null!=ke?ke:oe();$e.add(()=>{he--,0===he&&!et&&!ve&&(Me=re(me,K))}),je.subscribe($e),Te||(Te=new se.Hp({next:te=>je.next(te),error:te=>{et=!0,Ze(),Me=re(be,B,te),je.error(te)},complete:()=>{ve=!0,Ze(),Me=re(be,j),je.complete()}}),(0,g.D)(_e).subscribe(Te))})(qe)}}function re(ce,oe,...B){return!0===oe?(ce(),null):!1===oe?null:oe(...B).pipe((0,W.q)(1)).subscribe(()=>ce())}},9468:(at,De,N)=>{N.d(De,{R:()=>W});var g=N(4482);function W(P,se=0){return(0,g.e)((J,fe)=>{fe.add(P.schedule(()=>J.subscribe(fe),se))})}},5698:(at,De,N)=>{N.d(De,{q:()=>se});var g=N(515),W=N(4482),P=N(5403);function se(J){return J<=0?()=>g.E:(0,W.e)((fe,re)=>{let ce=0;fe.subscribe((0,P.x)(re,oe=>{++ce<=J&&(re.next(oe),J<=ce&&re.complete())}))})}},8505:(at,De,N)=>{N.d(De,{b:()=>J});var g=N(576),W=N(4482),P=N(5403),se=N(4671);function J(fe,re,ce){const oe=(0,g.m)(fe)||re||ce?{next:fe,error:re,complete:ce}:fe;return oe?(0,W.e)((B,j)=>{var K;null===(K=oe.subscribe)||void 0===K||K.call(oe);let qe=!0;B.subscribe((0,P.x)(j,Te=>{var Me;null===(Me=oe.next)||void 0===Me||Me.call(oe,Te),j.next(Te)},()=>{var Te;qe=!1,null===(Te=oe.complete)||void 0===Te||Te.call(oe),j.complete()},Te=>{var Me;qe=!1,null===(Me=oe.error)||void 0===Me||Me.call(oe,Te),j.error(Te)},()=>{var Te,Me;qe&&(null===(Te=oe.unsubscribe)||void 0===Te||Te.call(oe)),null===(Me=oe.finalize)||void 0===Me||Me.call(oe)}))}):se.y}},4408:(at,De,N)=>{N.d(De,{o:()=>J});var g=N(727);class W extends g.w0{constructor(re,ce){super()}schedule(re,ce=0){return this}}const P={setInterval(fe,re,...ce){const{delegate:oe}=P;return(null==oe?void 0:oe.setInterval)?oe.setInterval(fe,re,...ce):setInterval(fe,re,...ce)},clearInterval(fe){const{delegate:re}=P;return((null==re?void 0:re.clearInterval)||clearInterval)(fe)},delegate:void 0};var se=N(8737);class J extends W{constructor(re,ce){super(re,ce),this.scheduler=re,this.work=ce,this.pending=!1}schedule(re,ce=0){if(this.closed)return this;this.state=re;const oe=this.id,B=this.scheduler;return null!=oe&&(this.id=this.recycleAsyncId(B,oe,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(B,this.id,ce),this}requestAsyncId(re,ce,oe=0){return P.setInterval(re.flush.bind(re,this),oe)}recycleAsyncId(re,ce,oe=0){if(null!=oe&&this.delay===oe&&!1===this.pending)return ce;P.clearInterval(ce)}execute(re,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const oe=this._execute(re,ce);if(oe)return oe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,ce){let B,oe=!1;try{this.work(re)}catch(j){oe=!0,B=j||new Error("Scheduled action threw falsy error")}if(oe)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:re,scheduler:ce}=this,{actions:oe}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(oe,this),null!=re&&(this.id=this.recycleAsyncId(ce,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,De,N)=>{N.d(De,{v:()=>P});var g=N(6063);class W{constructor(J,fe=W.now){this.schedulerActionCtor=J,this.now=fe}schedule(J,fe=0,re){return new this.schedulerActionCtor(this,J).schedule(re,fe)}}W.now=g.l.now;class P extends W{constructor(J,fe=W.now){super(J,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(J){const{actions:fe}=this;if(this._active)return void fe.push(J);let re;this._active=!0;do{if(re=J.execute(J.state,J.delay))break}while(J=fe.shift());if(this._active=!1,re){for(;J=fe.shift();)J.unsubscribe();throw re}}}},4986:(at,De,N)=>{N.d(De,{z:()=>P});var g=N(4408);const P=new(N(7565).v)(g.o)},6063:(at,De,N)=>{N.d(De,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(at,De,N)=>{N.d(De,{z:()=>g});const g={setTimeout(W,P,...se){const{delegate:J}=g;return(null==J?void 0:J.setTimeout)?J.setTimeout(W,P,...se):setTimeout(W,P,...se)},clearTimeout(W){const{delegate:P}=g;return((null==P?void 0:P.clearTimeout)||clearTimeout)(W)},delegate:void 0}},2202:(at,De,N)=>{N.d(De,{h:()=>W});const W=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,De,N)=>{N.d(De,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,De,N)=>{N.d(De,{_6:()=>fe,jO:()=>se,yG:()=>J});var g=N(576);function P(re){return re[re.length-1]}function se(re){return(0,g.m)(P(re))?re.pop():void 0}function J(re){return function W(re){return re&&(0,g.m)(re.schedule)}(P(re))?re.pop():void 0}function fe(re,ce){return"number"==typeof P(re)?re.pop():ce}},8737:(at,De,N)=>{function g(W,P){if(W){const se=W.indexOf(P);0<=se&&W.splice(se,1)}}N.d(De,{P:()=>g})},3888:(at,De,N)=>{function g(W){const se=W(J=>{Error.call(J),J.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}N.d(De,{d:()=>g})},2806:(at,De,N)=>{N.d(De,{O:()=>se,x:()=>P});var g=N(2416);let W=null;function P(J){if(g.v.useDeprecatedSynchronousErrorHandling){const fe=!W;if(fe&&(W={errorThrown:!1,error:null}),J(),fe){const{errorThrown:re,error:ce}=W;if(W=null,re)throw ce}}else J()}function se(J){g.v.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=J)}},9672:(at,De,N)=>{function g(W,P,se,J=0,fe=!1){const re=P.schedule(function(){se(),fe?W.add(this.schedule(null,J)):this.unsubscribe()},J);if(W.add(re),!fe)return re}N.d(De,{f:()=>g})},4671:(at,De,N)=>{function g(W){return W}N.d(De,{y:()=>g})},1144:(at,De,N)=>{N.d(De,{z:()=>g});const g=W=>W&&"number"==typeof W.length&&"function"!=typeof W},2206:(at,De,N)=>{N.d(De,{D:()=>W});var g=N(576);function W(P){return Symbol.asyncIterator&&(0,g.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(at,De,N)=>{function g(W){return"function"==typeof W}N.d(De,{m:()=>g})},3670:(at,De,N)=>{N.d(De,{c:()=>P});var g=N(8822),W=N(576);function P(se){return(0,W.m)(se[g.L])}},6495:(at,De,N)=>{N.d(De,{T:()=>P});var g=N(2202),W=N(576);function P(se){return(0,W.m)(null==se?void 0:se[g.h])}},8239:(at,De,N)=>{N.d(De,{t:()=>W});var g=N(576);function W(P){return(0,g.m)(null==P?void 0:P.then)}},3260:(at,De,N)=>{N.d(De,{L:()=>se,Q:()=>P});var g=N(655),W=N(576);function P(J){return(0,g.FC)(this,arguments,function*(){const re=J.getReader();try{for(;;){const{value:ce,done:oe}=yield(0,g.qq)(re.read());if(oe)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(ce)}}finally{re.releaseLock()}})}function se(J){return(0,W.m)(null==J?void 0:J.getReader)}},4482:(at,De,N)=>{N.d(De,{A:()=>W,e:()=>P});var g=N(576);function W(se){return(0,g.m)(null==se?void 0:se.lift)}function P(se){return J=>{if(W(J))return J.lift(function(fe){try{return se(fe,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(at,De,N)=>{N.d(De,{h:()=>P});var g=N(2416),W=N(3410);function P(se){W.z.setTimeout(()=>{const{onUnhandledError:J}=g.v;if(!J)throw se;J(se)})}},4532:(at,De,N)=>{function g(W){return new TypeError(`You provided ${null!==W&&"object"==typeof W?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(De,{z:()=>g})},655:(at,De,N)=>{function se(Q,ie){var ee={};for(var we in Q)Object.prototype.hasOwnProperty.call(Q,we)&&ie.indexOf(we)<0&&(ee[we]=Q[we]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(we=Object.getOwnPropertySymbols(Q);pe<we.length;pe++)ie.indexOf(we[pe])<0&&Object.prototype.propertyIsEnumerable.call(Q,we[pe])&&(ee[we[pe]]=Q[we[pe]])}return ee}function ce(Q,ie,ee,we){return new(ee||(ee=Promise))(function(Ne,_t){function jt(Ft){try{Ge(we.next(Ft))}catch(zn){_t(zn)}}function Xt(Ft){try{Ge(we.throw(Ft))}catch(zn){_t(zn)}}function Ge(Ft){Ft.done?Ne(Ft.value):function pe(Ne){return Ne instanceof ee?Ne:new ee(function(_t){_t(Ne)})}(Ft.value).then(jt,Xt)}Ge((we=we.apply(Q,ie||[])).next())})}function he(Q){return this instanceof he?(this.v=Q,this):new he(Q)}function ve(Q,ie,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,we=ee.apply(Q,ie||[]),Ne=[];return pe={},_t("next"),_t("throw"),_t("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function _t(yn){we[yn]&&(pe[yn]=function(Kt){return new Promise(function(ui,$t){Ne.push([yn,Kt,ui,$t])>1||jt(yn,Kt)})})}function jt(yn,Kt){try{!function Xt(yn){yn.value instanceof he?Promise.resolve(yn.value.v).then(Ge,Ft):zn(Ne[0][2],yn)}(we[yn](Kt))}catch(ui){zn(Ne[0][3],ui)}}function Ge(yn){jt("next",yn)}function Ft(yn){jt("throw",yn)}function zn(yn,Kt){yn(Kt),Ne.shift(),Ne.length&&jt(Ne[0][0],Ne[0][1])}}function Ze(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,ie=Q[Symbol.asyncIterator];return ie?ie.call(Q):(Q=function K(Q){var ie="function"==typeof Symbol&&Symbol.iterator,ee=ie&&Q[ie],we=0;if(ee)return ee.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&we>=Q.length&&(Q=void 0),{value:Q&&Q[we++],done:!Q}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),ee={},we("next"),we("throw"),we("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function we(Ne){ee[Ne]=Q[Ne]&&function(_t){return new Promise(function(jt,Xt){!function pe(Ne,_t,jt,Xt){Promise.resolve(Xt).then(function(Ge){Ne({value:Ge,done:jt})},_t)}(jt,Xt,(_t=Q[Ne](_t)).done,_t.value)})}}}N.d(De,{FC:()=>ve,KL:()=>Ze,_T:()=>se,mG:()=>ce,qq:()=>he})},5e3:(at,De,N)=>{N.d(De,{$8M:()=>ko,$Z:()=>Fw,AFp:()=>Cm,AaK:()=>ce,CHM:()=>qu,CRH:()=>eI,CZH:()=>Mv,CqO:()=>A_,EJc:()=>dh,EpF:()=>Rd,F4k:()=>Be,FYo:()=>RE,FiY:()=>ii,G48:()=>rD,GfV:()=>Ru,Gpc:()=>j,JOm:()=>ne,LFG:()=>Qe,LSH:()=>fu,Lbi:()=>uh,MGl:()=>xf,NdJ:()=>Ug,OlP:()=>pn,Oqu:()=>qg,PXZ:()=>AI,Q6J:()=>Qn,QGY:()=>Vg,Qsj:()=>PE,R0b:()=>Io,RDi:()=>Yi,Rgc:()=>dc,SBq:()=>sc,Sil:()=>Pv,Suo:()=>XE,TTD:()=>Zs,TgZ:()=>Cn,VLi:()=>Uv,X6Q:()=>qv,XFs:()=>ut,Xpm:()=>St,Y36:()=>Wo,YKP:()=>eh,YNc:()=>I_,Yjl:()=>dr,Yz7:()=>Kt,ZZ4:()=>Hm,_Bn:()=>Oa,_UZ:()=>Af,_Vd:()=>Ra,_c5:()=>hD,_uU:()=>ls,aQg:()=>_p,c2e:()=>lh,cJS:()=>$t,cg1:()=>Qg,dDg:()=>DI,deG:()=>Vp,dqk:()=>kt,eFA:()=>xm,ekj:()=>Ir,g9A:()=>Dm,h0i:()=>ac,hGG:()=>LI,iGM:()=>hm,ifc:()=>Vt,ip1:()=>bm,kL8:()=>xa,lG2:()=>Ht,n5z:()=>Hc,oAB:()=>Z,oxw:()=>zl,q4F:()=>kE,qLn:()=>_r,qOj:()=>xg,qZA:()=>Zo,sBO:()=>zv,sIi:()=>bu,s_b:()=>ip,soG:()=>Tm,tBr:()=>Tr,tb:()=>ka,tp0:()=>so,uIk:()=>bf,vHH:()=>Me,vpe:()=>$s,wAp:()=>Xe,xp6:()=>V0,z2F:()=>Fu,zSh:()=>Ca,zs3:()=>po});var g=N(7579),W=N(727),P=N(8306),se=N(6451),J=N(3099);function fe(i){for(let s in i)if(i[s]===fe)return s;throw Error("Could not find renamed property on target object.")}function re(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function oe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=fe({__forward_ref__:fe});function j(i){return i.__forward_ref__=j,i.toString=function(){return ce(this())},i}function K(i){return qe(i)?i():i}function qe(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}class Me extends Error{constructor(s,a){super(function ke(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function me(i,s){const a=s?` in ${s}`:"";throw new Me(-201,`No provider for ${ve(i)} found${a}`)}function Xt(i,s){null==i&&function Ge(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Kt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function $t(i){return{providers:i.providers||[],imports:i.imports||[]}}function Lt(i){return Jn(i,Ti)||Jn(i,Gi)}function Jn(i,s){return i.hasOwnProperty(s)?i[s]:null}function br(i){return i&&(i.hasOwnProperty(Cr)||i.hasOwnProperty(qi))?i[Cr]:null}const Ti=fe({\u0275prov:fe}),Cr=fe({\u0275inj:fe}),Gi=fe({ngInjectableDef:fe}),qi=fe({ngInjectorDef:fe});var ut=(()=>((ut=ut||{})[ut.Default=0]="Default",ut[ut.Host=1]="Host",ut[ut.Self=2]="Self",ut[ut.SkipSelf=4]="SkipSelf",ut[ut.Optional=8]="Optional",ut))();let kr;function Un(i){const s=kr;return kr=i,s}function Kr(i,s,a){const l=Lt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ut.Optional?null:void 0!==s?s:void me(ce(i),"Injector")}function hn(i){return{toString:i}.toString()}var Zn=(()=>((Zn=Zn||{})[Zn.OnPush=0]="OnPush",Zn[Zn.Default=1]="Default",Zn))(),Vt=(()=>{return(i=Vt||(Vt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Vt;var i})();const it="undefined"!=typeof globalThis&&globalThis,gt="undefined"!=typeof window&&window,Xn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,kt=it||"undefined"!=typeof global&&global||gt||Xn,er={},lt=[],cr=fe({\u0275cmp:fe}),Ot=fe({\u0275dir:fe}),Ke=fe({\u0275pipe:fe}),Ce=fe({\u0275mod:fe}),Ye=fe({\u0275fac:fe}),ct=fe({__NG_ELEMENT_ID__:fe});let Nt=0;function St(i){return hn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Zn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||lt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Vt.Emulated,id:"c",styles:i.styles||lt,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,f=i.features,_=i.pipes;return l.id+=Nt++,l.inputs=ht(i.inputs,a),l.outputs=ht(i.outputs),f&&f.forEach(w=>w(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(L):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map($):null,l})}function L(i){return Ut(i)||function _n(i){return i[Ot]||null}(i)}function $(i){return function bt(i){return i[Ke]||null}(i)}const ue={};function Z(i){return hn(()=>{const s={type:i.type,bootstrap:i.bootstrap||lt,declarations:i.declarations||lt,imports:i.imports||lt,exports:i.exports||lt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(ue[i.id]=i.type),s})}function ht(i,s){if(null==i)return er;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=l,s&&(s[c]=f)}return a}const Ht=St;function dr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ut(i){return i[cr]||null}function sn(i,s){const a=i[Ce]||null;if(!a&&!0===s)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function li(i){return Array.isArray(i)&&"object"==typeof i[1]}function Qr(i){return Array.isArray(i)&&!0===i[1]}function Ic(i){return 0!=(8&i.flags)}function vs(i){return 2==(2&i.flags)}function Ba(i){return 1==(1&i.flags)}function Lr(i){return null!==i.template}function vh(i){return 0!=(512&i[2])}function Vr(i,s){return i.hasOwnProperty(Ye)?i[Ye]:null}class Do{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Zs(){return sa}function sa(i){return i.type.prototype.ngOnChanges&&(i.setInput=kp),Sc}function Sc(){const i=Is(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===er)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function kp(i,s,a,l){const c=Is(i)||function Jr(i,s){return i[To]=s}(i,{previous:er,current:null}),f=c.current||(c.current={}),_=c.previous,w=this.declaredInputs[a],I=_[w];f[w]=new Do(I&&I.currentValue,s,_===er),i[l]=s}Zs.ngInherit=!0;const To="__ngSimpleChanges__";function Is(i){return i[To]||null}let Wa;function Yi(i){Wa=i}function ln(i){return!!i.listen}const Ao={createRenderer:(i,s)=>function oa(){return void 0!==Wa?Wa:"undefined"!=typeof document?document:void 0}()};function nn(i){for(;Array.isArray(i);)i=i[0];return i}function Ys(i,s){return nn(s[i])}function hr(i,s){return nn(s[i.index])}function aa(i,s){return i.data[s]}function fr(i,s){const a=s[i];return li(a)?a:a[0]}function Cs(i){return 4==(4&i[2])}function Qi(i){return 128==(128&i[2])}function Br(i,s){return null==s?null:i[s]}function Ds(i){i[18]=0}function Ts(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const dt={lFrame:Js(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ja(){return dt.bindingsEnabled}function Ee(){return dt.lFrame.lView}function xt(){return dt.lFrame.tView}function qu(i){return dt.lFrame.contextLView=i,i[8]}function fn(){let i=So();for(;null!==i&&64===i.type;)i=i.parent;return i}function So(){return dt.lFrame.currentTNode}function jr(i,s){const a=dt.lFrame;a.currentTNode=i,a.isParent=s}function zu(){return dt.lFrame.isParent}function Xa(){return dt.isInCheckNoChangesMode}function As(i){dt.isInCheckNoChangesMode=i}function Ss(){return dt.lFrame.bindingIndex++}function nu(i,s){const a=dt.lFrame;a.bindingIndex=a.bindingRootIndex=i,la(s)}function la(i){dt.lFrame.currentDirectiveIndex=i}function Qu(){return dt.lFrame.currentQueryIndex}function Ju(i){dt.lFrame.currentQueryIndex=i}function Rc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Xu(i,s,a){if(a&ut.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&ut.Host||(c=Rc(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const l=dt.lFrame=Pc();return l.currentTNode=s,l.lView=i,!0}function Qs(i){const s=Pc(),a=i[1];dt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Pc(){const i=dt.lFrame,s=null===i?null:i.child;return null===s?Js(i):s}function Js(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Nc(){const i=dt.lFrame;return dt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const kc=Nc;function Xs(){const i=Nc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function pr(){return dt.lFrame.selectedIndex}function Ms(i){dt.lFrame.selectedIndex=i}function vn(){const i=dt.lFrame;return aa(i.tView,i.selectedIndex)}function Ji(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:S}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function da(i,s,a){Fc(i,s,3,a)}function ru(i,s,a,l){(3&i[2])===a&&Fc(i,s,a,l)}function Fn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Fc(i,s,a,l){const f=null!=l?l:-1,_=s.length-1;let w=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(w=s[I],null!=l&&w>=l)break}else s[I]<0&&(i[18]+=65536),(w<f||-1==f)&&(Fp(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Fp(i,s,a,l){const c=a[l]<0,f=a[l+1],w=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class Mo{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function ft(i,s,a){const l=ln(i);let c=0;for(;c<a.length;){const f=a[c];if("number"==typeof f){if(0!==f)break;c++;const _=a[c++],w=a[c++],I=a[c++];l?i.setAttribute(s,w,I,_):s.setAttributeNS(_,w,I)}else{const _=f,w=a[++c];$r(_)?l&&i.setProperty(s,_,w):l?i.setAttribute(s,_,w):s.setAttribute(_,w),c++}}return c}function sr(i){return 3===i||4===i||6===i}function $r(i){return 64===i.charCodeAt(0)}function Hr(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||Oo(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function Oo(i,s,a,l,c){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===s){_=-1;break}if(w>s){_=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==c&&(i[f+1]=c));if(l===i[f+1])return void(i[f+2]=c)}f++,null!==l&&f++,null!==c&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==c&&i.splice(f++,0,c)}function Uc(i){return-1!==i}function an(i){return 32767&i}function hi(i,s){let a=function Ch(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let iu=!0;function ei(i){const s=iu;return iu=i,s}let jc=0;function Ln(i,s){const a=Ro(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,es(l.data,i),es(s,null),es(l.blueprint,null));const c=ti(i,s),f=i.injectorIndex;if(Uc(c)){const _=an(c),w=hi(c,s),I=w[1].data;for(let T=0;T<8;T++)s[f+T]=w[_+T]|I[_+T]}return s[f+8]=c,f}function es(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ro(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function ti(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const f=c[1],_=f.type;if(l=2===_?f.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Os(i,s,a){!function to(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ct)&&(l=a[ct]),null==l&&(l=a[ct]=jc++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function xi(i,s,a){if(a&ut.Optional)return i;me(s,"NodeInjector")}function sl(i,s,a,l){if(a&ut.Optional&&void 0===l&&(l=null),0==(a&(ut.Self|ut.Host))){const c=i[9],f=Un(void 0);try{return c?c.get(s,l,a&ut.Optional):Kr(s,l,a&ut.Optional)}finally{Un(f)}}return xi(l,s,a)}function Rs(i,s,a,l=ut.Default,c){if(null!==i){const f=function No(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ct)?i[ct]:void 0;return"number"==typeof s?s>=0?255&s:ol:s}(a);if("function"==typeof f){if(!Xu(s,i,l))return l&ut.Host?xi(c,a,l):sl(s,a,l,c);try{const _=f(l);if(null!=_||l&ut.Optional)return _;me(a)}finally{kc()}}else if("number"==typeof f){let _=null,w=Ro(i,s),I=-1,T=l&ut.Host?s[16][6]:null;for((-1===w||l&ut.SkipSelf)&&(I=-1===w?ti(i,s):s[w+8],-1!==I&&Dr(l,!1)?(_=s[1],w=an(I),s=hi(I,s)):w=-1);-1!==w;){const S=s[1];if(fa(f,w,S.data)){const k=$c(w,s,a,_,l,T);if(k!==Mi)return k}I=s[w+8],-1!==I&&Dr(l,s[1].data[w+8]===T)&&fa(f,w,s)?(_=S,w=an(I),s=hi(I,s)):w=-1}}}return sl(s,a,l,c)}const Mi={};function ol(){return new pi(fn(),Ee())}function $c(i,s,a,l,c,f){const _=s[1],w=_.data[i+8],S=Po(w,_,a,null==l?vs(w)&&iu:l!=_&&0!=(3&w.type),c&ut.Host&&f===w);return null!==S?fi(s,_,S,w):Mi}function Po(i,s,a,l,c){const f=i.providerIndexes,_=s.data,w=1048575&f,I=i.directiveStart,S=f>>20,V=c?w+S:i.directiveEnd;for(let z=l?w:w+S;z<V;z++){const ge=_[z];if(z<I&&a===ge||z>=I&&ge.type===a)return z}if(c){const z=_[I];if(z&&Lr(z)&&z.type===a)return I}return null}function fi(i,s,a,l){let c=i[a];const f=s.data;if(function Lc(i){return i instanceof Mo}(c)){const _=c;_.resolving&&function et(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Me(-200,`Circular dependency in DI detected for ${i}${a}`)}(ve(f[a]));const w=ei(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?Un(_.injectImpl):null;Xu(i,l,ut.Default);try{c=i[a]=_.factory(void 0,f,i,l),s.firstCreatePass&&a>=l.directiveStart&&function nl(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(l){const _=sa(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&Un(I),ei(w),_.resolving=!1,kc()}}return c}function fa(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Dr(i,s){return!(i&ut.Self||i&ut.Host&&s)}class pi{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Rs(this._tNode,this._lView,s,l,a)}}function Hc(i){return hn(()=>{const s=i.prototype.constructor,a=s[Ye]||Pn(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const f=c[Ye]||Pn(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function Pn(i){return qe(i)?()=>{const s=Pn(K(i));return s&&s()}:Vr(i)}function ko(i){return function ha(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const f=a[c];if(sr(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(fn(),i)}const Fo="__parameters__";function wn(i,s,a){return hn(()=>{const l=function Oi(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...f){if(this instanceof c)return l.apply(this,f),this;const _=new c(...f);return w.annotation=_,w;function w(I,T,S){const k=I.hasOwnProperty(Fo)?I[Fo]:Object.defineProperty(I,Fo,{value:[]})[Fo];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class pn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Kt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Vp=new pn("AnalyzeForEntryComponents");function mr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),mr(l,s)):s!==i&&s.push(l)}return s}function ni(i,s){i.forEach(a=>Array.isArray(a)?ni(a,s):s(a))}function ll(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function rs(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function jn(i,s,a){let l=Fs(i,s);return l>=0?i[1|l]=a:(l=~l,function cl(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function fl(i,s){const a=Fs(i,s);if(a>=0)return i[1|a]}function Fs(i,s){return function no(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const f=l+(c-l>>1),_=i[f<<a];if(s===_)return f<<a;_>s?c=f:l=f+1}return~(c<<a)}(i,s,1)}const ro={},Vo="__NG_DI_FLAG__",uu="ngTempTokenPath",C=/\n/gm,F="__source",q=fe({provide:String,useValue:fe});let X;function Ae(i){const s=X;return X=i,s}function Se(i,s=ut.Default){if(void 0===X)throw new Me(203,"");return null===X?Kr(i,void 0,s):X.get(i,s&ut.Optional?null:void 0,s)}function Qe(i,s=ut.Default){return(function Wn(){return kr}()||Se)(K(i),s)}const Ct=Qe;function vt(i){const s=[];for(let a=0;a<i.length;a++){const l=K(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Me(900,"");let c,f=ut.Default;for(let _=0;_<l.length;_++){const w=l[_],I=En(w);"number"==typeof I?-1===I?c=w.token:f|=I:c=w}s.push(Qe(c,f))}else s.push(Qe(l))}return s}function Vn(i,s){return i[Vo]=s,i.prototype[Vo]=s,i}function En(i){return i[Vo]}const Tr=Vn(wn("Inject",i=>({token:i})),-1),ii=Vn(wn("Optional"),8),so=Vn(wn("SkipSelf"),4);class Xc{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ls(i){return i instanceof Xc?i.changingThisBreaksApplicationSecurity:i}const Vs=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Rh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Qt=(()=>((Qt=Qt||{})[Qt.NONE=0]="NONE",Qt[Qt.HTML=1]="HTML",Qt[Qt.STYLE=2]="STYLE",Qt[Qt.SCRIPT=3]="SCRIPT",Qt[Qt.URL=4]="URL",Qt[Qt.RESOURCE_URL=5]="RESOURCE_URL",Qt))();function fu(i){const s=function $o(){const i=Ee();return i&&i[12]}();return s?s.sanitize(Qt.URL,i)||"":function Bo(i,s){const a=function cu(i){return i instanceof Xc&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Ls(i):function du(i){return(i=String(i)).match(Vs)||i.match(Rh)?i:"unsafe:"+i}(he(i))}const $h="__ngContext__";function Ar(i,s){i[$h]=s}function Hh(i){const s=function _a(i){return i[$h]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Ea(i){return i.ngOriginalError}function eg(i,...s){i.error(...s)}class _r{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function vy(i){return i&&i.ngErrorLogger||eg}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Ea(s);for(;a&&Ea(a);)a=Ea(a);return a||null}}const by=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(kt))();function p(i){return i instanceof Function?i():i}var ne=(()=>((ne=ne||{})[ne.Important=1]="Important",ne[ne.DashCase=2]="DashCase",ne))();function Je(i,s){return undefined(i,s)}function In(i){const s=i[3];return Qr(s)?s[3]:s}function pu(i){return Qh(i[13])}function gu(i){return Qh(i[4])}function Qh(i){for(;null!==i&&!Qr(i);)i=i[4];return i}function Ho(i,s,a,l,c){if(null!=l){let f,_=!1;Qr(l)?f=l:li(l)&&(_=!0,l=l[0]);const w=nn(l);0===i&&null!==a?null==c?My(s,a,w):ss(s,a,w,c||null,!0):1===i&&null!==a?ss(s,a,w,c||null,!0):2===i?function Ny(i,s,a){const l=ef(i,s);l&&function mb(i,s,a,l){ln(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,_):3===i&&s.destroyNode(w),null!=f&&function Fy(i,s,a,l,c){const f=a[7];f!==nn(a)&&Ho(s,i,l,f,c);for(let w=10;w<a.length;w++){const I=a[w];sg(I[1],I,i,s,l,f)}}(s,i,f,a,c)}}function ad(i,s,a){if(ln(i))return i.createElement(s,a);{const l=null!==a?function za(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function x0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Ts(c,-1)),a.splice(l,1)}function Ay(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&x0(c,l),s>0&&(i[a-1][4]=l[4]);const f=rs(i,10+s);!function qr(i,s){sg(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=f[19];null!==_&&_.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Sy(i,s){if(!(256&s[2])){const a=s[11];ln(a)&&a.destroyNode&&sg(i,s,a,3,null,null),function Ty(i){let s=i[13];if(!s)return xy(i[1],i);for(;s;){let a=null;if(li(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)li(s)&&xy(s[1],s),s=s[3];null===s&&(s=i),li(s)&&xy(s[1],s),a=s&&s[4]}s=a}}(s)}}function xy(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function O0(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof Mo)){const f=a[l+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const w=c[f[_]],I=f[_+1];try{I.call(w)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function M0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],w="function"==typeof _?_(s):nn(s[_]),I=l[c=a[f+2]],T=a[f+3];"boolean"==typeof T?w.removeEventListener(a[f],I,T):T>=0?l[c=T]():l[c=-T].unsubscribe(),f+=2}else{const _=l[c=a[f+1]];a[f].call(_)}if(null!==l){for(let f=c+1;f<l.length;f++)l[f]();s[7]=null}}(i,s),1===s[1].type&&ln(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Qr(s[3])){a!==s[3]&&x0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function rg(i,s,a){return function gb(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Vt.None||c===Vt.Emulated)return null}return hr(l,a)}(i,s.parent,a)}function ss(i,s,a,l,c){ln(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function My(i,s,a){ln(i)?i.appendChild(s,a):s.appendChild(a)}function R0(i,s,a,l,c){null!==l?ss(i,s,a,l,c):My(i,s,a)}function ef(i,s){return ln(i)?i.parentNode(s):s.parentNode}let Oy=function N0(i,s,a){return 40&i.type?hr(i,a):null};function ig(i,s,a,l){const c=rg(i,l,s),f=s[11],w=function P0(i,s,a){return Oy(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)R0(f,c,a[I],w,!1);else R0(f,c,a,w,!1)}function cd(i,s){if(null!==s){const a=s.type;if(3&a)return hr(s,i);if(4&a)return Py(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return cd(i,l);{const c=i[s.index];return Qr(c)?Py(-1,c):nn(c)}}if(32&a)return Je(s,i)()||nn(i[s.index]);{const l=F0(i,s);return null!==l?Array.isArray(l)?l[0]:cd(In(i[16]),l):cd(i,s.next)}}return null}function F0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Py(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return cd(l,c)}return s[7]}function ky(i,s,a,l,c,f,_){for(;null!=a;){const w=l[a.index],I=a.type;if(_&&0===s&&(w&&Ar(nn(w),l),a.flags|=4),64!=(64&a.flags))if(8&I)ky(i,s,a.child,l,c,f,!1),Ho(s,i,c,w,f);else if(32&I){const T=Je(a,l);let S;for(;S=T();)Ho(s,i,c,S,f);Ho(s,i,c,w,f)}else 16&I?vr(i,s,l,a,c,f):Ho(s,i,c,w,f);a=_?a.projectionNext:a.next}}function sg(i,s,a,l,c,f){ky(a,l,i.firstChild,s,c,f,!1)}function vr(i,s,a,l,c,f){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)Ho(s,i,c,I[T],f);else ky(i,s,I,_[3],c,f,!0)}function L0(i,s,a){ln(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function os(i,s,a){ln(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function wb(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===l||i.charCodeAt(c+f)<=32)return c}a=c+1}}const ye="ng-template";function xl(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==wb(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function tf(i){return 4===i.type&&i.value!==ye}function mu(i,s,a){return s===(4!==i.type||a?i.value:ye)}function Bt(i,s,a){let l=4;const c=i.attrs||[],f=function It(i){for(let s=0;s<i.length;s++)if(sr(i[s]))return s;return i.length}(c);let _=!1;for(let w=0;w<s.length;w++){const I=s[w];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!mu(i,I,a)||""===I&&1===s.length){if(ho(l))return!1;_=!0}}else{const T=8&l?I:s[++w];if(8&l&&null!==i.attrs){if(!xl(i.attrs,T,a)){if(ho(l))return!1;_=!0}continue}const k=Ia(8&l?"class":I,c,tf(i),a);if(-1===k){if(ho(l))return!1;_=!0;continue}if(""!==T){let V;V=k>f?"":c[k+1].toLowerCase();const z=8&l?V:null;if(z&&-1!==wb(z,T,0)||2&l&&T!==V){if(ho(l))return!1;_=!0}}}}else{if(!_&&!ho(l)&&!ho(I))return!1;if(_&&ho(I))continue;_=!1,l=I|1&l}}return ho(l)||_}function ho(i){return 0==(1&i)}function Ia(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let f=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let w=s[++c];for(;"string"==typeof w;)w=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function og(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function tt(i,s,a=!1){for(let l=0;l<s.length;l++)if(Bt(i,s[l],a))return!0;return!1}function dd(i,s){return i?":not("+s.trim()+")":s}function Eb(i){let s=i[0],a=1,l=2,c="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];c+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!ho(_)&&(s+=dd(f,c),c=""),l=_,f=f||!ho(l);a++}return""!==c&&(s+=dd(f,c)),s}const Dt={};function V0(i){Sr(xt(),Ee(),pr()+i,Xa())}function Sr(i,s,a,l){if(!l)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&da(s,f,a)}else{const f=i.preOrderHooks;null!==f&&ru(s,f,0,a)}Ms(a)}function or(i,s){return i<<17|s<<2}function xr(i){return i>>17&32767}function ag(i){return 2|i}function Go(i){return(131068&i)>>2}function By(i,s){return-131069&i|s<<2}function rf(i){return 1|i}function X0(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],f=a[l+1];if(-1!==f){const _=i.data[f];Ju(c),_.contentQueries(2,s[f],f)}}}function Ml(i,s,a,l,c,f,_,w,I,T){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,Ds(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=w||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=T||i&&i[9]||null,S[6]=f,S[16]=2==s.type?i[16]:S,S}function Ol(i,s,a,l,c){let f=i.data[s];if(null===f)f=function Yy(i,s,a,l,c){const f=So(),_=zu(),I=i.data[s]=function Jy(i,s,a,l,c,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==f&&(_?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,l,c),function Ku(){return dt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=c;const _=function xo(){const i=dt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return jr(f,!0),f}function yu(i,s,a,l){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function Rl(i,s,a){Qs(s);try{const l=i.viewQuery;null!==l&&wg(1,l,a);const c=i.template;null!==c&&Rr(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&X0(i,s),i.staticViewQueries&&wg(2,i.viewQuery,a);const f=i.components;null!==f&&function tw(i,s){for(let a=0;a<s.length;a++)o_(i,s[a])}(s,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Xs()}}function _u(i,s,a,l){const c=s[2];if(256==(256&c))return;Qs(s);const f=Xa();try{Ds(s),function eu(i){return dt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Rr(i,s,a,2,l);const _=3==(3&c);if(!f)if(_){const T=i.preOrderCheckHooks;null!==T&&da(s,T,null)}else{const T=i.preOrderHooks;null!==T&&ru(s,T,0,null),Fn(s,0)}if(function hf(i){for(let s=pu(i);null!==s;s=gu(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],f=c[3];0==(1024&c[2])&&Ts(f,1),c[2]|=1024}}}(s),function fw(i){for(let s=pu(i);null!==s;s=gu(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];Qi(l)&&_u(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&X0(i,s),!f)if(_){const T=i.contentCheckHooks;null!==T&&da(s,T)}else{const T=i.contentHooks;null!==T&&ru(s,T,1),Fn(s,1)}!function J0(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Ms(~c);else{const f=c,_=a[++l],w=a[++l];nu(_,f),w(2,s[f])}}}finally{Ms(-1)}}(i,s);const w=i.components;null!==w&&function ew(i,s){for(let a=0;a<s.length;a++)s_(i,s[a])}(s,w);const I=i.viewQuery;if(null!==I&&wg(2,I,l),!f)if(_){const T=i.viewCheckHooks;null!==T&&da(s,T)}else{const T=i.viewHooks;null!==T&&ru(s,T,2),Fn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Ts(s[3],-1))}finally{Xs()}}function Or(i,s,a,l){const c=s[10],f=!Xa(),_=Cs(s);try{f&&!_&&c.begin&&c.begin(),_&&Rl(i,s,l),_u(i,s,a,l)}finally{f&&!_&&c.end&&c.end()}}function Rr(i,s,a,l,c){const f=pr(),_=2&l;try{Ms(-1),_&&s.length>20&&Sr(i,s,20,Xa()),a(l,c)}finally{Ms(f)}}function cf(i,s,a){!Ja()||(function md(i,s,a,l){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Ln(a,s),Ar(l,s);const _=a.initialInputs;for(let w=c;w<f;w++){const I=i.data[w],T=Lr(I);T&&Ii(s,a,I);const S=fi(s,i,w,a);Ar(S,s),null!==_&&mg(0,w-c,S,I,0,_),T&&(fr(a.index,s)[8]=S)}}(i,s,a,hr(a,s)),128==(128&a.flags)&&function Ob(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,w=function Yu(){return dt.lFrame.currentDirectiveIndex}();try{Ms(_);for(let I=l;I<c;I++){const T=i.data[I],S=s[I];la(I),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&lw(T,S)}}finally{Ms(-1),la(w)}}(i,s,a))}function Qy(i,s,a=hr){const l=s.localNames;if(null!==l){let c=s.index+1;for(let f=0;f<l.length;f+=2){const _=l[f+1],w=-1===_?a(s,i):i[_];i[c++]=w}}}function nw(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=df(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function df(i,s,a,l,c,f,_,w,I,T){const S=20+l,k=S+c,V=function Ab(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Dt);return a}(S,k),z="function"==typeof T?T():T;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:w,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:z,incompleteFirstPass:!1}}function sw(i,s,a,l){const c=a_(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&mf(i).push(l,c.length-1))}function Xy(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function Ei(i,s,a,l,c,f,_,w){const I=hr(s,a);let S,T=s.inputs;!w&&null!=T&&(S=T[l])?(Eg(i,a,S,l,c),vs(s)&&function e_(i,s){const a=fr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function fg(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,ln(f)?f.setProperty(I,l,c):$r(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}function gd(i,s,a,l){let c=!1;if(Ja()){const f=function Pl(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let f=0;f<l.length;f++){const _=l[f];tt(a,_.selectors,!1)&&(c||(c=[]),Os(Ln(a,s),i,_.type),Lr(_)?(n_(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==f){c=!0,yd(a,i.data.length,f.length);for(let S=0;S<f.length;S++){const k=f[S];k.providersResolver&&k.providersResolver(k)}let w=!1,I=!1,T=yu(i,s,f.length,null);for(let S=0;S<f.length;S++){const k=f[S];a.mergedAttrs=Hr(a.mergedAttrs,k.hostAttrs),r_(i,a,s,T,k),cw(T,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const V=k.type.prototype;!w&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}!function Sb(i,s){const l=s.directiveEnd,c=i.data,f=s.attrs,_=[];let w=null,I=null;for(let T=s.directiveStart;T<l;T++){const S=c[T],k=S.inputs,V=null===f||tf(s)?null:dw(k,f);_.push(V),w=Xy(k,T,w),I=Xy(S.outputs,T,I)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=w,s.outputs=I}(i,a)}_&&function gg(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new Me(-301,!1);l.push(s[c],f)}}}(a,l,_)}return a.mergedAttrs=Hr(a.mergedAttrs,a.attrs),c}function uw(i,s,a,l,c,f){const _=f.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const I=~s.index;(function Mb(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=I&&w.push(I),w.push(l,c,_)}}function lw(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function n_(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function cw(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Lr(s)&&(a[""]=i)}}function yd(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function r_(i,s,a,l,c){i.data[l]=c;const f=c.factory||(c.factory=Vr(c.type)),_=new Mo(f,Lr(c),null);i.blueprint[l]=_,a[l]=_,uw(i,s,0,l,yu(i,a,c.hostVars,Dt),c)}function Ii(i,s,a){const l=hr(s,i),c=nw(a),f=i[10],_=vu(i,Ml(i,c,null,a.onPush?64:16,l,s,f,f.createRenderer(l,a),null,null));i[s.index]=_}function fo(i,s,a,l,c,f){const _=hr(i,s);!function Nl(i,s,a,l,c,f,_){if(null==f)ln(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const w=null==_?he(f):_(f,l||"",c);ln(i)?i.setAttribute(s,c,w,a):a?s.setAttributeNS(a,c,w):s.setAttribute(c,w)}}(s[11],_,f,i.value,a,l,c)}function mg(i,s,a,l,c,f){const _=f[s];if(null!==_){const w=l.setInput;for(let I=0;I<_.length;){const T=_[I++],S=_[I++],k=_[I++];null!==w?l.setInput(a,k,T,S):a[S]=k}}}function dw(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function i_(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function s_(i,s){const a=fr(s,i);if(Qi(a)){const l=a[1];80&a[2]?_u(l,a,l.template,a[8]):a[5]>0&&ff(a)}}function ff(i){for(let l=pu(i);null!==l;l=gu(l))for(let c=10;c<l.length;c++){const f=l[c];if(1024&f[2]){const _=f[1];_u(_,f,_.template,f[8])}else f[5]>0&&ff(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=fr(a[l],i);Qi(c)&&c[5]>0&&ff(c)}}function o_(i,s){const a=fr(s,i),l=a[1];(function yg(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Rl(l,a,a[8])}function vu(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function _g(i){for(;i;){i[2]|=64;const s=In(i);if(vh(i)&&!s)return i;i=s}return null}function _d(i,s,a){const l=s[10];l.begin&&l.begin();try{_u(i,s,i.template,a)}catch(c){throw wu(s,c),c}finally{l.end&&l.end()}}function vg(i){!function pf(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Hh(a),c=l[1];Or(c,l,c.template,a)}}(i[8])}function wg(i,s,a){Ju(0),s(i,a)}const gf=(()=>Promise.resolve(null))();function a_(i){return i[7]||(i[7]=[])}function mf(i){return i.cleanup||(i.cleanup=[])}function wu(i,s){const a=i[9],l=a?a.get(_r,null):null;l&&l.handleError(s)}function Eg(i,s,a,l,c){for(let f=0;f<a.length;){const _=a[f++],w=a[f++],I=s[_],T=i.data[_];null!==T.setInput?T.setInput(I,c,l,w):I[w]=c}}function ba(i,s,a){const l=Ys(s,i);!function od(i,s,a){ln(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function wd(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const w=s[_];"number"==typeof w?f=w:1==f?c=oe(c,w):2==f&&(l=oe(l,w+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Ig=new pn("INJECTOR",-1);class mw{get(s,a=ro){if(a===ro){const l=new Error(`NullInjectorError: No provider for ${ce(s)}!`);throw l.name="NullInjectorError",l}return a}}const Ca=new pn("Set Injector scope."),as={},bg={};let bd;function yf(){return void 0===bd&&(bd=new mw),bd}function l_(i,s=null,a=null,l){const c=bn(i,s,a,l);return c._resolveInjectorDefTypes(),c}function bn(i,s=null,a=null,l){return new Cg(i,a,s||yf(),l)}class Cg{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&ni(a,w=>this.processProvider(w,s,a)),ni([s],w=>this.processInjectorType(w,[],f)),this.records.set(Ig,Dd(void 0,this));const _=this.records.get(Ca);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:ce(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=ro,l=ut.Default){this.assertNotDestroyed();const c=Ae(this),f=Un(void 0);try{if(!(l&ut.SkipSelf)){let w=this.records.get(s);if(void 0===w){const I=function yw(i){return"function"==typeof i||"object"==typeof i&&i instanceof pn}(s)&&Lt(s);w=I&&this.injectableDefInScope(I)?Dd(c_(s),as):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&ut.Self?yf():this.parent).get(s,a=l&ut.Optional&&a===ro?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[uu]=_[uu]||[]).unshift(ce(s)),c)throw _;return function Uo(i,s,a,l){const c=i[uu];throw s[F]&&c.unshift(s[F]),i.message=function io(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=ce(s);if(Array.isArray(s))c=s.map(ce).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let w=s[_];f.push(_+":"+("string"==typeof w?JSON.stringify(w):ce(w)))}c=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(C,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[uu]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Un(f),Ae(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(ce(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processInjectorType(s,a,l){if(!(s=K(s)))return!1;let c=br(s);const f=null==c&&s.ngModule||void 0,_=void 0===f?s:f,w=-1!==l.indexOf(_);if(void 0!==f&&(c=br(f)),null==c)return!1;if(null!=c.imports&&!w){let S;l.push(_);try{ni(c.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:V,providers:z}=S[k];ni(z,ge=>this.processProvider(ge,V,z||lt))}}this.injectorDefTypes.add(_);const I=Vr(_)||(()=>new _);this.records.set(_,Dd(I,as));const T=c.providers;if(null!=T&&!w){const S=s;ni(T,k=>this.processProvider(k,S,T))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,l){let c=Td(s=K(s))?s:K(s&&s.provide);const f=function _f(i,s,a){return d_(i)?Dd(void 0,i.useValue):Dd(Cd(i),as)}(s);if(Td(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=Dd(void 0,as,!0),_.factory=()=>vt(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,f)}hydrate(s,a){return a.value===as&&(a.value=bg,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Eu(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=K(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function c_(i){const s=Lt(i),a=null!==s?s.factory:Vr(i);if(null!==a)return a;if(i instanceof pn)throw new Me(204,!1);if(i instanceof Function)return function Pb(i){const s=i.length;if(s>0)throw function mi(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Me(204,!1);const a=function Zr(i){const s=i&&(i[Ti]||i[Gi]);if(s){const a=function ps(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Me(204,!1)}function Cd(i,s,a){let l;if(Td(i)){const c=K(i);return Vr(c)||c_(c)}if(d_(i))l=()=>K(i.useValue);else if(function kb(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...vt(i.deps||[]));else if(function Nb(i){return!(!i||!i.useExisting)}(i))l=()=>Qe(K(i.useExisting));else{const c=K(i&&(i.useClass||i.provide));if(!function vf(i){return!!i.deps}(i))return Vr(c)||c_(c);l=()=>new c(...vt(i.deps))}return l}function Dd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function d_(i){return null!==i&&"object"==typeof i&&q in i}function Td(i){return"function"==typeof i}let po=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return l_({name:""},l,a,"");{const f=null!==(c=a.name)&&void 0!==c?c:"";return l_({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=ro,i.NULL=new mw,i.\u0275prov=Kt({token:i,providedIn:"any",factory:()=>Qe(Ig)}),i.__NG_ELEMENT_ID__=-1,i})();function jb(i,s){Ji(Hh(i)[1],fn())}function xg(i){let s=function bw(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Lr(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Me(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=Mg(i.inputs),_.declaredInputs=Mg(i.declaredInputs),_.outputs=Mg(i.outputs);const w=c.hostBindings;w&&Da(i,w);const I=c.viewQuery,T=c.contentQueries;if(I&&Og(i,I),T&&Dw(i,T),re(i.inputs,c.inputs),re(i.declaredInputs,c.declaredInputs),re(i.outputs,c.outputs),Lr(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const w=f[_];w&&w.ngInherit&&w(i),w===xg&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Cw(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=Hr(c.hostAttrs,a=Hr(a,c.hostAttrs))}}(l)}function Mg(i){return i===er?{}:i===lt?[]:i}function Og(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function Dw(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,f)=>{s(l,c,f),a(l,c,f)}:s}function Da(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Iu=null;function Fl(){if(!Iu){const i=kt.Symbol;if(i&&i.iterator)Iu=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Iu=l)}}}return Iu}function bu(i){return!!Sd(i)&&(Array.isArray(i)||!(i instanceof Map)&&Fl()in i)}function Sd(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ar(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function bf(i,s,a,l){const c=Ee();return ar(c,Ss(),s)&&(xt(),fo(vn(),c,i,s,a,l)),bf}function Ta(i,s,a,l){return ar(i,Ss(),a)?s+he(a)+l:Dt}function I_(i,s,a,l,c,f,_,w){const I=Ee(),T=xt(),S=i+20,k=T.firstCreatePass?function Hb(i,s,a,l,c,f,_,w,I){const T=s.consts,S=Ol(s,i,4,_||null,Br(T,w));gd(s,a,S,Br(T,I)),Ji(s,S);const k=S.tViews=df(2,S,l,c,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,T,I,s,a,l,c,f,_):T.data[S];jr(k,!1);const V=I[11].createComment("");ig(T,I,V,k),Ar(V,I),vu(I,I[S]=i_(V,I,V,k)),Ba(k)&&cf(T,I,k),null!=_&&Qy(I,k,w)}function Wo(i,s=ut.Default){const a=Ee();return null===a?Qe(i,s):Rs(fn(),a,K(i),s)}function Fw(){throw new Error("invalid")}function Qn(i,s,a){const l=Ee();return ar(l,Ss(),s)&&Ei(xt(),vn(),l,i,s,l[11],a,!1),Qn}function D_(i,s,a,l,c){const _=c?"class":"style";Eg(i,a,s.inputs[_],_,l)}function Cn(i,s,a,l){const c=Ee(),f=xt(),_=20+i,w=c[11],I=c[_]=ad(w,s,function Qm(){return dt.lFrame.currentNamespace}()),T=f.firstCreatePass?function Au(i,s,a,l,c,f,_){const w=s.consts,T=Ol(s,i,2,c,Br(w,f));return gd(s,a,T,Br(w,_)),null!==T.attrs&&wd(T,T.attrs,!1),null!==T.mergedAttrs&&wd(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,f,c,0,s,a,l):f.data[_];jr(T,!0);const S=T.mergedAttrs;null!==S&&ft(w,I,S);const k=T.classes;null!==k&&os(w,I,k);const V=T.styles;return null!==V&&L0(w,I,V),64!=(64&T.flags)&&ig(f,c,I,T),0===function ua(){return dt.lFrame.elementDepthCount}()&&Ar(I,c),function Ya(){dt.lFrame.elementDepthCount++}(),Ba(T)&&(cf(f,c,T),function lf(i,s,a){if(Ic(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,T,c)),null!==l&&Qy(c,T),Cn}function Zo(){let i=fn();zu()?function Wu(){dt.lFrame.isParent=!1}():(i=i.parent,jr(i,!1));const s=i;!function Qa(){dt.lFrame.elementDepthCount--}();const a=xt();return a.firstCreatePass&&(Ji(a,i),Ic(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function bh(i){return 0!=(16&i.flags)}(s)&&D_(a,s,Ee(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Lp(i){return 0!=(32&i.flags)}(s)&&D_(a,s,Ee(),s.stylesWithoutHost,!1),Zo}function Af(i,s,a,l){return Cn(i,s,a,l),Zo(),Af}function Rd(){return Ee()}function Vg(i){return!!i&&"function"==typeof i.then}function Be(i){return!!i&&"function"==typeof i.subscribe}const A_=Be;function Ug(i,s,a,l){const c=Ee(),f=xt(),_=fn();return function Pd(i,s,a,l,c,f,_,w){const I=Ba(l),S=i.firstCreatePass&&mf(i),k=s[8],V=a_(s);let z=!0;if(3&l.type||w){const Ue=hr(l,s),rt=w?w(Ue):Ue,Ie=V.length,He=w?qt=>w(nn(qt[l.index])):l.index;if(ln(a)){let qt=null;if(!w&&I&&(qt=function Ko(i,s,a,l){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===a&&c[f+1]===l){const w=s[7],I=c[f+2];return w.length>I?w[I]:null}"string"==typeof _&&(f+=2)}return null}(i,s,c,l.index)),null!==qt)(qt.__ngLastListenerFn__||qt).__ngNextListenerFn__=f,qt.__ngLastListenerFn__=f,z=!1;else{f=Bg(l,s,k,f,!1);const cn=a.listen(rt,c,f);V.push(f,cn),S&&S.push(c,He,Ie,Ie+1)}}else f=Bg(l,s,k,f,!0),rt.addEventListener(c,f,_),V.push(f),S&&S.push(c,He,Ie,_)}else f=Bg(l,s,k,f,!1);const ge=l.outputs;let Pe;if(z&&null!==ge&&(Pe=ge[c])){const Ue=Pe.length;if(Ue)for(let rt=0;rt<Ue;rt+=2){const rn=s[Pe[rt]][Pe[rt+1]].subscribe(f),Lu=V.length;V.push(f,rn),S&&S.push(c,l.index,Lu,-(Lu+1))}}}(f,c,c[11],_,i,s,!!a,l),Ug}function Aa(i,s,a,l){try{return!1!==a(l)}catch(c){return wu(i,c),!1}}function Bg(i,s,a,l,c){return function f(_){if(_===Function)return l;const w=2&i.flags?fr(i.index,s):s;0==(32&s[2])&&_g(w);let I=Aa(s,0,l,_),T=f.__ngNextListenerFn__;for(;T;)I=Aa(s,0,T,_)&&I,T=T.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function zl(i=1){return function xs(i){return(dt.lFrame.contextLView=function el(i,s){for(;i>0;)s=s[15],i--;return s}(i,dt.lFrame.contextLView))[8]}(i)}function xf(i,s,a,l,c){const f=Ee(),_=Ta(f,s,a,l);return _!==Dt&&Ei(xt(),vn(),f,i,_,f[11],c,!1),xf}function Of(i,s,a,l,c){const f=i[a+1],_=null===s;let w=l?xr(f):Go(f),I=!1;for(;0!==w&&(!1===I||_);){const S=i[w+1];N_(i[w],s)&&(I=!0,i[w+1]=l?rf(S):ag(S)),w=l?xr(S):Go(S)}I&&(i[a+1]=l?ag(f):rf(f))}function N_(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Fs(i,s)>=0}function Ir(i,s){return function yo(i,s,a,l){const c=Ee(),f=xt(),_=function di(i){const s=dt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function qw(i,s,a,l){const c=i.data;if(null===c[a+1]){const f=c[pr()],_=function Gw(i,s){return s>=i.expandoStartIndex}(i,a);(function Ql(i,s){return 0!=(i.flags&(s?16:32))})(f,l)&&null===s&&!_&&(s=!1),s=function Mu(i,s,a,l){const c=function ca(i){const s=dt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=us(a=$g(null,i,s,a,l),s.attrs,l),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=$g(c,i,s,a,l),null===f){let I=function Ld(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Go(l))return i[xr(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=$g(null,i,s,I[1],l),I=us(I,s.attrs,l),function rC(i,s,a,l){i[xr(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else f=function zw(i,s,a){let l;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)l=us(l,i[f].hostAttrs,a);return us(l,s.attrs,a)}(i,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,l),function Uw(i,s,a,l,c,f){let _=f?s.classBindings:s.styleBindings,w=xr(_),I=Go(_);i[l]=a;let S,T=!1;if(Array.isArray(a)){const k=a;S=k[1],(null===S||Fs(k,S)>0)&&(T=!0)}else S=a;if(c)if(0!==I){const V=xr(i[w+1]);i[l+1]=or(V,w),0!==V&&(i[V+1]=By(i[V+1],l)),i[w+1]=function bb(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=or(w,0),0!==w&&(i[w+1]=By(i[w+1],l)),w=l;else i[l+1]=or(I,0),0===w?w=l:i[I+1]=By(i[I+1],l),I=l;T&&(i[l+1]=ag(i[l+1])),Of(i,S,l,!0),Of(i,S,l,!1),function Dn(i,s,a,l,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Fs(f,s)>=0&&(a[l+1]=rf(a[l+1]))}(s,S,i,l,f),_=or(w,I),f?s.classBindings=_:s.styleBindings=_}(c,f,s,a,_,l)}}(f,i,_,l),s!==Dt&&ar(c,_,s)&&function kf(i,s,a,l,c,f,_,w){if(!(3&s.type))return;const I=i.data,T=I[w+1];Vd(function jy(i){return 1==(1&i)}(T)?Gg(I,s,a,c,Go(T),_):void 0)||(Vd(f)||function U0(i){return 2==(2&i)}(T)&&(f=Gg(I,null,a,c,w,_)),function vb(i,s,a,l,c){const f=ln(i);if(s)c?f?i.addClass(a,l):a.classList.add(l):f?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:ne.DashCase;if(null==c)f?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof c&&c.endsWith("!important");w&&(c=c.slice(0,-10),_|=ne.Important),f?i.setStyle(a,l,c,_):a.style.setProperty(l,c,w?"important":"")}}}(l,_,Ys(pr(),a),c,f))}(f,f.data[pr()],c,c[11],i,c[_+1]=function F_(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ce(Ls(i)))),i}(s,a),l,_)}(i,s,null,!0),Ir}function $g(i,s,a,l,c){let f=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(f=s[w],l=us(l,f.hostAttrs,c),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function us(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),jn(i,_,!!a||s[++f]))}return void 0===i?null:i}function Gg(i,s,a,l,c,f){const _=null===s;let w;for(;c>0;){const I=i[c],T=Array.isArray(I),S=T?I[1]:I,k=null===S;let V=a[c+1];V===Dt&&(V=k?lt:void 0);let z=k?fl(V,l):S===l?V:void 0;if(T&&!Vd(z)&&(z=fl(I,l)),Vd(z)&&(w=z,_))return w;const ge=i[c+1];c=_?xr(ge):Go(ge)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(w=fl(I,l))}return w}function Vd(i){return void 0!==i}function ls(i,s=""){const a=Ee(),l=xt(),c=i+20,f=l.firstCreatePass?Ol(l,c,1,s,null):l.data[c],_=a[c]=function sd(i,s){return ln(i)?i.createText(s):i.createTextNode(s)}(a[11],s);ig(l,a,_,f),jr(f,!1)}function qg(i){return Jl("",i,""),qg}function Jl(i,s,a){const l=Ee(),c=Ta(l,i,s,a);return c!==Dt&&ba(l,pr(),c),Jl}const vo=void 0;var uC=["en",[["a","p"],["AM","PM"],vo],[["AM","PM"],vo,vo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vo,"{1} 'at' {0}",vo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function W_(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let An={};function Qg(i){const s=function Sn(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Gn(s);if(a)return a;const l=s.split("-")[0];if(a=Gn(l),a)return a;if("en"===l)return uC;throw new Error(`Missing locale data for the locale "${i}".`)}function xa(i){return Qg(i)[Xe.PluralCase]}function Gn(i){return i in An||(An[i]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[i]),An[i]}var Xe=(()=>((Xe=Xe||{})[Xe.LocaleId=0]="LocaleId",Xe[Xe.DayPeriodsFormat=1]="DayPeriodsFormat",Xe[Xe.DayPeriodsStandalone=2]="DayPeriodsStandalone",Xe[Xe.DaysFormat=3]="DaysFormat",Xe[Xe.DaysStandalone=4]="DaysStandalone",Xe[Xe.MonthsFormat=5]="MonthsFormat",Xe[Xe.MonthsStandalone=6]="MonthsStandalone",Xe[Xe.Eras=7]="Eras",Xe[Xe.FirstDayOfWeek=8]="FirstDayOfWeek",Xe[Xe.WeekendRange=9]="WeekendRange",Xe[Xe.DateFormat=10]="DateFormat",Xe[Xe.TimeFormat=11]="TimeFormat",Xe[Xe.DateTimeFormat=12]="DateTimeFormat",Xe[Xe.NumberSymbols=13]="NumberSymbols",Xe[Xe.NumberFormats=14]="NumberFormats",Xe[Xe.CurrencyCode=15]="CurrencyCode",Xe[Xe.CurrencySymbol=16]="CurrencySymbol",Xe[Xe.CurrencyName=17]="CurrencyName",Xe[Xe.Currencies=18]="Currencies",Xe[Xe.Directionality=19]="Directionality",Xe[Xe.PluralCase=20]="PluralCase",Xe[Xe.ExtraData=21]="ExtraData",Xe))();const Jg="en-US";let iE=Jg;function Ma(i,s,a,l,c){if(i=K(i),Array.isArray(i))for(let f=0;f<i.length;f++)Ma(i[f],s,a,l,c);else{const f=xt(),_=Ee();let w=Td(i)?i:K(i.provide),I=Cd(i);const T=fn(),S=1048575&T.providerIndexes,k=T.directiveStart,V=T.providerIndexes>>20;if(Td(i)||!i.multi){const z=new Mo(I,c,Wo),ge=om(w,s,c?S:S+V,k);-1===ge?(Os(Ln(T,_),f,w),im(f,i,s.length),s.push(w),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(z),_.push(z)):(a[ge]=z,_[ge]=z)}else{const z=om(w,s,S+V,k),ge=om(w,s,S,S+V),Pe=z>=0&&a[z],Ue=ge>=0&&a[ge];if(c&&!Ue||!c&&!Pe){Os(Ln(T,_),f,w);const rt=function iv(i,s,a,l,c){const f=new Mo(i,a,Wo);return f.multi=[],f.index=s,f.componentProviders=0,sm(f,c,l&&!a),f}(c?rv:Pr,a.length,c,l,I);!c&&Ue&&(a[ge].providerFactory=rt),im(f,i,s.length,0),s.push(w),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(rt),_.push(rt)}else im(f,i,z>-1?z:ge,sm(a[c?ge:z],I,!c&&l));!c&&l&&Ue&&a[ge].componentProviders++}}}function im(i,s,a,l){const c=Td(s),f=function Fb(i){return!!i.useClass}(s);if(c||f){const I=(f?K(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=T.indexOf(a);-1===S?T.push(a,[l,I]):T[S+1].push(l,I)}else T.push(a,I)}}}function sm(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function om(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function Pr(i,s,a,l){return zf(this.multi,[])}function rv(i,s,a,l){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=fi(a,a[1],this.providerFactory.index,l);f=w.slice(0,_),zf(c,f);for(let I=_;I<w.length;I++)f.push(w[I])}else f=[],zf(c,f);return f}function zf(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Oa(i,s=[]){return a=>{a.providersResolver=(l,c)=>function xC(i,s,a){const l=xt();if(l.firstCreatePass){const c=Lr(i);Ma(a,l.data,l.blueprint,c,!0),Ma(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class ME{}class rc{resolveComponentFactory(s){throw function OE(i){const s=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Ra=(()=>{class i{}return i.NULL=new rc,i})();function Zf(){return ic(fn(),Ee())}function ic(i,s){return new sc(hr(i,s))}let sc=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Zf,i})();function sv(i){return i instanceof sc?i.nativeElement:i}class RE{}let PE=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function ov(){const i=Ee(),a=fr(fn().index,i);return function NE(i){return i[11]}(li(a)?a:i)}(),i})(),Kf=(()=>{class i{}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:()=>null}),i})();class Ru{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const kE=new Ru("13.3.5"),am={};function um(i,s,a,l,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&l.push(nn(f)),Qr(f))for(let w=10;w<f.length;w++){const I=f[w],T=I[1].firstChild;null!==T&&um(I[1],I,T,l)}const _=a.type;if(8&_)um(i,s,a.child,l);else if(32&_){const w=Je(a,s);let I;for(;I=w();)l.push(I)}else if(16&_){const w=F0(s,a);if(Array.isArray(w))l.push(...w);else{const I=In(s[16]);um(I[1],I,w,l,!0)}}a=c?a.projectionNext:a.next}return l}class Yf{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return um(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Qr(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Ay(s,l),rs(a,l))}this._attachedToViewContainer=!1}Sy(this._lView[1],this._lView)}onDestroy(s){sw(this._lView[1],this._lView,null,s)}markForCheck(){_g(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){_d(this._lView[1],this._lView,this.context)}checkNoChanges(){!function pw(i,s,a){As(!0);try{_d(i,s,a)}finally{As(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Me(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ng(i,s){sg(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Me(902,"");this._appRef=s}}class OC extends Yf{constructor(s){super(s),this._view=s}detectChanges(){vg(this._view)}checkNoChanges(){!function gw(i){As(!0);try{vg(i)}finally{As(!1)}}(this._view)}get context(){return null}}class Jd extends Ra{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Ut(s);return new av(a,this.ngModule)}}function Pa(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class av extends ME{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Uy(i){return i.map(Eb).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Pa(this.componentDef.inputs)}get outputs(){return Pa(this.componentDef.outputs)}create(s,a,l,c){const f=(c=c||this.ngModule)?function FE(i,s){return{get:(a,l,c)=>{const f=i.get(a,am,c);return f!==am||l===am?f:s.get(a,l,c)}}}(s,c.injector):s,_=f.get(RE,Ao),w=f.get(Kf,null),I=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",S=l?function hg(i,s,a){if(ln(i))return i.selectRootElement(s,a===Vt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):ad(_.createRenderer(null,this.componentDef),T,function oc(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(T)),k=this.componentDef.onPush?576:528,V=function Iw(i,s){return{components:[],scheduler:i||by,clean:gf,playerHandler:s||null,flags:0}}(),z=df(0,null,null,1,0,null,null,null,null,null),ge=Ml(null,z,V,k,null,null,_,I,w,f);let Pe,Ue;Qs(ge);try{const rt=function Yn(i,s,a,l,c,f){const _=a[1];a[20]=i;const I=Ol(_,20,2,"#host",null),T=I.mergedAttrs=s.hostAttrs;null!==T&&(wd(I,T,!0),null!==i&&(ft(c,i,T),null!==I.classes&&os(c,i,I.classes),null!==I.styles&&L0(c,i,I.styles)));const S=l.createRenderer(i,s),k=Ml(a,nw(s),null,s.onPush?64:16,a[20],I,l,S,f||null,null);return _.firstCreatePass&&(Os(Ln(I,a),_,s.type),n_(_,I),yd(I,a.length,1)),vu(a,k),a[20]=k}(S,this.componentDef,ge,_,I);if(S)if(l)ft(I,S,["ng-version",kE.full]);else{const{attrs:Ie,classes:He}=function Ib(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++l]):8===c&&a.push(f);else{if(!ho(c))break;c=f}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&ft(I,S,Ie),He&&He.length>0&&os(I,S,He.join(" "))}if(Ue=aa(z,20),void 0!==a){const Ie=Ue.projection=[];for(let He=0;He<this.ngContentSelectors.length;He++){const qt=a[He];Ie.push(null!=qt?Array.from(qt):null)}}Pe=function m_(i,s,a,l,c){const f=a[1],_=function aw(i,s,a){const l=fn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),r_(i,l,s,yu(i,s,1,null),a));const c=fi(s,i,l.directiveStart,l);Ar(c,s);const f=hr(l,s);return f&&Ar(f,s),c}(f,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=fn();s.contentQueries(1,_,I.directiveStart)}const w=fn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Ms(w.index),uw(a[1],w,0,w.directiveStart,w.directiveEnd,s),lw(s,_)),_}(rt,this.componentDef,ge,V,[jb]),Rl(z,ge,null)}finally{Xs()}return new Xd(this.componentType,Pe,ic(Ue,ge),ge,Ue)}}class Xd extends class xE{}{constructor(s,a,l,c,f){super(),this.location=l,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new OC(c),this.componentType=s}get injector(){return new pi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class ac{}class eh{}const Na=new Map;class cv extends ac{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Jd(this);const l=sn(s);this._bootstrapComponents=p(l.bootstrap),this._r3Injector=bn(s,a,[{provide:ac,useValue:this},{provide:Ra,useValue:this.componentFactoryResolver}],ce(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=po.THROW_IF_NOT_FOUND,l=ut.Default){return s===po||s===ac||s===Ig?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Jo extends eh{constructor(s){super(),this.moduleType=s,null!==sn(s)&&function ji(i){const s=new Set;!function a(l){const c=sn(l,!0),f=c.id;null!==f&&(function lv(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ce(s)} vs ${ce(s.name)}`)}(f,Na.get(f),l),Na.set(f,l));const _=p(c.imports);for(const w of _)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new cv(this.moduleType,s)}}function np(i){return s=>{setTimeout(i,void 0,s)}}const $s=class ZE extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,f,_;let w=s,I=a||(()=>null),T=l;if(s&&"object"==typeof s){const k=s;w=null===(c=k.next)||void 0===c?void 0:c.bind(k),I=null===(f=k.error)||void 0===f?void 0:f.bind(k),T=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(I=np(I),w&&(w=np(w)),T&&(T=np(T)));const S=super.subscribe({next:w,error:I,complete:T});return s instanceof W.w0&&s.add(S),S}};function rp(){return this._results[Fl()]()}class rh{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Fl(),l=rh.prototype;l[a]||(l[a]=rp)}get changes(){return this._changes||(this._changes=new $s)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=mr(s);(this._changesDetected=!function ul(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],f=s[l];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let dc=(()=>{class i{}return i.__NG_ELEMENT_ID__=KE,i})();const VC=dc,fv=class extends VC{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Ml(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(a)),Rl(a,l,s),new Yf(l)}};function KE(){return lm(fn(),Ee())}function lm(i,s){return 4&i.type?new fv(s,i,ic(i,s)):null}let ip=(()=>{class i{}return i.__NG_ELEMENT_ID__=YE,i})();function YE(){return yv(fn(),Ee())}const pv=ip,QE=class extends pv{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return ic(this._hostTNode,this._hostLView)}get injector(){return new pi(this._hostTNode,this._hostLView)}get parentInjector(){const s=ti(this._hostTNode,this._hostLView);if(Uc(s)){const a=hi(s,this._hostLView),l=an(s);return new pi(a[1].data[l+8],a)}return new pi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=gv(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,f){const _=s&&!function Lo(i){return"function"==typeof i}(s);let w;if(_)w=a;else{const k=a||{};w=k.index,l=k.injector,c=k.projectableNodes,f=k.ngModuleRef}const I=_?s:new av(Ut(s)),T=l||this.parentInjector;if(!f&&null==I.ngModule){const V=(_?T:this.parentInjector).get(ac,null);V&&(f=V)}const S=I.create(T,c,void 0,f);return this.insert(S.hostView,w),S}insert(s,a){const l=s._lView,c=l[1];if(function Za(i){return Qr(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=l[3],V=new QE(k,k[6],k[3]);V.detach(V.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function ud(i,s,a,l){const c=10+l,f=a.length;l>0&&(a[c-1][4]=s),l<f-10?(s[4]=a[c],ll(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function ld(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(c,l,_,f);const w=Py(f,_),I=l[11],T=ef(I,_[7]);return null!==T&&function Xh(i,s,a,l,c,f){l[0]=c,l[6]=s,sg(i,l,a,1,c,f)}(c,_[6],I,l,T,w),s.attachToViewContainerRef(),ll(mv(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=gv(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Ay(this._lContainer,a);l&&(rs(mv(this._lContainer),a),Sy(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Ay(this._lContainer,a);return l&&null!=rs(mv(this._lContainer),a)?new Yf(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function gv(i){return i[8]}function mv(i){return i[8]||(i[8]=[])}function yv(i,s){let a;const l=s[i.index];if(Qr(l))a=l;else{let c;if(8&i.type)c=nn(l);else{const f=s[11];c=f.createComment("");const _=hr(i,s);ss(f,ef(f,_),c,function yb(i,s){return ln(i)?i.nextSibling(s):s.nextSibling}(f,_),!1)}s[i.index]=a=i_(l,s,c,i),vu(s,a)}return new QE(a,i,s)}class op{constructor(s){this.queryList=s,this.matches=null}clone(){return new op(this.queryList)}setDirty(){this.queryList.setDirty()}}class sh{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<l;f++){const _=a.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new sh(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==fm(s,a).matches&&this.queries[a].setDirty()}}class _v{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class cm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(s,c);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new cm(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class dm{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new dm(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const f=l[c];this.matchTNodeWithReadOption(s,a,BC(a,f)),this.matchTNodeWithReadOption(s,a,Po(a,s,f,!1,!1))}else l===dc?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Po(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===sc||c===ip||c===dc&&4&a.type)this.addMatch(a.index,-2);else{const f=Po(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function BC(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function jC(i,s,a,l){return-1===a?function vv(i,s){return 11&i.type?ic(i,s):4&i.type?lm(i,s):null}(s,i):-2===a?function wv(i,s,a){return a===sc?ic(s,i):a===dc?lm(s,i):a===ip?yv(s,i):void 0}(i,s,l):fi(i,i[1],a,s)}function JE(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const f=i.data,_=a.matches,w=[];for(let I=0;I<_.length;I+=2){const T=_[I];w.push(T<0?null:jC(s,f[T],_[I+1],a.metadata.read))}c.matches=w}return c.matches}function Ev(i,s,a,l){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const _=JE(i,s,c,a);for(let w=0;w<f.length;w+=2){const I=f[w];if(I>0)l.push(_[w/2]);else{const T=f[w+1],S=s[-I];for(let k=10;k<S.length;k++){const V=S[k];V[17]===V[3]&&Ev(V[1],V,T,l)}if(null!==S[9]){const k=S[9];for(let V=0;V<k.length;V++){const z=k[V];Ev(z[1],z,T,l)}}}}}return l}function hm(i){const s=Ee(),a=xt(),l=Qu();Ju(l+1);const c=fm(a,l);if(i.dirty&&Cs(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?Ev(a,s,l,[]):JE(a,s,c,l);i.reset(f,sv),i.notifyOnChanges()}return!0}return!1}function XE(i,s,a,l){const c=xt();if(c.firstCreatePass){const f=fn();(function nI(i,s,a){null===i.queries&&(i.queries=new cm),i.queries.track(new dm(s,a))})(c,new _v(s,a,l),f.index),function HC(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function tI(i,s,a){const l=new rh(4==(4&a));sw(i,s,l,l.destroy),null===s[19]&&(s[19]=new sh),s[19].queries.push(new op(l))}(c,Ee(),a)}function eI(){return function $C(i,s){return i[19].queries[s].queryList}(Ee(),Qu())}function fm(i,s){return i.queries.getByIndex(s)}function ah(...i){}const bm=new pn("Application Initializer");let Mv=(()=>{class i{constructor(a){this.appInits=a,this.resolve=ah,this.reject=ah,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(Vg(f))a.push(f);else if(A_(f)){const _=new Promise((w,I)=>{f.subscribe({complete:w,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Qe(bm,8))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Cm=new pn("AppId",{providedIn:"root",factory:function Ov(){return`${dp()}${dp()}${dp()}`}});function dp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Dm=new pn("Platform Initializer"),uh=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ka=new pn("appBootstrapListener");let lh=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Tm=new pn("LocaleId",{providedIn:"root",factory:()=>Ct(Tm,ut.Optional|ut.SkipSelf)||function ch(){return"undefined"!=typeof $localize&&$localize.locale||Jg}()}),dh=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Rv{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Pv=(()=>{class i{compileModuleSync(a){return new Jo(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=p(sn(a).declarations).reduce((_,w)=>{const I=Ut(w);return I&&_.push(new av(I)),_},[]);return new Rv(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const YC=(()=>Promise.resolve(0))();function hp(i){"undefined"==typeof Zone?YC.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Io{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $s(!1),this.onMicrotaskEmpty=new $s(!1),this.onStable=new $s(!1),this.onError=new $s(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function kv(){let i=kt.requestAnimationFrame,s=kt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function bI(i){const s=()=>{!function II(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(kt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Am(i),i.isCheckStableRunning=!0,Fv(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Am(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,f,_,w)=>{try{return Lv(i),a.invokeTask(c,f,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),CI(i)}},onInvoke:(a,l,c,f,_,w,I)=>{try{return Lv(i),a.invoke(c,f,_,w,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),CI(i)}},onHasTask:(a,l,c,f)=>{a.hasTask(c,f),l===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Am(i),Fv(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Io.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Io.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,s,EI,ah,ah);try{return f.runTask(_,a,l)}finally{f.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const EI={};function Fv(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Am(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Lv(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function CI(i){i._nesting--,Fv(i)}class QC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $s,this.onMicrotaskEmpty=new $s,this.onStable=new $s,this.onError=new $s}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let DI=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Io.assertNotInAngularZone(),hp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hp(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Qe(Io))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})(),JC=(()=>{class i{constructor(){this._applications=new Map,fp.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return fp.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class Vv{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function Uv(i){fp=i}let fp=new Vv,yc=null;const Sm=new pn("AllowMultipleToken"),TI=new pn("PlatformOnDestroy");class AI{constructor(s,a){this.name=s,this.token=a}}function xm(i,s,a=[]){const l=`Platform: ${s}`,c=new pn(l);return(f=[])=>{let _=pp();if(!_||_.injector.get(Sm,!1)){const w=[...a,...f,{provide:c,useValue:!0}];i?i(w):function eD(i){if(yc&&!yc.get(Sm,!1))throw new Me(400,"");yc=i;const s=i.get(SI),a=i.get(Dm,null);a&&a.forEach(l=>l())}(function $v(i=[],s){return po.create({name:s,providers:[{provide:Ca,useValue:"platform"},{provide:TI,useValue:()=>yc=null},...i]})}(w,l))}return function tD(i){const s=pp();if(!s)throw new Me(401,"");return s}()}}function pp(){var i;return null!==(i=null==yc?void 0:yc.get(SI))&&void 0!==i?i:null}let SI=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function Hv(i,s){let a;return a="noop"===i?new QC:("zone.js"===i?void 0:i)||new Io({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:Io,useValue:w}];return w.run(()=>{const T=po.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(T),k=S.injector.get(_r,null);if(!k)throw new Me(402,"");return w.runOutsideAngular(()=>{const V=w.onError.subscribe({next:z=>{k.handleError(z)}});S.onDestroy(()=>{Om(this._modules,S),V.unsubscribe()})}),function Gv(i,s,a){try{const l=a();return Vg(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,w,()=>{const V=S.injector.get(Mv);return V.runInitializers(),V.donePromise.then(()=>(function un(i){Xt(i,"Expected localeId to be defined"),"string"==typeof i&&(iE=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Tm,Jg)||Jg),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=Mm({},l);return function Bv(i,s,a){const l=new Jo(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const l=a.injector.get(Fu);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Me(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Me(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(TI,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Qe(po))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Mm(i,s){return Array.isArray(s)?s.reduce(Mm,i):Object.assign(Object.assign({},i),s)}let Fu=(()=>{class i{constructor(a,l,c,f){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new P.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),w=new P.y(I=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{Io.assertNotInAngularZone(),hp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Io.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{T.unsubscribe(),S.unsubscribe()}});this.isStable=(0,se.T)(_,w.pipe((0,J.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Me(405,"");let c;c=a instanceof ME?a:this._injector.get(Ra).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const f=function jv(i){return i.isBoundToModule}(c)?void 0:this._injector.get(ac),w=c.create(po.NULL,[],l||c.selector,f),I=w.location.nativeElement,T=w.injector.get(DI,null),S=T&&w.injector.get(JC);return T&&S&&S.registerApplication(I,T),w.onDestroy(()=>{this.detachView(w.hostView),Om(this.components,w),S&&S.unregisterApplication(I)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Me(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Om(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(ka,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Qe(Io),Qe(po),Qe(_r),Qe(Mv))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Om(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Pm=!0,Xo=!1;function qv(){return Xo=!0,Pm}function rD(){if(Xo)throw new Error("Cannot enable prod mode after platform setup.");Pm=!1}let zv=(()=>{class i{}return i.__NG_ELEMENT_ID__=iD,i})();function iD(i){return function Wv(i,s,a){if(vs(i)&&!a){const l=fr(i.index,s);return new Yf(l,l)}return 47&i.type?new Yf(s[16],s):null}(fn(),Ee(),16==(16&i))}class NI{constructor(){}supports(s){return bu(s)}create(s){return new dD(s)}}const cD=(i,s)=>s;class dD{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||cD}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,f=null;for(;a||l;){const _=!l||a&&a.currentIndex<Um(l,c,f)?a:l,w=Um(_,c,f),I=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{f||(f=[]);const T=w-c,S=I-c;if(T!=S){for(let V=0;V<T;V++){const z=V<f.length?f[V]:f[V]=0,ge=z+V;S<=ge&&ge<T&&(f[V]=z+1)}f[_.previousIndex]=S-T}}w!==I&&s(_,w,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!bu(s))throw new Me(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)f=s[w],_=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,f,_,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,w),l=!0),a=a._next}else c=0,function v_(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Fl()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{_=this._trackByFn(c,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,c)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new kI(a,l),f,c),s}_verifyReinsertion(s,a,l,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Qv),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Qv),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class kI{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Yv{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Qv{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new Yv,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Um(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class Bm{constructor(){}supports(s){return s instanceof Map||Sd(s)}create(){return new Jv}}class Jv{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Sd(s)))throw new Me(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const l=new jm(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class jm{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $m(){return new Hm([new NI])}let Hm=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||$m()),deps:[[i,new so,new ii]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Me(901,"")}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:$m}),i})();function Xv(){return new _p([new Bm])}let _p=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Xv()),deps:[[i,new so,new ii]]}}find(a){const l=this.factories.find(f=>f.supports(a));if(l)return l;throw new Me(901,"")}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:Xv}),i})();const hD=xm(null,"core",[]);let LI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Qe(Fu))},i.\u0275mod=Z({type:i}),i.\u0275inj=$t({}),i})()},3942:(at,De,N)=>{N.d(De,{Z:()=>Me});var g=N(2090),W=N(4859),P=N(9681),se=N(1877);class J{constructor(he,ve){this._delegate=he,this.firebase=ve,(0,P._addComponent)(he,new W.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(he,ve=P._DEFAULT_ENTRY_NAME){var et;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(he);return!Ze.isInitialized()&&"EXPLICIT"===(null===(et=Ze.getComponent())||void 0===et?void 0:et.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:ve})}_removeServiceInstance(he,ve=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(ve)}_addComponent(he){(0,P._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,P._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function oe(){const ke=function ce(ke){const he={},ve={__esModule:!0,initializeApp:function be(je,te={}){const ze=P.initializeApp(je,te);if((0,g.r3)(he,ze.name))return he[ze.name];const Q=new ke(ze,ve);return he[ze.name]=Q,Q},app:Ze,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function _e(je){const te=je.name,ze=te.replace("-compat","");if(P._registerComponent(je)&&"PUBLIC"===je.type){const Q=(ie=Ze())=>{if("function"!=typeof ie[ze])throw re.create("invalid-app-argument",{appName:te});return ie[ze]()};void 0!==je.serviceProps&&(0,g.ZB)(Q,je.serviceProps),ve[ze]=Q,ke.prototype[ze]=function(...ie){return this._getService.bind(this,te).apply(this,je.multipleInstances?ie:[])}}return"PUBLIC"===je.type?ve[ze]:null},removeApp:function et(je){delete he[je]},useAsService:function $e(je,te){return"serverAuth"===te?null:te},modularAPIs:P}};function Ze(je){if(!(0,g.r3)(he,je=je||P._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:je});return he[je]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function me(){return Object.keys(he).map(je=>he[je])}}),Ze.App=ke,ve}(J);return ke.INTERNAL=Object.assign(Object.assign({},ke.INTERNAL),{createFirebaseNamespace:oe,extendNamespace:function he(ve){(0,g.ZB)(ke,ve)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),ke}(),j=new se.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ke=self.firebase.SDK_VERSION;ke&&ke.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Me=B;!function Te(ke){(0,P.registerVersion)("@firebase/app-compat","0.1.23",ke)}()},9681:(at,De,N)=>{N.r(De),N.d(De,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>br,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>zn,_addOrOverwriteComponent:()=>yn,_apps:()=>Ge,_clearComponents:()=>Lt,_components:()=>Ft,_getProvider:()=>ui,_registerComponent:()=>Kt,_removeServiceInstance:()=>$t,deleteApp:()=>qi,getApp:()=>Cr,getApps:()=>Gi,initializeApp:()=>Ti,onLog:()=>Wn,registerVersion:()=>kr,setLogLevel:()=>Un});var g=N(5861),W=N(4859),P=N(1877),se=N(2090);class J{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(Ye=>{if(function fe(Ke){const Ce=Ke.getComponent();return"VERSION"===(null==Ce?void 0:Ce.type)}(Ye)){const ct=Ye.getImmediate();return`${ct.library}/${ct.version}`}return null}).filter(Ye=>Ye).join(" ")}}const re="@firebase/app",oe=new P.Yd("@firebase/app"),jt="[DEFAULT]",Xt={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ge=new Map,Ft=new Map;function zn(Ke,Ce){try{Ke.container.addComponent(Ce)}catch(Ye){oe.debug(`Component ${Ce.name} failed to register with FirebaseApp ${Ke.name}`,Ye)}}function yn(Ke,Ce){Ke.container.addOrOverwriteComponent(Ce)}function Kt(Ke){const Ce=Ke.name;if(Ft.has(Ce))return oe.debug(`There were multiple attempts to register component ${Ce}.`),!1;Ft.set(Ce,Ke);for(const Ye of Ge.values())zn(Ye,Ke);return!0}function ui(Ke,Ce){const Ye=Ke.container.getProvider("heartbeat").getImmediate({optional:!0});return Ye&&Ye.triggerHeartbeat(),Ke.container.getProvider(Ce)}function $t(Ke,Ce,Ye=jt){ui(Ke,Ce).clearInstance(Ye)}function Lt(){Ft.clear()}const Zr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ps{constructor(Ce,Ye,ct){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},Ye),this._name=Ye.name,this._automaticDataCollectionEnabled=Ye.automaticDataCollectionEnabled,this._container=ct,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}const br="9.7.0";function Ti(Ke,Ce={}){"object"!=typeof Ce&&(Ce={name:Ce});const Ye=Object.assign({name:jt,automaticDataCollectionEnabled:!1},Ce),ct=Ye.name;if("string"!=typeof ct||!ct)throw Zr.create("bad-app-name",{appName:String(ct)});const Nt=Ge.get(ct);if(Nt){if((0,se.vZ)(Ke,Nt.options)&&(0,se.vZ)(Ye,Nt.config))return Nt;throw Zr.create("duplicate-app",{appName:ct})}const St=new W.H0(ct);for(const L of Ft.values())St.addComponent(L);const U=new ps(Ke,Ye,St);return Ge.set(ct,U),U}function Cr(Ke=jt){const Ce=Ge.get(Ke);if(!Ce)throw Zr.create("no-app",{appName:Ke});return Ce}function Gi(){return Array.from(Ge.values())}function qi(Ke){return ut.apply(this,arguments)}function ut(){return(ut=(0,g.Z)(function*(Ke){const Ce=Ke.name;Ge.has(Ce)&&(Ge.delete(Ce),yield Promise.all(Ke.container.getProviders().map(Ye=>Ye.delete())),Ke.isDeleted=!0)})).apply(this,arguments)}function kr(Ke,Ce,Ye){var ct;let Nt=null!==(ct=Xt[Ke])&&void 0!==ct?ct:Ke;Ye&&(Nt+=`-${Ye}`);const St=Nt.match(/\s|\//),U=Ce.match(/\s|\//);if(St||U){const L=[`Unable to register library "${Nt}" with version "${Ce}":`];return St&&L.push(`library name "${Nt}" contains illegal characters (whitespace or "/")`),St&&U&&L.push("and"),U&&L.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void oe.warn(L.join(" "))}Kt(new W.wA(`${Nt}-version`,()=>({library:Nt,version:Ce}),"VERSION"))}function Wn(Ke,Ce){if(null!==Ke&&"function"!=typeof Ke)throw Zr.create("invalid-log-argument");(0,P.Am)(Ke,Ce)}function Un(Ke){(0,P.Ub)(Ke)}const hn="firebase-heartbeat-store";let Zn=null;function gs(){return Zn||(Zn=(0,se.X3)("firebase-heartbeat-database",1,(Ke,Ce)=>{0===Ce&&Ke.createObjectStore(hn)}).catch(Ke=>{throw Zr.create("storage-open",{originalErrorMessage:Ke.message})})),Zn}function Vt(){return(Vt=(0,g.Z)(function*(Ke){try{return(yield gs()).transaction(hn).objectStore(hn).get(Xn(Ke))}catch(Ce){throw Zr.create("storage-get",{originalErrorMessage:Ce.message})}})).apply(this,arguments)}function it(Ke,Ce){return gt.apply(this,arguments)}function gt(){return(gt=(0,g.Z)(function*(Ke,Ce){try{const ct=(yield gs()).transaction(hn,"readwrite");return yield ct.objectStore(hn).put(Ce,Xn(Ke)),ct.complete}catch(Ye){throw Zr.create("storage-set",{originalErrorMessage:Ye.message})}})).apply(this,arguments)}function Xn(Ke){return`${Ke.name}!${Ke.options.appId}`}class Gs{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const Ye=this.container.getProvider("app").getImmediate();this._storage=new lt(Ye),this._heartbeatsCachePromise=this._storage.read().then(ct=>(this._heartbeatsCache=ct,ct))}triggerHeartbeat(){var Ce=this;return(0,g.Z)(function*(){const ct=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Nt=lr();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Nt&&!Ce._heartbeatsCache.heartbeats.some(St=>St.date===Nt))return Ce._heartbeatsCache.heartbeats.push({date:Nt,agent:ct}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(St=>{const U=new Date(St.date).valueOf();return Date.now()-U<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,g.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const Ye=lr(),{heartbeatsToSend:ct,unsentEntries:Nt}=function er(Ke,Ce=1024){const Ye=[];let ct=Ke.slice();for(const Nt of Ke){const St=Ye.find(U=>U.agent===Nt.agent);if(St){if(St.dates.push(Nt.date),cr(Ye)>Ce){St.dates.pop();break}}else if(Ye.push({agent:Nt.agent,dates:[Nt.date]}),cr(Ye)>Ce){Ye.pop();break}ct=ct.slice(1)}return{heartbeatsToSend:Ye,unsentEntries:ct}}(Ce._heartbeatsCache.heartbeats),St=(0,se.L)(JSON.stringify({version:2,heartbeats:ct}));return Ce._heartbeatsCache.lastSentHeartbeatDate=Ye,Nt.length>0?(Ce._heartbeatsCache.heartbeats=Nt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),St})()}}function lr(){return(new Date).toISOString().substring(0,10)}class lt{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,g.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function ta(Ke){return Vt.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var Ye=this;return(0,g.Z)(function*(){var ct;if(yield Ye._canUseIndexedDBPromise){const St=yield Ye.read();return it(Ye.app,{lastSentHeartbeatDate:null!==(ct=Ce.lastSentHeartbeatDate)&&void 0!==ct?ct:St.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var Ye=this;return(0,g.Z)(function*(){var ct;if(yield Ye._canUseIndexedDBPromise){const St=yield Ye.read();return it(Ye.app,{lastSentHeartbeatDate:null!==(ct=Ce.lastSentHeartbeatDate)&&void 0!==ct?ct:St.lastSentHeartbeatDate,heartbeats:[...St.heartbeats,...Ce.heartbeats]})}})()}}function cr(Ke){return(0,se.L)(JSON.stringify({version:2,heartbeats:Ke})).length}!function Ot(Ke){Kt(new W.wA("platform-logger",Ce=>new J(Ce),"PRIVATE")),Kt(new W.wA("heartbeat",Ce=>new Gs(Ce),"PRIVATE")),kr(re,"0.7.22",Ke),kr(re,"0.7.22","esm2017"),kr("fire-js","")}("")},4859:(at,De,N)=>{N.d(De,{H0:()=>ce,wA:()=>P});var g=N(5861),W=N(2090);class P{constructor(B,j,K){this.name=B,this.instanceFactory=j,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const se="[DEFAULT]";class J{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const K=new W.BH;if(this.instancesDeferred.set(j,K),this.isInitialized(j)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:j});qe&&K.resolve(qe)}catch(qe){}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const K=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),qe=null!==(j=null==B?void 0:B.optional)&&void 0!==j&&j;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Te){if(qe)return null;throw Te}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function re(oe){return"EAGER"===oe.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:se})}catch(j){}for(const[j,K]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:qe});K.resolve(Te)}catch(Te){}}}}clearInstance(B=se){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,g.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...j.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=se){return this.instances.has(B)}getOptions(B=se){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,K=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:K,options:j});for(const[Te,Me]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Te)&&Me.resolve(qe);return qe}onInit(B,j){var K;const qe=this.normalizeInstanceIdentifier(j),Te=null!==(K=this.onInitCallbacks.get(qe))&&void 0!==K?K:new Set;Te.add(B),this.onInitCallbacks.set(qe,Te);const Me=this.instances.get(qe);return Me&&B(Me,qe),()=>{Te.delete(B)}}invokeOnInitCallbacks(B,j){const K=this.onInitCallbacks.get(j);if(K)for(const qe of K)try{qe(B,j)}catch(Te){}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let K=this.instances.get(B);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(oe=B,oe===se?void 0:oe),options:j}),this.instances.set(B,K),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(K,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,K)}catch(qe){}var oe;return K||null}normalizeInstanceIdentifier(B=se){return this.component?this.component.multipleInstances?B:se:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new J(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(at,De,N)=>{N.d(De,{Am:()=>oe,Ub:()=>ce,Yd:()=>re,in:()=>W});const g=[];var W=(()=>{return(B=W||(W={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",W;var B})();const P={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},se=W.INFO,J={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},fe=(B,j,...K)=>{if(j<B.logLevel)return;const qe=(new Date).toISOString(),Te=J[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${qe}]  ${B.name}:`,...K)};class re{constructor(j){this.name=j,this._logLevel=se,this._logHandler=fe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in W))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?P[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...j),this._logHandler(this,W.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...j),this._logHandler(this,W.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,W.INFO,...j),this._logHandler(this,W.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,W.WARN,...j),this._logHandler(this,W.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...j),this._logHandler(this,W.ERROR,...j)}}function ce(B){g.forEach(j=>{j.setLogLevel(B)})}function oe(B,j){for(const K of g){let qe=null;j&&j.level&&(qe=P[j.level]),K.userLogHandler=null===B?null:(Te,Me,...ke)=>{const he=ke.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch(et){return null}}).filter(ve=>ve).join(" ");Me>=(null!=qe?qe:Te.logLevel)&&B({level:W[Me].toLowerCase(),message:he,args:ke,type:Te.name})}}}},5861:(at,De,N)=>{function g(P,se,J,fe,re,ce,oe){try{var B=P[ce](oe),j=B.value}catch(K){return void J(K)}B.done?se(j):Promise.resolve(j).then(fe,re)}function W(P){return function(){var se=this,J=arguments;return new Promise(function(fe,re){var ce=P.apply(se,J);function oe(j){g(ce,fe,re,oe,B,"next",j)}function B(j){g(ce,fe,re,oe,B,"throw",j)}oe(void 0)})}}N.d(De,{Z:()=>W})}},at=>{at(at.s=3094)}]);